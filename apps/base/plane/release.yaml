apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
    name: plane
    namespace: plane
spec:
    releaseName: plane
    chart:
        spec:
            chart: plane-enterprise
            version: 1.1.8
            sourceRef:
                kind: HelmRepository
                name: plane
    interval: 60m
    values:
        license:
            licenseDoamin: plane.midnightthoughts.space
        ingress:
            enabled: false
        minio:
            root_password: ENC[AES256_GCM,data:ozvWph8Iv3HbCqQfUMG2CrnMPUBvbhiijkSNdCli2Rzrdll0Bwsjnp8ZLSEJX89V5eILk9erbPc7TwiljaEk3g==,iv:wX8Y1kqlECTAOnd6BUrEz49Jfwv2VHBW9mI8E6dt8f0=,tag:yuQ+bADbEDWyFfdbKsq0Zg==,type:str]
        postgres:
            local_setup: false
        env:
            storageClass: ceph-filesystem
            pgdb_username: plane
            pgdb_password: ENC[AES256_GCM,data:HTMFuMV9GAH+kDiAPP4HeTxzKXyKhCfZPRFs8XtrG3SZ3Z3mNG5NrPg8rAKBuEVfhmjWAOsUQWWE6kQkDs5pOA==,iv:H+61gLK4gDputtQpyMdPfhK7bUv+md/tw0C7f0t2J/s=,tag:l/XLOY6vnAUYAgd/fdauDQ==,type:str]
            pgdb_name: plane
            pgdb_remote_url: ENC[AES256_GCM,data:J8RUmG9WfYpmaJv5WR7yadRHBZOo77kyBYbhGr7uJ0DcAEYrD22Fdn5DNbshxau0lACWRYqKXaL15ZCUEJlotmKE4xBZwefhfgIlgUZRHTI7i8tHMGZ0Pa0HStPEj8X7jTmZe6pL05zWpk8h6GtwFuhSEYeHvji9ee8ges7qgCXOihJgZgKy6kTamKqt,iv:dGBxLfcTLmDiMhq3fThEDGK82/XBOMHy5p3MSV4Drgw=,tag:GgvlGW+4zAMYRxtEoZmKcA==,type:str]
            secret_key: ENC[AES256_GCM,data:+d0UExoJQ0PWLpk1evSAulPl+Jbw2qUbM4MndWUiUXworqZyS7Z8GuyALc1DVrtJznuys2+iCT6yPlIXFrqZgA==,iv:55/Dm9NOhM4gvbGIA/Ld5MGO76shOPXFvF5qTN08FB8=,tag:XLHfMxEUqWb/aq5Bn4nGcA==,type:str]
            hmac_secret_key: ENC[AES256_GCM,data:T5oICMJhTD71WyQr5sm7wyorIIMyth+1GZ+0xCv6GWxNckHz9CzxtndermIvFDNpaqZvu1T2mQXfHun+4UbtOQ==,iv:09m4ANsiGGJ/CGdTrUZGX5+l4+oLbi63Wa47ZtE40U4=,tag:Hge8/+TOODlX9jw8r8nt6w==,type:str]
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1esjyg2qfy49awv0ptkzvpk425adczjr38m37w2mmcahzc4p8n54sll2nzh
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSAyT3F3cGNCUUdsam5ad2pj
            anhrRWszaHZKR1BDaXpQWVMwNExJZjVyYzMwCk1DL3FzS2hxQ2VUenlpSWk3ZExz
            Tkx0NitqSWFyWWo0bFJvUVluZU1kYUEKLS0tIGs1Y1U4aEtNWGUyclFybytVTGh3
            OG9QcWE4UUxOalRSRkFUMi9IWFdIbzQKP4ZughSfnZP9z8Ug3fsv/HH1xa0IAzL1
            iweIt24EU61eedSk2DSTEjqS+QuLb8qa2YznstL5JcXu1dSXTk9Wdg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-04-04T18:05:40Z"
    mac: ENC[AES256_GCM,data:EKKDa4/jKzd2PdyNP9VsGgy4PKmjA6+JMx7qNi/8Aszu1dw+7PQ6zhhSttRNC5XjZ6GYt1i2HTHJugmS5YcZFxKfcMz8u7+Z4L42lg0geHy4qV6j5haaS6wSorKzrUjaJxeYYqPw/aFE+6kDa+NOIZIKgjUTBrFMT+jhE4UO/zY=,iv:wfm1zliqxrhSK7J//Vvzloy7amrZiVWnaYdlzeGgd6Y=,tag:yxVWg+4mSdw1u2S3X44YZg==,type:str]
    pgp: []
    encrypted_regex: ^(root_password|pgdb_password|pgdb_remote_url|hmac_secret_key|adminPassword|adminEmail|jenkinsAdminEmail|securityRealm|gerrit.config|routing_key|DATABASE_URL|SMTP_PASSWORD|SECRET_KEY_BASE|admin_password|extraCommands|key|clickhouseDatabaseURL|databaseURL|client_id|client_secret|secret_key_base|otp_secret|private_key|public_key|primaryKey|deterministicKey|keyDerivationSalt|token|clientId|secretKey|installationId|installationKey|uriOverride|adminToken.value|password.value|sql_password|erlangCookie|AUTHENTICATION_PASSWORD|ROOM_API_SECRET_KEY|adminPassword|configPassword|adminUser|configUser|MAIL_PASSWORD|APP_KEY|api_key|api_secret|keys|livekit_key|livekit_secret|secret_key|admin_pass|admin_email|mariadbPassword|mariadbRootPassword|privateKey|data|stringData|PASSWD|password|pass|postgresPassword|postgresqlPassword|redminePassword|smtpPassword|registration_shared_secret|shared_secret|secret|admin_token|integrationKey|rootPassword)$
    version: 3.9.1
---
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
    name: plane
    namespace: plane
spec:
    parentRefs:
        - name: envoy-gateway
          namespace: envoy-gateway
    hostnames:
        - plane.midnightthoughts.space
    rules:
        - backendRefs:
            - name: plane-web
              port: 3000
          matches:
            - path:
                type: PathPrefix
                value: /
        - backendRefs:
            - name: plane-api
              port: 8000
          matches:
            - path:
                type: PathPrefix
                value: /api
        - backendRefs:
            - name: plane-api
              port: 8000
          matches:
            - path:
                type: PathPrefix
                value: /auth
        - backendRefs:
            - name: plane-live
              port: 3000
          matches:
            - path:
                type: PathPrefix
                value: /live
        - backendRefs:
            - name: plane-space
              port: 3000
          matches:
            - path:
                type: PathPrefix
                value: /spaces
        - backendRefs:
            - name: plane-admin
              port: 3000
          matches:
            - path:
                type: PathPrefix
                value: /god-mode
        - backendRefs:
            - name: plane-minio
              port: 9000
          matches:
            - path:
                type: PathPrefix
                value: /uploads
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1esjyg2qfy49awv0ptkzvpk425adczjr38m37w2mmcahzc4p8n54sll2nzh
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSAyT3F3cGNCUUdsam5ad2pj
            anhrRWszaHZKR1BDaXpQWVMwNExJZjVyYzMwCk1DL3FzS2hxQ2VUenlpSWk3ZExz
            Tkx0NitqSWFyWWo0bFJvUVluZU1kYUEKLS0tIGs1Y1U4aEtNWGUyclFybytVTGh3
            OG9QcWE4UUxOalRSRkFUMi9IWFdIbzQKP4ZughSfnZP9z8Ug3fsv/HH1xa0IAzL1
            iweIt24EU61eedSk2DSTEjqS+QuLb8qa2YznstL5JcXu1dSXTk9Wdg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-04-04T18:05:40Z"
    mac: ENC[AES256_GCM,data:EKKDa4/jKzd2PdyNP9VsGgy4PKmjA6+JMx7qNi/8Aszu1dw+7PQ6zhhSttRNC5XjZ6GYt1i2HTHJugmS5YcZFxKfcMz8u7+Z4L42lg0geHy4qV6j5haaS6wSorKzrUjaJxeYYqPw/aFE+6kDa+NOIZIKgjUTBrFMT+jhE4UO/zY=,iv:wfm1zliqxrhSK7J//Vvzloy7amrZiVWnaYdlzeGgd6Y=,tag:yxVWg+4mSdw1u2S3X44YZg==,type:str]
    pgp: []
    encrypted_regex: ^(root_password|pgdb_password|pgdb_remote_url|hmac_secret_key|adminPassword|adminEmail|jenkinsAdminEmail|securityRealm|gerrit.config|routing_key|DATABASE_URL|SMTP_PASSWORD|SECRET_KEY_BASE|admin_password|extraCommands|key|clickhouseDatabaseURL|databaseURL|client_id|client_secret|secret_key_base|otp_secret|private_key|public_key|primaryKey|deterministicKey|keyDerivationSalt|token|clientId|secretKey|installationId|installationKey|uriOverride|adminToken.value|password.value|sql_password|erlangCookie|AUTHENTICATION_PASSWORD|ROOM_API_SECRET_KEY|adminPassword|configPassword|adminUser|configUser|MAIL_PASSWORD|APP_KEY|api_key|api_secret|keys|livekit_key|livekit_secret|secret_key|admin_pass|admin_email|mariadbPassword|mariadbRootPassword|privateKey|data|stringData|PASSWD|password|pass|postgresPassword|postgresqlPassword|redminePassword|smtpPassword|registration_shared_secret|shared_secret|secret|admin_token|integrationKey|rootPassword)$
    version: 3.9.1
