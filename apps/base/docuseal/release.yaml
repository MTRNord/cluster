apiVersion: helm.toolkit.fluxcd.io/v2beta2
kind: HelmRelease
metadata:
    name: docuseal
    namespace: docuseal
spec:
    releaseName: docuseal
    interval: 60m
    chart:
        spec:
            chart: docuseal
            sourceRef:
                kind: HelmRepository
                name: docuseal
    values:
        ingress:
            main:
                enabled: true
                annotations:
                    cert-manager.io/cluster-issuer: letsencrypt-dns
                    external-dns.alpha.kubernetes.io/hostname: midnightthoughts.space
                hosts:
                    - host: docuseal.midnightthoughts.space
                      paths:
                        - path: /
                          pathType: Prefix
                          backend:
                            service:
                                name: docuseal
                                port: 3000
                tls:
                    - secretName: docuseal-midnightthoughts-space-tls
                      hosts:
                        - docuseal.midnightthoughts.space
        persistence:
            data:
                enabled: ENC[AES256_GCM,data:c/FIgg==,iv:UPrh3gdto9wuwHQGRSgVGtizfwBlL5+o+0jTKzvw8zM=,tag:mChp4xme7TuN7amxt5/opA==,type:bool]
                size: ENC[AES256_GCM,data:dP3p,iv:4tVaHdZ2VY4rYwanlzNsTSI1cmpmDxONEn0L/mlAW5g=,tag:XbASE67SO4na4/dRH9M40g==,type:str]
                accessMode: ENC[AES256_GCM,data:Rf1IwO3aEXtqAlY4+Q==,iv:mBiULHKGo3G8Xa24gbs51AwyWjV79zzzTHmj5d/a6QM=,tag:QdXtpovfcR9e4BJ+KpLUWg==,type:str]
        env:
            DATABASE_URL: ENC[AES256_GCM,data:dAmrDWsbVaqjpLTaU4w9+h2xdlakUtVhyFKX1nKmSdq5Gg1TpXehmMhtAkx76i+6GtnkYhJY9X5UHFaaeVHdttZPRSGm6XasOVTkF6rUNp3WMH4ey499aweRjzyFmppZX9Xj9g2/yZi8tHflCKI6rqFMyJjT7MMud6nAFA3NSBB+tGmBarpLKg2/s8t26tHe+EDRhNQbewBi8a0BPjOGoRlfD8Bj/zs=,iv:wQKWyeTWNl+rwV9ySbSDL5K340pnc9MVNf+7Fhu9p8I=,tag:elr7tTOdBO71sThSK+8j+A==,type:str]
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1esjyg2qfy49awv0ptkzvpk425adczjr38m37w2mmcahzc4p8n54sll2nzh
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBPVXpsazBaME5NdVZXTk0r
            Rnl3cFptekhMUlNUaEppbDZvZDVKNHE5empnCnNwdlhaRHlla1h1b09KemVsbkE4
            cWx2WjQ5UVNuN3FTZ2xYMUh5Mm8ybUUKLS0tIGFzbE9lMlVidm04R2VVOTJtR2xV
            eGNmb0tWUEs4R3VrTUdZNkRraTVXbFkKaT3mDlCfEFLx6V6WfASkOLlWr7TagmGD
            ofwv3Uba1NW4fjLK3jHyVlAZbn5QpKFurAVdE8teEZkUyX5rCOYZDQ==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-10-07T08:52:58Z"
    mac: ENC[AES256_GCM,data:1CCJ8xGemmpHUVEkkn8WlpkYuuDDviuq28/izBsVzZ73UPyYF5x8CTr4i3ansNeCoMnW0jswu24WlDvO8LcnPnpo+25rDrsPzMV9EI1Mn8hgoQ2kZgWwN+o27GbfkMFAxESNrQ9IrIsWcazA1uD7DpkZx8wXiq8JxNVYQthKMDk=,iv:OP+CI/1FZFGYo7+gKQ94/jVmtTVjQ8A9VBLg8ww1vo0=,tag:Y0NeEqWb5Ms/16tJyWHQVg==,type:str]
    pgp: []
    encrypted_regex: ^(DATABASE_URL|admin_password|extraCommands|key|clickhouseDatabaseURL|databaseURL|client_id|client_secret|secret_key_base|otp_secret|private_key|public_key|primaryKey|deterministicKey|keyDerivationSalt|token|clientId|secretKey|installationId|installationKey|uriOverride|adminToken.value|password.value|sql_password|erlangCookie|AUTHENTICATION_PASSWORD|ROOM_API_SECRET_KEY|adminPassword|configPassword|adminUser|configUser|MAIL_PASSWORD|APP_KEY|api_key|api_secret|keys|livekit_key|livekit_secret|secret_key|admin_pass|admin_email|mariadbPassword|mariadbRootPassword|privateKey|data|stringData|PASSWD|password|pass|postgresPassword|postgresqlPassword|redminePassword|smtpPassword|registration_shared_secret|shared_secret|secret|admin_token|integrationKey|rootPassword)$
    version: 3.8.1
