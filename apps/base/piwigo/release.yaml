apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
    name: piwigo
    namespace: piwigo
spec:
    releaseName: piwigo
    chart:
        spec:
            version: 9.0.5
            chart: piwigo
            sourceRef:
                kind: HelmRepository
                name: piwigo
    interval: 50m
    timeout: 25m
    install:
        timeout: 25m
        remediation:
            retries: 3
    values:
        podOptions:
            nodeSelector: {}
            tolerations:
                - key: arch
                  operator: Equal
                  value: arm64
                  effect: NoSchedule
        piwigo:
            language: en_US
            admin_user: admin
            admin_pass: ENC[AES256_GCM,data:eNyTjKm3AVZk,iv:TlJa7pudriW40aa3vfoxcodzWOV3NcuG4KNvqO9tnmQ=,tag:z81daHkPh78F3kxrmXRo6A==,type:str]
            admin_email: ENC[AES256_GCM,data:BqycVNs/b0I4hlui5eIg2fGaagw4jhI7,iv:tDrYA0ninhU4b95KIUd6t1mMDUnLxyzvZMCixve0Oc4=,tag:eWTMjwaMHfeblxzn4BqpMw==,type:str]
        persistence:
            config:
                enabled: true
                type: pvc
                mountPath: /config
                size: 2Gi
                storageClass: nfs-csi
            gallery:
                enabled: true
                type: pvc
                mountPath: /gallery
                size: 25Gi
                storageClass: nfs-csi
        mariadb:
            enabled: true
            mariadbUsername: piwigo
            mariadbDatabase: piwigo
            mariadbRootPassword: ENC[AES256_GCM,data:97mQjrzr5Gto+ZTZlAx/i34dY1yJ4pejznpJK+XdYdp4exMhxBYZhDqiX8dLicRyBvKfrFLpfE9QyKIPSOUC9A==,iv:DcIu7CaqGTg9b+8CVBB5m3RMv6yHcuNP3MHec+Umiv4=,tag:Ig3lRokPtDQ+k4kgm1AO+w==,type:str]
            mariadbPassword: ENC[AES256_GCM,data:Kp0nWLw8hTSOjTtb7GcO+quZMD+APoBeGsdE4RjrBE9c+ux/8hmgx50QK3crnxyz9U114XRz/4FXkTmztygOEg==,iv:sLfDK15ahyGO73TIQ65wDiyiM5hMRT0RKp7aHCGE48s=,tag:tYKZi54m9blEeApoRLYLGw==,type:str]
        ingress:
            main:
                enabled: true
                hosts:
                    - host: piwigo.nordgedanken.dev
                      paths:
                        - path: /
                          pathType: Prefix
                tls:
                    - secretName: piwigo.nordgedanken.dev-tls
                      hosts:
                        - piwigo.nordgedanken.dev
                integrations:
                    certManager:
                        enabled: true
                        certificateIssuer: letsencrypt-http
                    traefik:
                        enabled: false
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1esjyg2qfy49awv0ptkzvpk425adczjr38m37w2mmcahzc4p8n54sll2nzh
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBUekxOZTloeG9yUDFGSG5M
            THN6aGNpc2txei8reVhzNGdxUjEzY2RVUDF3CnBqdEw2VnNYRHR1Rjd1R1lqQ3hx
            WndGWDh6OUluVmIxWDJFb1ZYZ2lZeE0KLS0tIEVGZnpwRmtBdE51VHoxTG80UGIz
            blEraWQyQTVuTzI1V3g2b2hxRHB6WkkK++m3mqNa+WbJiy4Zw4m5omDkz2e6k00d
            Y6QnatlP/WB6ypcjTH/n4Ch0i9RMVAJv/qIIIogNyFqUtdxSc7FX9Q==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2023-12-31T00:25:25Z"
    mac: ENC[AES256_GCM,data:xlAoCcxDxwaGlnYY3oeovIaLOZOCexr2aYCz7J8go5RpOUr409CRc4QF146/e3cYTxH5Cs4oQRPW8KZxNlXLvMIaUUc/DhPkeIs6ZLnDfHE+dV+pR0P2rAsV0vBUSKQoy+Xb6/Or265z4ADLLL6p1n2h1GryzY0EiDi4fjESHjk=,iv:n4DecRc5XEfSC1ubcjooDiud9I7QjgnzeqzZuSHo7VI=,tag:hGW2Vu4aPf1LfI/97M5qGw==,type:str]
    pgp: []
    encrypted_regex: ^(admin_pass|admin_email|mariadbPassword|mariadbRootPassword|privateKey|data|stringData|PASSWD|password|pass|postgresPassword|postgresqlPassword|redminePassword|smtpPassword|registration_shared_secret|shared_secret|secret)$
    version: 3.8.1
