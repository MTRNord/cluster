apiVersion: helm.toolkit.fluxcd.io/v2beta2
kind: HelmRelease
metadata:
    name: vm
    namespace: monitoring
spec:
    interval: 5m
    chart:
        spec:
            version: 0.20.1
            chart: victoria-metrics-k8s-stack
            sourceRef:
                kind: HelmRepository
                name: vm
            interval: 60m
    install:
        crds: CreateReplace
    upgrade:
        crds: CreateReplace
        # Force recreation due to Helm not properly patching Deployment with e.g. added port,
        # causing spurious drift detection
        force: true
    # https://github.com/prometheus-community/helm-charts/blob/main/charts/kube-prometheus-stack/values.yaml
    values:
        vmsingle:
            spec:
                extraArgs:
                    search.maxSeries: "3000000"
        victoria-metrics-operator:
            operator:
                disable_prometheus_converter: false
        grafana:
            adminPassword: ENC[AES256_GCM,data:z8W/XnauyRbh5cTOphaFzwD0hrvX8F7Nugaf3VldXFpOhkwIkyEaviwFp88KQopJJProchd41/3UV7aHgjjFuA==,iv:tV6Af0r4PG21uCEtpyPKmwMUduu5r7WA2meFWtPWMk0=,tag:xuyiWl3mHd+DE8dx7rMerw==,type:str]
            alerting:
                rules.yaml:
                    apiVersion: 1
                    groups:
                        - orgId: 1
                          name: Draupnir4All
                          folder: Matrix
                          interval: 1m
                          rules:
                            - uid: fdz35yf78i8lcd
                              title: Draupnir4All Synapse online
                              condition: B
                              data:
                                - refId: ENC[AES256_GCM,data:Nw==,iv:8PyKv/Kmt8wzqD8AU9v/yOd5DQXC8G06DHqqZ47OVgU=,tag:jjLXR2HireMd5H4ULrMOkA==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:OJZ6,iv:G2qLtnlsKEmIw7sWslrxoHYu/gPc7BIHKkRHFvKewys=,tag:i4rUbJCsh+mOEPnHKhDqFg==,type:int]
                                    to: ENC[AES256_GCM,data:mQ==,iv:u6PBIcQjcClshXO1IQmUaqN6cdEhfQYzi4R7xV3RzeI=,tag:161gqLgFVLipWbAlKItjuQ==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:Tm0/p0m0jRC1ZA==,iv:fCrLhwtbXZPchS3QRvdDPaKv7SFixIyG1VI4uEMuMWg=,tag:XucnraZ3CXUWYEz3VyAaKg==,type:str]
                                  model:
                                    editorMode: ENC[AES256_GCM,data:ZffUpw==,iv:gKgszul5N4wcA1V17SSx7hZWgXJqfr5FkU5c6kDkiqI=,tag:zHpV8ScYJ7JnG4o6egdDtg==,type:str]
                                    expr: ENC[AES256_GCM,data:acHwicZgB1bRSIwNcpV8SmXljpVQ58vVzeZ+bAl9SOwKC/Pyd6rv7gXggM4vZgauzO1MGF+k3JgN01A/enesR2vpjFUNpmaI+/Sm8ponSWwcDA3XuLf22jorLloiU9/eGlADDZTsPadjqdM2ONpqTtBffMQL6BaTdIVvTr59JCQ9JPkOb8CUP5Y4vFKotfsMka4sw7IDPrhjyudV/kPZLwaPcYIWqq0zeEq1S6X8ojRB4LCs6/LtyBvlZLcNgw/kPrpuphFz+tt1aXLif+cw,iv:3Kuq4TSHtDU1xeex72z6gthNG/MPUUq60rbHPtUxDto=,tag:t9KeaM9C2iVjKWzh94KuUQ==,type:str]
                                    instant: ENC[AES256_GCM,data:35xMaQ==,iv:n9AXQBkrZWRfr2aoi4Xf+tafpT1/8XKM/bhFluwaDGI=,tag:buFiGSjkjE2MSKMcbnnf8A==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:DVhcjg==,iv:LkXUFJ1rcE3VESDlnD/6Cq7PS6QEXw1PFNX0m7gCf3c=,tag:1MsJXaoZXcosY6wr+IGO3A==,type:int]
                                    legendFormat: ENC[AES256_GCM,data:RIKtT+TL,iv:/iDLpWkZofUZAcgdHq5vlj4Qtq3OMyAs846ab64HQ7k=,tag:k+cpJEKoUDiudaNYuTWSkQ==,type:str]
                                    maxDataPoints: ENC[AES256_GCM,data:kSWcpb8=,iv:lMVponSPOVl/1QgfwfZSr2nv1Ml1VkBA2ETjajjge6Y=,tag:9SjCOCpSGznWkS7mC9+kVw==,type:int]
                                    range: ENC[AES256_GCM,data:euNsne8=,iv:wQcd6MeOKHe57EaE9opV6jlkPcJu8D7uQL7lyRYIDUY=,tag:gRgk/ytDue/7sx0Jv2Op9g==,type:bool]
                                    refId: ENC[AES256_GCM,data:Tg==,iv:uEzrDo+QRIXICxgU0zoz10A6NnED0cuSKgYgsSGydJo=,tag:xxt2kH9ASWAP4ZroHeZ3hg==,type:str]
                                - refId: ENC[AES256_GCM,data:2g==,iv:jnFe49p0DPNQ0SPWuMln4tgQRa0ISq24S3z24RHWHjs=,tag:ac26ob3YqrTviM3uiYd0Yw==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:kXe+,iv:HLAIIu4E7/pMEgQ8DhGmq+HRCNFEy8JChsajcpl2bBU=,tag:5z5VAUOU/LJhNIoMhN0ECA==,type:int]
                                    to: ENC[AES256_GCM,data:7w==,iv:PnE6Z3fqMM2MCehyyxA1jE6o58JxC89CDPDcoflWa3o=,tag:cPuWLEPVmKiafkYityvEQA==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:WodRV0y941Y=,iv:RsdyKnopPHzE6xc9S972EOETrSY9C+dOEswafo8mD8c=,tag:uNFH9QF++anGbGoexo28fA==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:LA==,iv:6W+xv7/41nCwfo4RyQIiJ95rOZ7GMypBP0yz5s+xWFg=,tag:PdoZDos30R9RG6Ayn4zwXw==,type:int]
                                            type: ENC[AES256_GCM,data:gDs=,iv:W7CUAluyAhKMC7N5xUF7D/eypls7ZM98HULp019q220=,tag:CJqSuaU23RcJDEqYfSergg==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:Sxew,iv:WBxdM9lbZ8J5pGQTfYIMB3OphKmiSUJT/SEMcQ8aH3s=,tag:tp0SHK8ZL1a5mSRCWm7gJg==,type:str]
                                          query:
                                            params:
                                                - ENC[AES256_GCM,data:sw==,iv:OzFsUXDQIT+U89X+Db76pk9dwZmrmaQaPOAdc8vPDd4=,tag:VhLZ/QWZGVHkcrV4c2VQew==,type:str]
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:r2K3RQ==,iv:k7YWdv/9ZJHNY4jr0NqwHFtSZW4foWu09wgVOOObHbI=,tag:rJPISpxPE4yjnMOECl04IQ==,type:str]
                                          type: ENC[AES256_GCM,data:u0TdyNU=,iv:1Oy6eBmIhuTvBpF4+e83wZ2YI6WeYk2+oE8+VskvZv4=,tag:Mysqm0vx38W2Ahcx+3+MlA==,type:str]
                                    datasource:
                                        type: ENC[AES256_GCM,data:+iT5eyL8X1E=,iv:zHOoxKMw1xgzntDAmpkieAvqR8sXEzaeDWL67r9H6Jk=,tag:SaCNLjt8N25ov9md0SOESQ==,type:str]
                                        uid: ENC[AES256_GCM,data:JziA9bZzBiM=,iv:TldpXhGLeQ0QeOybIc41t3I2Dovv7rMvSMJM4Z7b4Yc=,tag:MIRiMPOB3W2EM1UezFbgyg==,type:str]
                                    expression: ENC[AES256_GCM,data:fQ==,iv:hD4phPxeeRBpPfLslak8Ckux7OHLGFzZ8Thz3tN82UE=,tag:RbJeznl+mcWPFh9yUVGsnA==,type:str]
                                    intervalMs: ENC[AES256_GCM,data:8a9GoA==,iv:py5mrmLgNYRqwCb3bUWP01lutfwo/0rOe6P6e9Ww6Ls=,tag:L+7WqcmQ/Pn24F4W06pkeQ==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:uhXG9Zo=,iv:JrzupfeQB1Ysol+OSLA+WA8sQl7Rz4qHOvgLmI3t4TI=,tag:vSq0Se3m9aOoynWD5p7iTQ==,type:int]
                                    refId: ENC[AES256_GCM,data:cA==,iv:emWExCXRyHh28QbxBInAnR3gG+H/CUswaI3TxliA9ls=,tag:UdeCD+/57AySL37YOnmO0g==,type:str]
                                    type: ENC[AES256_GCM,data:kIKNwGpb3J8X,iv:V1RGGPzVLg/C+Uzs8vDHzUUZFkuxL0cARGKIltifLf4=,tag:f8fanxPEZYgI9HDigorpTw==,type:str]
                              noDataState: NoData
                              execErrState: Error
                              for: 2m
                              annotations: {}
                              labels:
                                service_id: draupnir4all
                              isPaused: false
                        - orgId: 1
                          name: Kube-system
                          folder: Cluster
                          interval: 1m
                          rules:
                            - uid: d2b94d3a-2483-4be4-bf2a-2fd9f9fac406
                              title: Coredns Failure
                              condition: Thresh
                              isPaused: true
                              data:
                                - refId: ENC[AES256_GCM,data:EZkqR6o=,iv:7bugzNsitLVVzEWowJowH9/IisU70uCvhkNDv6avNJE=,tag:/tHEMRJ1tGRSTyqXJRJtww==,type:str]
                                  queryType: ENC[AES256_GCM,data:EhWw5Mc=,iv:0x8nirainu76kyqXKDBzps7FWbM7BjXfirYTpcDBFdY=,tag:/QUeDPKazmyMcomiwA8a3A==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:8Y7O,iv:DPazNgu4v+ZTv1MVFnvItfQrnbHSc8Dr8vRnhYUy288=,tag:ZraV1NJrj4iaNUT0SRkH1w==,type:int]
                                    to: ENC[AES256_GCM,data:GQ==,iv:7XZbJm4cgdtY6o3UKZ+gj0iQm61yENE3A+F0e46Deeg=,tag:7o4SK2f+zfqqkrsdudESgg==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:bHmKyg==,iv:nIqfIdzPzIQePUVOpn9nadyUiM7QuGvTJ3hOnuIr1As=,tag:bWxBHJkUJPX9fumHnZOY3Q==,type:str]
                                  model:
                                    datasource:
                                        type: ENC[AES256_GCM,data:ZLpdQg==,iv:oCNIe0NVj7OMPXWSdar59J4dX8CHe6dmgaTGFaK95Ug=,tag:MtLd+QFIQYhreaWUkPd1wQ==,type:str]
                                        uid: ENC[AES256_GCM,data:BQi9jw==,iv:TQ6e/jlE8Wp7A3GZODf2X6H2VbC29mezetE5Ai/elCw=,tag:ej5FrTB/8A2TgBbF7jqMbg==,type:str]
                                    editorMode: ENC[AES256_GCM,data:Uo7+QfIEmg==,iv:jqP8EXj0ttbT0CkIN+No5Z3f/GKP2PKBKkzvcpIthRM=,tag:jxgrQECc6soFgEAZc29SOg==,type:str]
                                    expr: ENC[AES256_GCM,data:cLs5Iacc1oq0el+dQUZTz82KM52LjgsUFB6EIfEyDZSE+OLacQTpXdNsm/PfejRsT6OkNDXZVkIuRE/rtUGsxoM1pGJU,iv:BgsSGyL9uIMowQB9f0SNfjSaTYcC/J7hYNAgWecUqv4=,tag:jR0yxNnuwGrbyZViNTPhBQ==,type:str]
                                    hide: ENC[AES256_GCM,data:AEMR1e8=,iv:qUCPJ+VDa08V9ecqW/OpY5lwHBtcdKyZQ/1N0i4Cs7Q=,tag:MvrkNr7+FJvUB7p59JtkeQ==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:z6waFw==,iv:facTWKw/CD1ucoYQHrV+0S2XCaHUVn5UBjGpmXkfXR4=,tag:UhjlDsWAF+YzHfjKLbyjAw==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:183d7Lo=,iv:CLDUPj8ugCl17/SvuxY394kjROnMrShK0TtGT465Qdk=,tag:XuIZ+aE7FNQb+qd7wq0evQ==,type:int]
                                    queryType: ENC[AES256_GCM,data:VH3SOAQ=,iv:B0+iec3kEeAJAUYwj2GHjo6c/9D0MVNqKS/96XXQX4U=,tag:g2ay57VETIL4UNP2Ki0wRw==,type:str]
                                    range: ENC[AES256_GCM,data:6p+Sbg==,iv:OMAk0UO5EIZVPSf2HyxUupURYmPd4ZLNAzTrn3lEyIs=,tag:YzbxwaJrLuauSwAncco1TQ==,type:bool]
                                    refId: ENC[AES256_GCM,data:FpXhNlk=,iv:LaiUAtVtzAL1n3ss9HCrTwPJvVEVTPTrxMpSysmS44o=,tag:9XP8+Sp9nZRsUUJJS3miRQ==,type:str]
                                - refId: ENC[AES256_GCM,data:4bk+RE3f,iv:nFG0/7CvQgnpkgGKHrEc0aSNzddOJO+6N1kVRl0XeVI=,tag:0bs7b/kD4rMk9UzIyyyozg==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:oQqp,iv:ndyluRGSLvqgMkyLrVx06SrAv6AhvpZofrcGEtyv4q8=,tag:b9RJamXQPMkvF1Ef18FWTA==,type:int]
                                    to: ENC[AES256_GCM,data:Cw==,iv:cZ43+IckLOYODGXekbLUzUjbANYntUCqXEAJ+27BAZ8=,tag:N60qu4bxPZn6b2bRNhWrvQ==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:3lY8eV2CvsQ=,iv:uQOb1rBiSRADEZgvnZwv9s0NkH6PbUVV1UnW5b2uhFk=,tag:hWZMRTMRqVAHNRdamSAcpQ==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:zg==,iv:Xb1puTJkLm3Xg2GnHX195X8P7r0/HZCspBlfKsTX1zg=,tag:HujfvFeStsaYSHBms88qqg==,type:int]
                                            type: ENC[AES256_GCM,data:Kjg=,iv:jnGw3CZALGLPRLbL5WH3W9kPcxWmzZnBT6ZVnwwCVM4=,tag:4sPmMHHf8fjAKaW7CsJN5w==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:yOvG,iv:NWbt0GetvkmjUbmlGIwuuFifUFeBpMEBsiuivPEP7gk=,tag:OZy8KR1UC/KqbePQmNFHcA==,type:str]
                                          query:
                                            params:
                                                - ENC[AES256_GCM,data:5w==,iv:PIuUjvFxRZtAdMg9w/gcj5LyONQSZ4Wy+Lsa1BtJXTc=,tag:TwVVL8loOF/exhMEATYC1A==,type:str]
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:YY8fEQ==,iv:dioGSEJZXRkwCtxGEeliQ0FvsTdJZHu33ZgyAciUAFE=,tag:yiwnkbLrS2qOo4pUer2whg==,type:str]
                                          type: ENC[AES256_GCM,data:u58ujqo=,iv:Ky5GeX8sLFbROAB5cVueH/ZrKZFHqWyX8UarpHNSvR4=,tag:0yV2OkyLswmwEa8iifvFWA==,type:str]
                                    datasource:
                                        type: ENC[AES256_GCM,data:t5s/YZY9jQ4=,iv:9L55V6KvxioSSp47nuyhxRcshDehlhvV9+QnI+OjwBw=,tag:TPt+NbMUKRixyd0gei242Q==,type:str]
                                        uid: ENC[AES256_GCM,data:ykxC6T7ykk8=,iv:c6l9nIFo3/m6DLBnzC5ZOkr19b+RUvsgKzafhjFKm7Y=,tag:FRtpgvAeVFm8vO9F72Bf5g==,type:str]
                                    expression: ENC[AES256_GCM,data:ww==,iv:Y1mgRedWpmaBRmyhhpie4qPGEx41ox+MaiVNP9VMfcw=,tag:X8/OgBf5PF+oLLu5Jt7UJA==,type:str]
                                    hide: ENC[AES256_GCM,data:SuEMHKI=,iv:YYJ3giGzmuLTCtmUuRnM04VCc76OD5a9VEG8eVg1jhI=,tag:52c0FWMkLUo/hYpSU7sW9A==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:X5j3xw==,iv:ZO+oba4/mmNVWPA3LUHtPYdtGVf0q9/H1ExPqD/u3u8=,tag:iVJVmytsyNS2RUPXlWxz2g==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:xJkCOZw=,iv:ATdQ3xsO5qX6JT33pqYYtuXzbVOyPAJ8NCvNvKAELt8=,tag:tvIJ3Vjgff+65UIs/ykNbw==,type:int]
                                    refId: ENC[AES256_GCM,data:BVrsfq81,iv:PvZVYvs571jagi1ytcKZJEa1k/pnJ1InsNr+Mh6ecBU=,tag:/w8vVufcRGheErbsv0uIpQ==,type:str]
                                    type: ENC[AES256_GCM,data:Hknh6HFNmswp,iv:2CrbLeRKC33+o4jwiWqxDLE39L9Z32ylTDQ75jxCqeY=,tag:1oi6uKa4NB15T1guQIt1tA==,type:str]
                                - refId: ENC[AES256_GCM,data:Iw==,iv:Zb4zpYaiPb6/o8GJpvxzA8hQAO1fMdJfPp00FHjQTis=,tag:KpkZAK8TNB8OJS/W6TnmBA==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:E24z,iv:g666XFjeGLswbPe6f2tuupzzczGmhflLzMLnLuqHWgo=,tag:2wZuNGQdB4ZsRxdfHTC/Gg==,type:int]
                                    to: ENC[AES256_GCM,data:ww==,iv:pk9tze0bCpItrMZu71rtbA0NmZmt8cOiAbPIRTvPEnc=,tag:HsPyJThhTySGo5NemJ09tQ==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:u+QTIH+OIBc=,iv:46+gm7OBgHh27x/Khoqlk5MNCAnoZnarV8yb9HvimyU=,tag:KNnLgKusP9BMEpp9FZU4YA==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:kQ==,iv:ZdQJvR1J6BaMl7XMUulTGxcHbkxWwOTPyIyk0+sLL+E=,tag:EJP+zh94JJ+SNQpCvu8NxQ==,type:int]
                                                - ENC[AES256_GCM,data:8Q==,iv:J97qFlBbDJvz3dXGTIW9LEntK0MHov3WTvVbIl3ceV4=,tag:KiUj4zFDG1AVZvmAduSgtQ==,type:int]
                                            type: ENC[AES256_GCM,data:gbU=,iv:jXETXYXnffp0vjXhBIjgP5darED5VDlYds/72pqk0gc=,tag:5Wb0U0ShT4pRMp8vLcBJLA==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:4xdX,iv:eqnGGoZjrUhHcX8/g51+MqWvcb1Sjg6Lb4+vzch4et8=,tag:KwoWzLV24UUViHyKSHEhVg==,type:str]
                                          query:
                                            params: []
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:2KXk,iv:cgoaEDxsOIsWjDE8Lbdk7MDiaaq5lO5wkKhqW1W1EwI=,tag:cV1cQ7QcYiHErCvL4nhADg==,type:str]
                                          type: ENC[AES256_GCM,data:aZZE+uA=,iv:1uZmnKDaNh0AJyDh98qbhE+C7mcgSf3NB4A4RF7MGgY=,tag:zRvojwktzB3TB3MFPS6GUw==,type:str]
                                    datasource:
                                        name: ENC[AES256_GCM,data:QBI8cxEgehX3wA==,iv:2pOnfjl6LQLG9rHCjvDKksUCxhbekYRUGN6R1oItUdU=,tag:FdLntFrZbZiWr9CxwYWnTg==,type:str]
                                        type: ENC[AES256_GCM,data:mZ57VJieVxY=,iv:aUVOqFtBQf6nKwHpySFA4DLUzRW0PqDDZI8XybaCSH8=,tag:JhkaGIpdQexwmqWCuote6A==,type:str]
                                        uid: ENC[AES256_GCM,data:ORibYvjxbjE=,iv:H2T8yp2WnYCSdfQcViBWsCD20iegQeTHvWfRC6ik7Z0=,tag:jhvfL1k/IYRuQUlhINJmZQ==,type:str]
                                    expression: ENC[AES256_GCM,data:h7f/D00=,iv:+XZ2s7RSYF+BTTMTeVql+8NVR9dxA+S+V+cQmjdq9bA=,tag:y89TXXfxxkzMd05FtT1JRw==,type:str]
                                    intervalMs: ENC[AES256_GCM,data:oVR4BA==,iv:zU+03N5zuQG9+zwH6IdwdR6rZ4LUoJaWenwni0/tz3U=,tag:Xoay9kcYG0mwgL4sySNa6Q==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:D3Fx3so=,iv:DQmbX+AR/rS261lgquBHH5rVAHl8ke8wgl2ab6BWXJA=,tag:sWdiLNhpYtUouGqKXveetQ==,type:int]
                                    reducer: ENC[AES256_GCM,data:IZtoIw==,iv:QRoo5UgCBxC9/NULS50kLdkTY+jbdy2jMwvBD9NNKp0=,tag:Tp7KuLtBgOxin1j/uGj60Q==,type:str]
                                    refId: ENC[AES256_GCM,data:vg==,iv:t0Z68QHenkTunNcOAoMM1QmIbr6JgPUocf1vXUp6qRc=,tag:TQGHPfyLnMM/jv2RHPt/kg==,type:str]
                                    settings:
                                        mode: ENC[AES256_GCM,data:hRWnr4UUzHzv,iv:IbuvipFODvDu2WPFZwISvh0TdNXBLIHccMMdBEK1xkA=,tag:GHnvK4aF1kvVAcj7X2XWwg==,type:str]
                                        replaceWithValue: ENC[AES256_GCM,data:8g==,iv:kNQhtBpDVBwg70PYKcsSSYHdRtZdiLDV3O+obu2kSv8=,tag:WSC/AjXW2DEzXeUq1YqYGg==,type:int]
                                    type: ENC[AES256_GCM,data:KmcO7FGd,iv:46bN0VwtvnspuS6lrocNLLAT3iPuQ0cWiFV5wA5H3vY=,tag:wWCGbtARFKcuKJDD6v6E7Q==,type:str]
                              noDataState: OK
                              execErrState: Error
                              for: 2m
                              annotations:
                                summary: High amount of i/o timeouts in coredns
                        - orgId: 1
                          name: Matrix Synapse
                          folder: Matrix
                          interval: 1m
                          rules:
                            - uid: b6db960c-c0bd-4d4f-b0f1-e1f216ec81cc
                              title: DNSQueryRefusedError
                              condition: Thresh
                              isPaused: true
                              data:
                                - refId: ENC[AES256_GCM,data:leDGpXA=,iv:5MYslEeMeQdykb32QRQq1YFjJ/R/9yYfxl0zt3xzWjY=,tag:stDN6bRSBd9+2mBkXhnpUQ==,type:str]
                                  queryType: ENC[AES256_GCM,data:7Svru5c=,iv:WNpqVDO7Tz3Jaycmw6Pe4bztwd5DhFH14qO+BKkhj04=,tag:+Nd4yaVXc0jaQnUM3/IJUA==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:JlIq,iv:jkhrwlMTBxXywMfUkoeSeSorH/3h2DYotpI411pcyX0=,tag:MLwcCtyCn/COdl6eJ12Gbw==,type:int]
                                    to: ENC[AES256_GCM,data:1A==,iv:bSUmCU/CYL7iao4pgw1RH4LVyoLQSAAN7nDDEuUapq4=,tag:EbqSNYgOT3qdHxmKfD1B1A==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:PwCXlg==,iv:tF5wrJwUA6NQRwZI1uDmdg2EM/NgITk0scU0cxxDmQU=,tag:3xKK3MTO3eW/Y4ShK0HozA==,type:str]
                                  model:
                                    datasource:
                                        type: ENC[AES256_GCM,data:ToX6Cg==,iv:Rj0r4H1gANPH3TrR24aSYx1GITArRCcEJ1e1BzUwJm4=,tag:ihIeitKAchatwczEhI3Ipw==,type:str]
                                        uid: ENC[AES256_GCM,data:RsKo3w==,iv:xNEs2KjqTB4HlIK7yUI+f15O3CMf87DDCwEmhT7cyQs=,tag:lggvHQYdQwqZV9cCz3jrbg==,type:str]
                                    editorMode: ENC[AES256_GCM,data:k+0M1AiheQ==,iv:htbUoBDxL9VJGHrPVhzZpiWFnyhxDyLOwqMK0QUzjDU=,tag:Ha3Nkhjn86iZ/sVh0hFrAQ==,type:str]
                                    expr: ENC[AES256_GCM,data:o7dh6Rbd0RwBt5zixUNAcFsQUXW+fRPMx8SR/j6vSWi4uCZ0JBanR4d3I4EVRzaxG0Dz+Wg/AzHH8yJ9kCQXx1OWiUFhrs/3UfW2WMbobr4=,iv:1Wkt/n1GjT4qppjnWv06AeBHItMszAhOK1D/Q+Yjhwc=,tag:2cPYz9B9KhinlKGUvohV5w==,type:str]
                                    hide: ENC[AES256_GCM,data:ff06o+8=,iv:+IGzjNd+adVtyQkTN/c6iLh8irBDfUhAZD+7Kfzj4Aw=,tag:CjMPVBBXAaY0xOuMKcED8Q==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:qsNCzg==,iv:AV68dIl4exDi177wDH7QVwkwmuZ5hcAkSEb3EeuM3HU=,tag:0nofjwsGvz53GA0JyZ916g==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:tYYf3Ps=,iv:JyO+gnsS1PrlrR7ux1G9qbKh0JZ6Xizc3mbDX3j5af8=,tag:PQ7n79/ZnHAnBwuCdBAfMA==,type:int]
                                    queryType: ENC[AES256_GCM,data:lsounDg=,iv:PmzdQfWJQ9NHgUD0AwYKBQSCtxagaF7D8r09zRPgrno=,tag:6tzn7D3NDo4LC0rMJv35Jg==,type:str]
                                    range: ENC[AES256_GCM,data:5ZkSrw==,iv:m53gtK6T0/qND1WovFcAV4TI4tt77MVTo4cpcJbtNNs=,tag:j82TrdrMBK5LuoWmm6U14A==,type:bool]
                                    refId: ENC[AES256_GCM,data:Ys9UJFc=,iv:HXTIOHYa8JSr76nRr0qTIiPemhguB66+S3vBo296SIM=,tag:jKaNJCkFkQZE7Ca+Kyb8FA==,type:str]
                                - refId: ENC[AES256_GCM,data:EQmGIb4+,iv:o5/P0WETsj3vucSViAVHD4mQ2OhdnmzhQvQ8JqSNvdI=,tag:e7ju7OrfksPdgl8E+T2KgQ==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:qpz/,iv:06/L94W+UQmiUaci8GptAEdyHLa//PPtPvdCZ1xGClU=,tag:6G9/+WEkEkN3Pwv28QECCg==,type:int]
                                    to: ENC[AES256_GCM,data:fQ==,iv:XgoGrGjr3yg3OOM0Gl1aDcWe2YN0dPihAKhvafO0yxI=,tag:Yd633r5pcb5+jXvTxhUdJA==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:UeMCULn3SNM=,iv:iur9iEaw7xZvRPA/pltA4vgv5NGRsGt1IhZYK1lF6io=,tag:j2W/wDl+q5mAKy2qKghesg==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:qQ==,iv:u6VsbTYp5DSetP2MBJ3RRyUNZ6Ndw+de25MCZpDl2L4=,tag:PdXVpPGSk+rAeRPneXWBjw==,type:int]
                                            type: ENC[AES256_GCM,data:7+s=,iv:gfJXoyOWH2Ya+jimOCpGO+DRNYAz403TkfTWUz+BYiA=,tag:YLrQ7ZLOg3MGPXqqzc26oQ==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:lmhL,iv:ZjKhjv9KvI5lzMGJRs7lgSLUv3efbtH7MTNJn5Ahya8=,tag:WEvFuFk7a2kSHeMCf4dBIw==,type:str]
                                          query:
                                            params:
                                                - ENC[AES256_GCM,data:UQ==,iv:26OXy1XzZR4FG36+B1W4GB6SA2Bnd8wvXKuFltq8Fog=,tag:zC35UhvDQESv0OYdV3Yq+w==,type:str]
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:KG/28Q==,iv:ZgqOkVV3GX5Xm+I3qIvDnB3y6gv4nMaMOtLj1vz7cMo=,tag:leGBSB2LoBIGcMvhhG+y0g==,type:str]
                                          type: ENC[AES256_GCM,data:BG7neY8=,iv:HfXlLv75E9gWuLM3frZw4TvXxV2Em3auf42F0RiiUGg=,tag:5hbihmcd8Hzs98a2C9Dltg==,type:str]
                                    datasource:
                                        type: ENC[AES256_GCM,data:ReuWgVO9SLA=,iv:CKSs7Igg3u0HjzZ7UrDKZnuZyEfy237pvOKGxNcXz70=,tag:iP+6/QprEFvqZT1PWT3PSw==,type:str]
                                        uid: ENC[AES256_GCM,data:E8HG57PHiK0=,iv:KW07hdgZIzcyzM4jiI00yLGKmkhFjplBxEXtOJGj1Yw=,tag:NmFfw5Dk9MF1pEIw3ZJ9Qg==,type:str]
                                    expression: ENC[AES256_GCM,data:1w==,iv:H3EVqo91/uZn0Yqm508lPkNsNieT3j0y9QOKUDDC6cM=,tag:UtJ8SqxNmSfV0W9vAxQDKw==,type:str]
                                    hide: ENC[AES256_GCM,data:ONmf6jc=,iv:cjvS0OKA/TOGSkaZiUanLBwcdT4h6vyvs993vdhTp2c=,tag:sBjAtWsjp5ymzeHPlswQ9A==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:jb9Uiw==,iv:4dJc30kdTQ8s3J279lp/GDIAmJteQwmyJ/1FNGX9Zf0=,tag:n9czJymXS7VpVaWyQflAbg==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:w89Rmzw=,iv:bZbTnufgfgi70hCMluB4S557e0PKai56+OB9FfWQhVk=,tag:yBvBh5ofg/+6o1g42onDTA==,type:int]
                                    refId: ENC[AES256_GCM,data:k5fEWHf1,iv:1h6/6+Y0lgFUUP56Q2mLn4JihvRYRzyDEqO2WlUuaV0=,tag:daHImkuTncPnULk7ckhlBQ==,type:str]
                                    type: ENC[AES256_GCM,data:bMFSrpj25OKg,iv:7udbZQuQAAGpV5RQkP8FT0psa36iXB8uYJa5u3RU6O0=,tag:786ANenNzpSKlma129eEcQ==,type:str]
                                - refId: ENC[AES256_GCM,data:Xg==,iv:yGMDlYOaArVB8fgHQKPtLvQp259CEamXBRJvBZovGA0=,tag:MNVBqFT8bkUen1fquKuieg==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:wueG,iv:zuWCkLV5jFBujd09R77q8TXsH6HjTCNlRyHdKn3/Ww8=,tag:dfMeGl6Gss+bhxRtoTwzMA==,type:int]
                                    to: ENC[AES256_GCM,data:8w==,iv:QdmAPSSQ7QxISE6w/eAS8HOCDkiocqiY4hkguXKUbkU=,tag:Pd+soCAunXkmZlFE9MEupg==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:CsPNpiFO2/Y=,iv:1ZQq8CqyrApLEXWCspn4F4H2vzwJlf8mZuY0jm/i1uc=,tag:bvzfOn/x2OKhLrQ6oBQWAQ==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:7w==,iv:FGnNsmOL5nKHiXi0+boLofez76dEfP0V87nMsHqqEUs=,tag:FURRbqpxszIuLftiyBrM/Q==,type:int]
                                                - ENC[AES256_GCM,data:zQ==,iv:cBROq6SGr0KZz6+eAnCNJE2C9aQMfd1awuJJJQO7PzE=,tag:fawvFwsQ7vB0zKOtqLEp1Q==,type:int]
                                            type: ENC[AES256_GCM,data:3s0=,iv:JACp4G+CMbMxCE4vwV/Ji3tHmTFIfW26XsGRFF1ooSM=,tag:6+lhnzERc02SppQdab2+1w==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:x176,iv:PmHEXSnbRhNXqCNBeFIU/vSPbfBTFIYgxeT7/hrcmSc=,tag:3E+VIMDOtjKZMwBqkwmnlg==,type:str]
                                          query:
                                            params: []
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:ShHU,iv:JwcZt3VnVHswF8CHQlYCA4x60yfYEK/UrboWyToOi+c=,tag:zE5M7PYysJWxnrF10x7n2Q==,type:str]
                                          type: ENC[AES256_GCM,data:BAyvWc8=,iv:JbrtPV0Zm5/qf8ntK0Qw21r6HYqVSyi2zPsa1Nw5WtU=,tag:Yy+kP8CuSfnAiaVO93VkMA==,type:str]
                                    datasource:
                                        name: ENC[AES256_GCM,data:Q+XhiTP9xdFyzQ==,iv:pD10Iu8gbMq6hv7FUlxWC4oqxH02IcYDl/Rq5NCNk1s=,tag:TxRI8ynBgRYVooMLE566oQ==,type:str]
                                        type: ENC[AES256_GCM,data:tyaIKcLaplo=,iv:HVPhGTUy8QE85tGXI2mR8AXAooetzEsssO2Hcl/fCWc=,tag:DHRhx8j0ZG3fAt1RqPxLPw==,type:str]
                                        uid: ENC[AES256_GCM,data:qYDl4C9MuW4=,iv:5IciNjVI9UpcGfgP3O2EWWkPhLsvGqY2BqJgHsHr/VI=,tag:kDSd451h5MpuiRzPSyfbiQ==,type:str]
                                    expression: ENC[AES256_GCM,data:TWMmbhU=,iv:3xMwc/D+60zbBoPwsuPzIHnCOiPYrjHEVMgpvwF38nQ=,tag:+rqJIQz5cLaHAgBG1Jewxg==,type:str]
                                    intervalMs: ENC[AES256_GCM,data:TN2xbg==,iv:4LvAFVetaszZ3rBnfIsUJ2a9dX0VdaWaxKW5MRDkBwc=,tag:DzDHy8U++mfEP25rwl2pVA==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:4Ii3GRc=,iv:quIgEVrlCcLA+9kiwHOwLgd7NV8lNkwJQ61mGhA1cNg=,tag:89TiFHjdqUCOJQPtm1fImg==,type:int]
                                    reducer: ENC[AES256_GCM,data:fohztw==,iv:4K0KL7DovSReTDIlbD77fbQS9pX/t8Wp9m8zPNvG6yQ=,tag:pwwFDPkgpR1oFo95J1HMdA==,type:str]
                                    refId: ENC[AES256_GCM,data:tg==,iv:E1KlOgjF1wchJCUwxP1/sr1f1aRg8Y43G8AFMRZAQv4=,tag:jG95UsOqG2RhoLcdJTXZaA==,type:str]
                                    settings:
                                        mode: ENC[AES256_GCM,data:cqut59Iv/2l8,iv:tkQm4JBpJ8mw1Ow7fb4UFBOrXr+OawqgV52AUgsryqc=,tag:H9tI7kONZ1ppzj3oy+6sNg==,type:str]
                                        replaceWithValue: ENC[AES256_GCM,data:Xw==,iv:13Xh+J/KyRPmLMFv2KkoWvMcie41acUphRW2fseLkLM=,tag:UPkLKoiyam+6+DAbQQCz9w==,type:int]
                                    type: ENC[AES256_GCM,data:fQu0oF+v,iv:qUeAL6Eu2LXRZUHHbuv0SKbTKmO/YxsrM9k25Sc613U=,tag:5S/cdf3jJHYD+UFAZelh8g==,type:str]
                              noDataState: OK
                              execErrState: Error
                              for: 2m
                              annotations:
                                summary: Matrix Synapse DNS Errors are higher than usual
                            - uid: de30a1da-84da-45f4-a4a5-d641dbd92e6c
                              title: psycopg2.errors.ReadOnlySqlTransaction
                              condition: Thresh
                              isPaused: true
                              data:
                                - refId: ENC[AES256_GCM,data:1jH34g8=,iv:b223UgI1zpZ4SSjBx/BRgNp3Fd8JSCT9rhHXgidcVo4=,tag:WOYDiycjt/6Tm56Kxh1sHw==,type:str]
                                  queryType: ENC[AES256_GCM,data:TYtKaFc=,iv:KGxkywEJHq5KFKf5xJU0ejr7pB5Y6jubCeFYTcMiN9E=,tag:wxa9E8q2p+ON6U3NoJP1Dg==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:m63l,iv:5XO9iWqhq/9PWxAC4M4QucMFX9kvEKgBbsfxeNw2e6A=,tag:baETYdYICShinLbSbr9H2Q==,type:int]
                                    to: ENC[AES256_GCM,data:JA==,iv:IDJErgttBAWVLMgvktaYQRHp2Yf2zQqdu/gGGJpg7tQ=,tag:RLdnZqob/DCyv1tZJWODHw==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:MS51CQ==,iv:+N5ZOo+OOaf8n8EINmAZBYlGBtCjE+kGFreCKKwNR/U=,tag:l9n3Z19GTrAo4LuR2t6T+A==,type:str]
                                  model:
                                    datasource:
                                        type: ENC[AES256_GCM,data:MrKbrQ==,iv:9kwnAGvNKCYNEx2AzEr4/gVhzq25eXgRfOLk0XvTXXQ=,tag:RfrLAAEsMdrkiYaYva/KCw==,type:str]
                                        uid: ENC[AES256_GCM,data:YGbm9w==,iv:qWUrSEhpVIls8auBo00mbBoLk95zkKXcoPwwHX1l9SU=,tag:VdYG2CZqHMGGIghI0opXFA==,type:str]
                                    editorMode: ENC[AES256_GCM,data:VI4Ii1jFrA==,iv:0URF94u2Ejouizi3GYa+S3QqyA3zgTQVphqBBFLyPUc=,tag:Y/fIdArfGCn5X5G5v1Ib5w==,type:str]
                                    expr: ENC[AES256_GCM,data:8eIvxvDnG6Pyt7qP0jSkQdat6zTh0vw2WChYFcPz0b7+zEHlDlzcXGUoO9Fde5Gno/vy2We+XoR6ud1b+FsnywpmQrAzk9eCr6aJHFe3Zr0wDZRwD7vOTR41md/xcviffqs=,iv:mFOIVinOQMaP/ViZluiR5L5N6P/+V2A/Ik9Ov8Lqz0o=,tag:+AgIyayDAw7TH4i/lo06jg==,type:str]
                                    hide: ENC[AES256_GCM,data:vZ7DxK8=,iv:pgNZoq7gqgwcxzKdIpTLesdyNCTqVy12OZXZAXDo12s=,tag:tkLfsbwGdT+L5E4JsbYPgA==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:Nc8ftg==,iv:b48MT1ySNNbLJlpTnKlkBUnf1qmePrE/C0tGJpq+000=,tag:ZGY129O9/3PuDfFeeRgxHA==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:O1BNpqE=,iv:HXMG7+1E+KVn2wNrozdFJqXr1jF42sdmTQwHUAAxmGs=,tag:LFuNwMe6xWdkPWhGAZsgDw==,type:int]
                                    queryType: ENC[AES256_GCM,data:qES9Gkc=,iv:KSpvOp7XgG7bAO9xK0gOvhTHQis6Jkb08eTdyKV4dTw=,tag:1lXbyvGBEsSLOs3j//QE2g==,type:str]
                                    range: ENC[AES256_GCM,data:VgAAVg==,iv:AvQTmnhEN8zFCKb0qj84XMiM4RrBmvEnZaxSJA1kOr8=,tag:Yzsy7UJ4pEpmobduYN3Ppw==,type:bool]
                                    refId: ENC[AES256_GCM,data:3e3ZiOI=,iv:hh7SJcxMke6bGnFUt+rMZM8jRgh2rxcF1DWONr6idv0=,tag:5LWlzgpwCVfGL7vXqSpXbg==,type:str]
                                - refId: ENC[AES256_GCM,data:yC0fOTRX,iv:r0nn2nsRzqDAROb8XeWvQEaXsCeRIfK79z0HMlkTIv8=,tag:zRp+j84GdYFLh7MtytcuDQ==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:qMQK,iv:SR/k1IQp8uGrtZiZx/e6wYSOCV2ZxNqE3UV+ws5cc4M=,tag:naM+0iEW0FNWURqAVfpfWQ==,type:int]
                                    to: ENC[AES256_GCM,data:0A==,iv:RFm2xiQyOy8Jimo9Yi+agLFjBv6eK4gNCzq5d1tOPLI=,tag:4PBvy23MoNkF7MX/Rwo3Hw==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:m+lV5CfvZUM=,iv:PlwO9/1enIBpMT1EBCzuhirA/r9tPHaAjKFK8th2Ws0=,tag:vvEp4KNGlz+1+06oEpU3TA==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:lOBr,iv:wM+X2Cmpeh/2H6ruKI50Fu4hka8/EsCRvhYFfozNcJk=,tag:tO2DtyLn2Azq3MR8LTt40Q==,type:float]
                                            type: ENC[AES256_GCM,data:wmw=,iv:9CI/7RxpXXg6LRsM/BxBFf2Tk7J6gt/oqbU6uHScAp0=,tag:Ry2bB4eq/pXk95pL+BGcGg==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:FY2c,iv:at3ppSLqJPUiUC2iRBsSKNk9JTsklP4Gn3IF76iDSuM=,tag:vCV1FzHh/xws5W51phvZfg==,type:str]
                                          query:
                                            params:
                                                - ENC[AES256_GCM,data:xg==,iv:XX+m6H5P8giZ8Ytmkn35LObHr/zJTroNilysvm+9+Qo=,tag:d5Z/qMAY4J0SwBkotnrzcw==,type:str]
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:WpYcew==,iv:2l4mJ5PyeJEvnH14sLBTLweW9ldqARJqG9WTuPVEfh0=,tag:VyXwysm/HOLpQXEKeKLe2g==,type:str]
                                          type: ENC[AES256_GCM,data:HV4rVxE=,iv:kWtbPnBFjJa4xVlZmy/c3E82k1FFoWyv3mtkkpltQPE=,tag:ZzfeSPCroy0Px5BMqXYe/A==,type:str]
                                    datasource:
                                        type: ENC[AES256_GCM,data:kJIlhK1lXEk=,iv:c1ejfwnI8+46cN7XDKQaaunzSK2RBzv1F0UKD0OQYw4=,tag:xlGMEnSJOXUzSGcI7ONc9A==,type:str]
                                        uid: ENC[AES256_GCM,data:xrzq2C8sIDc=,iv:FPDC1L69A3RwvX8YNGNGc6uvJu70k2RUGvbs6ogN45U=,tag:GHpD+P+h1LC3nIvaiWB+AQ==,type:str]
                                    expression: ENC[AES256_GCM,data:3Q==,iv:s9Wq815w6w3FzMEgfCBzzFfo0NMxE9Dtj509JgAMbmk=,tag:a5wWCS+30ghalCNjMcSvmA==,type:str]
                                    hide: ENC[AES256_GCM,data:6Uq5U+Q=,iv:LYWbFvMpvALHXFu5zrVJ/WFXdJIQydnQBP4N3g5TVGM=,tag:eWwN0kUHNopT1r2hJZ2CMw==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:/UK/hA==,iv:VVzLb6H742EPDXRE+Xi95MUero5xCUgXBPVwnEkuJwY=,tag:4m6CFz0Ifoh64dBjK06r2Q==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:rcWTcaw=,iv:c489EDRKnXg7odrkBofvp+7tH7UauFhYVB+FH+MmkmY=,tag:ezfFbpoUnPVqZ5ZQB+R9ZQ==,type:int]
                                    refId: ENC[AES256_GCM,data:UOzds53j,iv:rIWp4gsjjWLGFjSR+ltDdGls1JllH1pAhkIf4T0gfVk=,tag:AM+6oy9hE5uaNS0C8/MfvA==,type:str]
                                    type: ENC[AES256_GCM,data:BJOxVsvmec11,iv:0P/ZR6h8a7WcbqADSljJguNlXLeABheaS2ISJ3b4H7A=,tag:82SW3KBnliXDgltUNWM2SQ==,type:str]
                                - refId: ENC[AES256_GCM,data:ZA==,iv:ky57NzZgJP+l7Lwtpq39ez9zfdMus+4HoXcpOrhxil0=,tag:R428iQtykbMCSZce5Sj2Bg==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:3sr3,iv:dbMfVTGoUlz3u2Sk1VdAKaxyXgu+ptxznf6dmQ5s+Mg=,tag:OePnGa24ET1VKk8Sej8qZg==,type:int]
                                    to: ENC[AES256_GCM,data:QA==,iv:DzUAL6NLSY3KZiB57SL4j2c54WLInrm3CUOuVqx3emU=,tag:I/s8fSSCJhYFAmFBQZFzcA==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:4kIE7i/s29M=,iv:+mU7/1ujSPmteB/ZLYip/PmzqpWg+VHh0JPHP8tjmEU=,tag:Lu7EvOSnAH9tgJ+BMz+jWQ==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:Ng==,iv:3kEBFS2grpE731bKbgtAtlagP3KC2u9JOCFP6Y51MBQ=,tag:tFJ50taHdHzkJxkzcRpyfQ==,type:int]
                                                - ENC[AES256_GCM,data:aA==,iv:ePOHwiQwrWYfSCU7mCOY5xl3xLHzG0IAcUelbz8oydA=,tag:XEF50rNBfa2GVS/bOkx8Bg==,type:int]
                                            type: ENC[AES256_GCM,data:r3U=,iv:QEGxX4uqWSXsqsLbwcrypHqxjf0pF/DpIhHzyNjxiAk=,tag:5t9/wXMuqr6LAnthFPZSvw==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:5Xjm,iv:ajKWJ3kwLKiwNG5o/UPO1AFI2jXkRJFfzzN8QHcUwJw=,tag:7fqQ4CaVfCUBFEETcm9wtA==,type:str]
                                          query:
                                            params: []
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:fvuJ,iv:Gt0y9J02rG2sR4jAQ8UWie3IbPpZ2VkeU0i69K5rqJs=,tag:NOqN7bd1nP5pAlcLSnoiBg==,type:str]
                                          type: ENC[AES256_GCM,data:wDAxvh8=,iv:jY+KA72NCObSb6T+fdg4HnaXRw/2GpjTPQTPr7yfjRE=,tag:PSCDrRa7uj8ykPYklASEzg==,type:str]
                                    datasource:
                                        name: ENC[AES256_GCM,data:NPayxi3YdcQy9w==,iv:9s3UMwD/0PCajcZeX+pHc9zNoM+BFYAesVvB4zyf3ic=,tag:SkaSjBCAubTNSFZiHxuFSw==,type:str]
                                        type: ENC[AES256_GCM,data:n8xv7t4cA3s=,iv:3X3BDHrbBtbG5Tbu/Atf2LUvKsI/iHylJfBnP/nF7+Y=,tag:Qy1fKd8eix0apRknesRqUQ==,type:str]
                                        uid: ENC[AES256_GCM,data:T9JzmPtZhok=,iv:g0wDs9WZVo6QKeqmHK0hXUqTWtj6tNYY2T0s7ZVLa1I=,tag:h2ulZrKl/soEIDQ4+YADAw==,type:str]
                                    expression: ENC[AES256_GCM,data:TXB67DQ=,iv:1O/ySgroJJNOBf4hOYWi+Fe4hfc8GkJwvlsUzz4hcBI=,tag:06gdlhFzfdTIb8f7iJemsA==,type:str]
                                    intervalMs: ENC[AES256_GCM,data:Z8KTaA==,iv:U8eqwnMqfZTMwaUzb55k3drAYw1FeQwlyK5urfL5TSE=,tag:dnsNNlN7USPjIeuWmGVU+A==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:9+O9K50=,iv:uzIz5LwbCs9JHdIYx3ql2TxQ2P1zQ8fr0A54ocDn8bY=,tag:0yLNOcLm5mYGF0VMJsIaMw==,type:int]
                                    reducer: ENC[AES256_GCM,data:e2h3EQ==,iv:6RxUv2mQ9YguIZhwVhuyxKvtig/Ub9IDiePOZKcKraw=,tag:Sd2mZbIUIO6bWhnGnm+Jsw==,type:str]
                                    refId: ENC[AES256_GCM,data:sw==,iv:5E+nJvnaNugb048Y5s0YkXH3RTrE4IVdcv84Fmy+47I=,tag:4MeiC5bA8K4h/C9bl1ALJw==,type:str]
                                    settings:
                                        mode: ENC[AES256_GCM,data:JGaQ9W2yA7J+,iv:Vcwq194sURTXVqOOL/uu9aau9Z/PEu52UJcJiNSDWjY=,tag:UnEdTek0V4eLjORANSbyGg==,type:str]
                                        replaceWithValue: ENC[AES256_GCM,data:ew==,iv:VaXmSKbonG2wRfBJRpRp0m2Vp0UbPn7uU/SB+iLZAP4=,tag:gi5O3BV4yz7vhReZJz6u1A==,type:int]
                                    type: ENC[AES256_GCM,data:XelJ/mh6,iv:ha1D9VhhD/oZzzJq0q4oybdLdgRDmp+Fq05gNm1AHsE=,tag:LUxCkhsbBg60DIILhdVYZA==,type:str]
                              noDataState: OK
                              execErrState: Error
                              for: 2m
                              annotations:
                                summary: Matrix Database rolled over but synapse crashed
                            - uid: d16dc343-31d9-466a-bdc1-c2466b0bc18f
                              title: Unusual synapse logging
                              condition: Thresh
                              isPaused: true
                              data:
                                - refId: ENC[AES256_GCM,data:Ey2CgzQ=,iv:zgYkWu+UTy0G4vaD/0ckb+l7Yb0DfmsVKZSckew+eW4=,tag:mvQVUKbY46IGRqBIgbs3rQ==,type:str]
                                  queryType: ENC[AES256_GCM,data:g1g5ngc=,iv:D5LR9WgS8daW8BQVR7CTK7BHRRaqLoKd+kxDIsTt6YA=,tag:84O01QspDdb0R/pE7uH8NQ==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:4Zmo,iv:sQsZ+b0iJ40fN0pAmWw5dLHezIgteRB1wGtdmCV1PRw=,tag:bsQhhfyWXi8q9/kF4M3yIQ==,type:int]
                                    to: ENC[AES256_GCM,data:Zg==,iv:9iJRUwcUQIISLBfdAklkz4tIfJ8ok0BqjANus21u+TE=,tag:dXyphJ1rATaCB5r4a/x5zQ==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:rMHjYQ==,iv:Qy3njTy3+qwneScBnWCTIFujiU3rfx837Ix4l2GSEW4=,tag:VFbYt4g9Z7+m2LlDHJd0Sg==,type:str]
                                  model:
                                    datasource:
                                        type: ENC[AES256_GCM,data:kfzmkA==,iv:phe7yIMf3QNPHG5uwAvPK3RX7lf0L7M5kxQSBo2yvp0=,tag:lsH4CO7W8VSF9iyClCX8Yw==,type:str]
                                        uid: ENC[AES256_GCM,data:dbK3rg==,iv:bcOZjWXsIdWWjLL6+0eQOvyugdhu59ayWQEFXa7f9EA=,tag:+C1aBJ5DTfLIBQup7UZnlg==,type:str]
                                    editorMode: ENC[AES256_GCM,data:FMXv1hBWfw==,iv:rPrMMXvuT/bKfN9cXqGOft8ze9gaGtcGMiGGVtDR8gE=,tag:D0G7ZtKiA9gXxfS9hMROTw==,type:str]
                                    expr: ENC[AES256_GCM,data:DsKXDMzpgPQyOU7LUsv30Exm7SF7yblaCn+nK2z11BzB7jqy0HcVYYMaehCbR41EgvRhSBx2SgEZ35wDfBZmOZ6eKrx+ucfOJKhdNaT4zScDEaixzxJUNAC6iNy8xGBtLo41Av3TZMCESE3fj9UDqVdfySO8k4jMB33wbfUC2O2a9tEBgEDReByPz1q3KYnPMh6WAn0kf7xrxcVyfEug9znhsWb+lGybDmCWhCs=,iv:Fb9xgY+qJqMiU2g0sGMzYFTOnNXp8sFFNoG3GY6f8rc=,tag:b4f2NGyijj4zKn9TgQS4Ag==,type:str]
                                    hide: ENC[AES256_GCM,data:kKnx4qU=,iv:YGlRDujljiGvqFT2Yw/ZCb5GoSYlRXM9g3ywqJ4eP5U=,tag:tdLs2AtKb/QfWccoA0p6xw==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:zewrCA==,iv:MaS8pKRcMl/vlhtdgPuPNgu8O1VvgBndmL8kxhgnwBk=,tag:xK1kTOja0NSo82Fs/q7ufg==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:WNQfvWs=,iv:JRiN904zdDXPrItOWLW7DZ+3qI5thgOb3lyG7bJGY/c=,tag:1/sXVMEDw20VF9wtsJ+XLw==,type:int]
                                    queryType: ENC[AES256_GCM,data:idP+7ck=,iv:Gv1TbrQjs1H/QeyVBVpfI5R5CLuU5Rf33DjHitXYCVI=,tag:gr5nU7R1e01llmnjTodJ3A==,type:str]
                                    range: ENC[AES256_GCM,data:FfNC4g==,iv:ca0jhNI6ZBQAmGIXYVg8DKmFuPmCIDEOdt+tW+z9iBo=,tag:19HeeLvqrTdYqyzWxVYwVQ==,type:bool]
                                    refId: ENC[AES256_GCM,data:fHYraeM=,iv:lPHns/rvMGyfbiHz+2pdF8IhcdClWtiXDJHbPMBEDaA=,tag:Eh21GQoXIZbcYv8vodrTPg==,type:str]
                                - refId: ENC[AES256_GCM,data:Q9OxHViE,iv:aYwOrNmsGdxiHpI0mm+b2N1vGdsRSw5WYVUVpgHqxrY=,tag:LnuFg97VL1wEQAx704L5vQ==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:+6zR,iv:NGppvRlzMyMezt9dMoJs2A22QdYXZuE5yuENaEvV4uw=,tag:UJeHi79T8/6cfguPy0xqaw==,type:int]
                                    to: ENC[AES256_GCM,data:IA==,iv:H5qDjhl1AEIaThacqpSUQ3y7IOecWxPpWY3Xi4esEzY=,tag:J7f/F2cMPHD/f0Yc6eRLxw==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:jtZ+W5kSk+g=,iv:lbA4O2FVfLsilRNN8Fyz+gGVSQylaFt44lxk8w04FkI=,tag:M++JPZxBO68tf5dVJ58Xcw==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:vZo=,iv:/i3aaPupPdhSEpxlfPcp4NcTxVLphBUY+A+QPVrDD6c=,tag:48aUYV6smk96M2p5IfSRjQ==,type:int]
                                            type: ENC[AES256_GCM,data:9yI=,iv:rDpM+dvZHdMsTqK+WXLqJ9HH4EjKwJRBSh/bxdgDBtQ=,tag:N8DzYMlEfHE534Nm/GAi6A==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:9s2x,iv:yBSUjCmb7BvRKlLQ0ZKM1PAEHTzop2jRvimKX6i9Nc4=,tag:2aCmJsbhsTkaSzCKky4zIA==,type:str]
                                          query:
                                            params:
                                                - ENC[AES256_GCM,data:Bw==,iv:y2rJpi7J0ah64jzrSgxE0a636BJhvIJMH6mdrBWo9rs=,tag:w06FrtrDF4QQe5NZNHDr1g==,type:str]
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:kOMgVQ==,iv:b59wgOcqWkJZ7qnM8c9/Y0DyQ3/8MNTiI5s+m/hfViQ=,tag:TZHTPMhoeJDptdrleXrBYg==,type:str]
                                          type: ENC[AES256_GCM,data:ltOOcY4=,iv:XZV6vyk+Vz+BvqjV4h+FQDR8ISeXdQFMjbZ2e+x0pEE=,tag:a/MVuVHP/4W6JGWnTq5a/Q==,type:str]
                                    datasource:
                                        type: ENC[AES256_GCM,data:7vTXMQAMl2Y=,iv:VHRzbtATgNGp+K0EbOY81oZU6wlZu57GZDZl7MmVtqs=,tag:0LefKT+MIvmcZf/kQUDE4w==,type:str]
                                        uid: ENC[AES256_GCM,data:g0vkrFuOZQc=,iv:Pj5BYkXkxXJStrM0iMq+uYHoi01yJlaJvuobj1654Kw=,tag:0VH2v52a1VfJUaMcBGj8Og==,type:str]
                                    expression: ENC[AES256_GCM,data:mA==,iv:ucqIopnMe0QObBi8bcXSy2W2Hj//i15DvOr3RMaV0KU=,tag:+QEBb9/xOsO21sfB3Oj05g==,type:str]
                                    hide: ENC[AES256_GCM,data:+6sKOLY=,iv:g4ZxBMpERrfe/+tmesTiuCnJdpVPa0CtGn1FEthLQMQ=,tag:69734amb69o0png7UgyRAA==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:UOOnAw==,iv:AnTmZwQKfEzped8de2MZ8geBXH3I2xtzwir2tVYLLZk=,tag:cSauJV5S9JYavzBe3u3boA==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:7Gzz8i0=,iv:IoU1OkKAgX8tVna7Ey2SSE4d2BjdNKPv1y6ueA0/vsI=,tag:J5ce4Pnb8oeWeGJe5CFKVQ==,type:int]
                                    refId: ENC[AES256_GCM,data:gcE95Pn/,iv:5o9Sir8jKwvd34MyWVJR1LsNxnCo2DtrVegyvoxu0AQ=,tag:wA2cHse/8tHofcMVo+HAfA==,type:str]
                                    type: ENC[AES256_GCM,data:/YMMjuLfudOi,iv:h9w/53kEC8/MQOvbKwrGDgf5k9XruruvvQ4ICcbamQk=,tag:gTlU6CFUHpQChcFzhV4TQg==,type:str]
                                - refId: ENC[AES256_GCM,data:QQ==,iv:wxd4A0mhlKVhD979b+Co6Uta2ePob9Zzp2QTT9gRvIk=,tag:Ua05Ea6oqibJP/i8ZGAnow==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:8EyY,iv:8oAJSqQ5qsPSUZ+B6QC0h6HGyojN4xT9Jre9wwH59Gg=,tag:rEdzp4ez/k1iCF8JXZkA0Q==,type:int]
                                    to: ENC[AES256_GCM,data:XQ==,iv:pYqMUvvzV6uH8PYJ5Me+JxJz2nTB38p207Vmr6V8d6A=,tag:qe94w9tjvEsbKs3eCY6Y5A==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:VLwaD6dqzT0=,iv:P0Vxue2OTb4E6cDibZBPODjhVhHEeTjf5qD8KGn8Iw4=,tag:4Loi1Ryx8hC+E0ClvtbbRQ==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:aw==,iv:cjbZwJ2jlZkUX3RnKhvfiSY882PQa0Sdcau3KfaNrnE=,tag:nRhPzcbmmSyzU22qntsEsA==,type:int]
                                                - ENC[AES256_GCM,data:vQ==,iv:LmzejhAna7EvnyIvx1/qoeH76W0va6GgrEfl86/oSUo=,tag:6CfNknex5HCaincz5MqSIA==,type:int]
                                            type: ENC[AES256_GCM,data:oIY=,iv:LPUXnPbarFDwTg5V76kjkk8V7IneQoJzxmY77wBcdxw=,tag:9cgetXX3FvYqQeVdqce/uQ==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:KN7Z,iv:BwYmaQclXc1V6KNqVb1BrrkzVWv4XAJhgUWh88E3c+E=,tag:6ULlGx9H08WWAUbm6dJMnQ==,type:str]
                                          query:
                                            params: []
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:gdBe,iv:k6cUAXL48ZZf9uqZfD6I/NCf5tjMl9pUUCMhB9Xt2cI=,tag:ffOn7JnQuf5iQSZAjF1t3A==,type:str]
                                          type: ENC[AES256_GCM,data:1oHvij8=,iv:ZRPMpWepcwLtpPr5sUvmoGUqTZg6LDna1MHZLRfAfIQ=,tag:NiZZ6T8dmhl1IgEXWjKyKQ==,type:str]
                                    datasource:
                                        name: ENC[AES256_GCM,data:o/7ANLhpajsvFw==,iv:VnFw1PFleQU8RkN+w5TT8ros84X2MBX66bJm3D3Ugek=,tag:GqUuGcjy7oOwJ7iQodFbUQ==,type:str]
                                        type: ENC[AES256_GCM,data:NCHe1iiZQzU=,iv:wXvMSGt+8RQimMZ8k3fOckiZL73GowCSyV/tGyxH5wY=,tag:JIcVhomY/FX6H7PQ1hzp9w==,type:str]
                                        uid: ENC[AES256_GCM,data:4iETLHrTd0g=,iv:l7wBi1UQxqY3rS+A9D5diqAOa8l4h1q61BN2+0j0XhA=,tag:qT8/GYe/V/cTen8XjPcaQA==,type:str]
                                    expression: ENC[AES256_GCM,data:MeNTP5s=,iv:DlOJpCCCudMFUF3ZcXTvfUXhK1ftc9VMbCdexLJaee8=,tag:/L3x1ROdSkKhAUYfJOMWgw==,type:str]
                                    intervalMs: ENC[AES256_GCM,data:3NJXSQ==,iv:gVHJcO/ipnvNpE9hpWS5JwsPpl4gtPsqX6I1xS4lJgs=,tag:QLf+wgfLZtn4Y2SduRi/EQ==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:dn9dKXw=,iv:hZPLBBd2OQJqT8txrjBdlRItUQWQwZ2Sb+AMHSoT0A0=,tag:qC4VGAUutwFx0eGxTTQIiw==,type:int]
                                    reducer: ENC[AES256_GCM,data:SmGrtg==,iv:QdhepFjmv9IqHYFjvMeEsLodSKTuVzyKcpe2HDhjjE8=,tag:l+Rd7wVpnMO7fZqUFIEbfA==,type:str]
                                    refId: ENC[AES256_GCM,data:Hg==,iv:muocM9bYputPC3nl/odCW7BjBb/foeem+oAIrxQUes4=,tag:sSCanFgGjuOV8+lA9vxYIw==,type:str]
                                    settings:
                                        mode: ENC[AES256_GCM,data:qHrSYnrfmGYu,iv:Y44gHNe6Oqqw3yMwRpn+cEe6eHgX5j1wa63b/+WrqQY=,tag:sgGY1wUf0Wytf+SqOoUf+A==,type:str]
                                        replaceWithValue: ENC[AES256_GCM,data:qg==,iv:d6lh78wr+DEQp6h3qLEEQnSPNKyWzx/7LwBJLey+izs=,tag:IX5ybz4+UCkLfLVCdT2BnA==,type:int]
                                    type: ENC[AES256_GCM,data:x5s4y/L4,iv:kiQKZLRmpsiAyojIJ02gRgGIPEzFbw19MoHZMzk+gNs=,tag:7wpyNAMaotJJWbpk5g6EMA==,type:str]
                              noDataState: OK
                              execErrState: Error
                              for: 2m
                              annotations:
                                summary: Unusual logging for synapse.
                contactpoints.yaml:
                    apiVersion: 1
                    contactPoints:
                        - orgId: 1
                          name: MidnightThoughts Ops
                          receivers:
                            - uid: "1"
                              name: MidnightThoughts Ops
                              type: email
                              sendReminder: true
                              frequency: 1m
                              settings:
                                addresses: ops@nordgedanken.dev;mtrnord@nordgedanken.dev;mtrnord1@gmail.com
                        - orgId: 1
                          name: PagerDuty
                          receivers:
                            - uid: adz30e8814wshd
                              type: pagerduty
                              settings:
                                integrationKey: ENC[AES256_GCM,data:MMDnK8feJhvEkO1NraUjDSf0sw75JeV1vbuzrfPr4Wg=,iv:r35O4QByGWPjLIFbYlK7l4TLONUM+0gpCz1+2n0e4fI=,tag:DFAdzIsQ1cxPkvZu4dk2pw==,type:str]
                              disableResolveMessage: false
                        - orgId: 1
                          name: PagerDuty Draupnir4All
                          receivers:
                            - uid: 3
                              type: pagerduty
                              settings:
                                integrationKey: ENC[AES256_GCM,data:g8PX/saRBGhVlBBV6ZAbmGpsrf90H9AjZgKHDKhgXew=,iv:kk5uNEJhPQsANtG7WX0rDiTcO3JEmW1xM4CZUXv31sY=,tag:7SFAQRQRDEbt576tW1JnCA==,type:str]
                              disableResolveMessage: false
                policies.yaml:
                    apiVersion: 1
                    policies:
                        - orgId: 1
                          receiver: PagerDuty
                          group_by:
                            - grafana_folder
                            - alertname
                          routes:
                            - receiver: MidnightThoughts Ops
                            - receiver: PagerDuty
                              matchers:
                                - service_id != "draupnir4all"
                            - receiver: PagerDuty Draupnir4All
                              matchers:
                                - service_id = "draupnir4all"
            plugins:
                - grafana-piechart-panel
                - grafana-worldmap-panel
                #- https://grafana.com/api/plugins/parseable-parseable-datasource/versions/1.0.2/download;parseable-parseable-datasource
                - isovalent-hubble-datasource
                - isovalent-hubbleprocessancestry-panel
                - chaosmeshorg-datasource
            smtp:
                existingSecret: smtp-auth-secret
            extraSecretMounts:
                - name: auth-generic-oauth-secret-mount
                  secretName: auth-generic-oauth-secret
                  defaultMode: 288
                  mountPath: /etc/secrets/auth_generic_oauth
                  readOnly: true
                  # - name: parseable-secret-mount
                  #   secretName: parseable-secret
                  #   defaultMode: 288
                  #   mountPath: /etc/secrets/parseable
                  #   readOnly: true
            defaultDashboardsTimezone: Europe/Berlin
            dashboardProviders:
                dashboardproviders.yaml:
                    apiVersion: 1
                    providers:
                        - name: default
                          orgId: 1
                          folder: ""
                          type: file
                          disableDeletion: false
                          editable: true
                          options:
                            path: /var/lib/grafana/dashboards/default
                        - name: monitoring
                          orgId: 1
                          folder: Monitoring
                          type: file
                          disableDeletion: true
                          editable: false
                          updateIntervalSeconds: 10
                          allowUiUpdates: false
                          options:
                            path: /var/lib/grafana/dashboards/monitoring
                        - name: zammad
                          orgId: 1
                          folder: Zammad
                          type: file
                          disableDeletion: true
                          editable: false
                          updateIntervalSeconds: 10
                          allowUiUpdates: false
                          options:
                            path: /var/lib/grafana/dashboards/zammad
                        - name: matrix
                          orgId: 1
                          folder: Matrix
                          type: file
                          disableDeletion: true
                          editable: false
                          updateIntervalSeconds: 10
                          allowUiUpdates: false
                          options:
                            path: /var/lib/grafana/dashboards/matrix
                        - name: nats
                          orgId: 1
                          folder: Nats
                          type: file
                          disableDeletion: true
                          editable: false
                          updateIntervalSeconds: 10
                          allowUiUpdates: false
                          options:
                            path: /var/lib/grafana/dashboards/nats
            datasources:
                datasources.yaml:
                    apiVersion: 1
                    datasources:
                        - name: Prometheus
                          type: prometheus
                          uid: prometheus
                          url: http://vmsingle-vm-victoria-metrics-k8s-stack.monitoring.svc:8429/
                          access: proxy
                        # - name: Parseable
                        #   type: parseable-parseable-datasource
                        #   url: http://parseable.parseable.svc.cluster.local
                        #   access: proxy
                        #   isDefault: false
                        #   basicAuth: true
                        #   basicAuthUser: MTRNord
                        #   secureJsonData:
                        #     basicAuthPassword: $__file{/etc/secrets/parseable/password}
                        - name: ChaosMesh
                          type: chaosmeshorg-datasource
                          url: http://chaos-dashboard.chaosmesh.svc.cluster.local:2333
                          access: proxy
                          isDefault: false
                        - name: Tempo
                          type: tempo
                          uid: tempo
                          access: proxy
                          url: http://tempo.monitoring.svc.cluster.local:3100
                          isDefault: false
                          jsonData:
                            httpMethod: GET
                            serviceMap:
                                datasourceUid: prometheus
                            lokiSearch:
                                datasourceUid: loki
                        - name: Hubble
                          type: isovalent-hubble-datasource
                          uid: hubble
                          access: proxy
                          url: http://hubble-relay.kube-system.svc.cluster.local:80
                          isDefault: false
                          jsonData:
                            serviceMap:
                                datasourceUid: prometheus
                            tempoDatasourceUid: tempo
                            prometheusDatasourceUid: prometheus
                        - name: ES - Chat Sessions
                          type: elasticsearch
                          access: proxy
                          url: http://zammad-elasticsearch.zammad.svc.cluster.local:9200
                          isDefault: false
                          uid: zammad-es-chat_sessions
                          jsonData:
                            index: zammad_production_chat_session
                            timeField: created_at
                        - name: ES - CTI Log
                          type: elasticsearch
                          access: proxy
                          url: http://zammad-elasticsearch.zammad.svc.cluster.local:9200
                          isDefault: false
                          uid: zammad-es-cti_log
                          jsonData:
                            index: zammad_production_cti_log
                            timeField: start_at
                        - name: ES - Ticket Articles
                          type: elasticsearch
                          access: proxy
                          url: http://zammad-elasticsearch.zammad.svc.cluster.local:9200
                          isDefault: false
                          uid: zammad-es-ticket_articles
                          jsonData:
                            index: zammad_production_ticket
                            timeField: article.created_at
                        - name: ES - Tickets by closed_at
                          type: elasticsearch
                          access: proxy
                          url: http://zammad-elasticsearch.zammad.svc.cluster.local:9200
                          isDefault: false
                          uid: zammad-es-closed_ticket
                          jsonData:
                            index: zammad_production_ticket
                            timeField: close_at
                        - name: ES - Tickets by created_at
                          type: elasticsearch
                          access: proxy
                          url: http://zammad-elasticsearch.zammad.svc.cluster.local:9200
                          isDefault: false
                          uid: zammad-es-created_ticket
                          jsonData:
                            index: zammad_production_ticket
                            timeField: created_at
                        - name: ES - Tickets by first_response_at
                          type: elasticsearch
                          access: proxy
                          url: http://zammad-elasticsearch.zammad.svc.cluster.local:9200
                          isDefault: false
                          uid: zammad-es-first_response_at
                          jsonData:
                            index: zammad_production_ticket
                            timeField: first_response_at
            dashboards:
                default:
                    nodeexporter:
                        gnetId: 1860
                        revision: 22
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                monitoring:
                    forgejo:
                        gnetId: 17802
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                    flux-cluster:
                        url: https://raw.githubusercontent.com/fluxcd/flux2-monitoring-example/bcae1ef44963da89caabe962a93280c0dfad3381/monitoring/configs/dashboards/cluster.json
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                    flux-control-plane:
                        url: https://raw.githubusercontent.com/fluxcd/flux2-monitoring-example/bcae1ef44963da89caabe962a93280c0dfad3381/monitoring/configs/dashboards/control-plane.json
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                    flux-logs:
                        url: https://raw.githubusercontent.com/fluxcd/flux2-monitoring-example/bcae1ef44963da89caabe962a93280c0dfad3381/monitoring/configs/dashboards/logs.json
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                            - name: DS_LOKI
                              value: loki
                    asterisk:
                        url: https://git.nordgedanken.dev/kubernetes/grafana/raw/branch/main/asterisk.json
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                    traefik:
                        url: https://git.nordgedanken.dev/kubernetes/grafana/raw/branch/main/traefik.json
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                    postgres-dashboard:
                        url: https://raw.githubusercontent.com/prometheus-community/postgres_exporter/master/postgres_mixin/dashboards/postgres-overview.json
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                    minio-dashboard:
                        url: https://raw.githubusercontent.com/minio/minio/master/docs/metrics/prometheus/grafana/minio-dashboard.json
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                              #minio-bucket:
                              #  url: https://raw.githubusercontent.com/minio/minio/master/docs/metrics/prometheus/grafana/minio-bucket.json
                              #minio-replication:
                              #  url: https://raw.githubusercontent.com/minio/minio/master/docs/metrics/prometheus/grafana/minio-replication.json
                zammad:
                    ticket_statistics:
                        gnetId: 14222
                        revision: 2
                        datasource:
                            - name: DS_ES_- TICKETS BY CREATED_AT
                              value: zammad-es-created_ticket
                            - name: DS_ES_- TICKETS BY CLOSED_AT
                              value: zammad-es-closed_ticket
                            - name: DS_ES_- TICKET ARTICLES
                              value: zammad-es-ticket_articles
                            - name: DS_ES_- CHAT SESSIONS
                              value: zammad-es-chat_sessions
                            - name: DS_ES_- CTI LOG
                              value: zammad-es-cti_log
                    chat_sessions_statistics:
                        gnetId: 14224
                        revision: 1
                        datasource:
                            - name: DS_ES_- TICKETS BY CREATED_AT
                              value: zammad-es-created_ticket
                            - name: DS_ES_- TICKETS BY CLOSED_AT
                              value: zammad-es-closed_ticket
                            - name: DS_ES_- TICKET ARTICLES
                              value: zammad-es-ticket_articles
                            - name: DS_ES_- CHAT SESSIONS
                              value: zammad-es-chat_sessions
                            - name: DS_ES_- CTI LOG
                              value: zammad-es-cti_log
                    cti_log_statistics:
                        gnetId: 14223
                        revision: 1
                        datasource:
                            - name: DS_ES_- TICKETS BY CREATED_AT
                              value: zammad-es-created_ticket
                            - name: DS_ES_- TICKETS BY CLOSED_AT
                              value: zammad-es-closed_ticket
                            - name: DS_ES_- TICKET ARTICLES
                              value: zammad-es-ticket_articles
                            - name: DS_ES_- CHAT SESSIONS
                              value: zammad-es-chat_sessions
                            - name: DS_ES_- CTI LOG
                              value: zammad-es-cti_log
                matrix:
                    synapse-dashboard:
                        #url: https://git.nordgedanken.dev/kubernetes/grafana/raw/branch/main/synapse.json
                        url: https://raw.githubusercontent.com/element-hq/synapse/develop/contrib/grafana/synapse.json
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                    draupnir4all:
                        url: https://git.nordgedanken.dev/kubernetes/grafana/raw/branch/main/draupnir4all.json
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                    matrix-media-repo-dashboard:
                        url: https://raw.githubusercontent.com/t2bot/matrix-media-repo/main/docs/grafana.json
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
            ingress:
                enabled: true
                annotations:
                    cert-manager.io/cluster-issuer: letsencrypt-dns
                    external-dns.alpha.kubernetes.io/hostname: grafana.midnightthoughts.space
                hosts:
                    - grafana.midnightthoughts.space
                tls:
                    - secretName: grafana.midnightthoughts.space
                      hosts:
                        - grafana.midnightthoughts.space
            grafana.ini:
                server:
                    root_url: https://grafana.midnightthoughts.space
                smtp:
                    enabled: true
                    host: smtp.fastmail.com:465
                    from_address: ops@nordgedanken.dev
                paths:
                    data: ENC[AES256_GCM,data:ypiWI6u3XtN5U2uxqt8kMVk=,iv:3hFYhe4GjemSFZBOi8uVz0cYrp6O3pZQuiOvxCbGYFY=,tag:Ju0fA0kjGHtuXGnSKfiP9A==,type:str]
                    logs: /var/log/grafana
                    plugins: /var/lib/grafana/plugins
                    provisioning: /etc/grafana/provisioning
                analytics:
                    check_for_updates: true
                log:
                    mode: console
                grafana_net:
                    url: https://grafana.net
                auth:
                    signout_redirect_url: https://auth.midnightthoughts.space/application/o/grafana/end-session/
                    oauth_auto_login: true
                auth.generic_oauth:
                    name: authentik
                    enabled: true
                    client_id: ENC[AES256_GCM,data:ROkpNW0m69yqln8+HWiSnGV+I/VM8b/OqFOs3w6pP8d3cBqnoA/hPJ7Uu8KQ/5kTl1g=,iv:76vHsiLtiRsZ0LwmF+w/Hn7kziFiVxmuYa28kkc35Y0=,tag:y8sNMNUiwlH8yJSZHx3LzQ==,type:str]
                    client_secret: ENC[AES256_GCM,data:7hulmhEfdIqWnunjPzTTG7659bX5dJY1ru/C2bGKPscEYEekHDAAoJs04/6Y59+Y5bh1iIzL,iv:7EpGdHpVJWc35gILZUuGs4LrHXf4swvAaO/o0CrmG+E=,tag:oy/I1vMbuoVcZynMsfS2ow==,type:str]
                    scopes: openid email profile
                    auth_url: https://auth.midnightthoughts.space/application/o/authorize/
                    token_url: https://auth.midnightthoughts.space/application/o/token/
                    api_url: https://auth.midnightthoughts.space/application/o/userinfo/
                    role_attribute_path: contains(groups, 'Grafana Admins') && 'Admin' || contains(groups, 'Grafana Editors') && 'Editor' || 'Viewer'
            imageRenderer:
                enabled: true
        kubeProxy:
            enabled: false
    postRenderers:
        - kustomize:
            patches:
                - target:
                    # Ignore these objects from Flux diff as they are mutated from chart hooks
                    kind: (ValidatingWebhookConfiguration|MutatingWebhookConfiguration)
                    name: kube-prometheus-stack-admission
                  patch: |
                    - op: add
                      path: /metadata/annotations/helm.toolkit.fluxcd.io~1driftDetection
                      value: disabled
                - target:
                    # Ignore these objects from Flux diff as they are mutated at apply time but not at dry-run time
                    kind: PrometheusRule
                  patch: |
                    - op: add
                      path: /metadata/annotations/helm.toolkit.fluxcd.io~1driftDetection
                      value: disabled
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1esjyg2qfy49awv0ptkzvpk425adczjr38m37w2mmcahzc4p8n54sll2nzh
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBpOEIzNmU5TVBZRnZoNmg3
            YXNYZEJWQk8yODBxZlZxNEIxZW1qSERUZmpVCjY2eVhIclZScmdTWVgrTDdmL0Zx
            ZkUrMWdkb2FieHpaZFJiQkxEWjIvU28KLS0tIEpmSGwrdHFOWDUyUGp5V3hZOE9F
            VktMS0wvOWZhU3NWM0haR2taa0xpOUUKjEkPOwmCgvDLOrMLSLPABrGtogU0KBIf
            URYd57Sk/11vq/kebUZsa4lw9YBF3gjhuG85NJU+PPSWTAopU/zMSA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-09-26T18:49:49Z"
    mac: ENC[AES256_GCM,data:QZ6WIdgc3bCjH2nPuTCCzy6fMsniuZFNOCpljM0Z+A6xQ43wgsCIFEldQlYHCcU2pSWEGadp1gEfMXzfL5UNIHlcXfAE7aIMBSB0Z5MZWE7JUNZmY4qqq62FBUJdVA7dwKoHqPqkb/u6/PBnRMnjl4UsbLF0PVcuvp8Js/Fgars=,iv:REU9yTldMCI1COvfZSPNYDLQlmrGHpNyYkDcku6tDu8=,tag:XXRIW2K07D9afcFanBgLkA==,type:str]
    pgp: []
    encrypted_regex: ^(admin_password|extraCommands|key|clickhouseDatabaseURL|databaseURL|client_id|client_secret|secret_key_base|otp_secret|private_key|public_key|primaryKey|deterministicKey|keyDerivationSalt|token|clientId|secretKey|installationId|installationKey|uriOverride|adminToken.value|password.value|sql_password|erlangCookie|AUTHENTICATION_PASSWORD|ROOM_API_SECRET_KEY|adminPassword|configPassword|adminUser|configUser|APP_KEY|api_key|api_secret|keys|livekit_key|livekit_secret|secret_key|admin_pass|admin_email|mariadbPassword|mariadbRootPassword|privateKey|data|stringData|PASSWD|password|pass|postgresPassword|postgresqlPassword|redminePassword|smtpPassword|registration_shared_secret|shared_secret|secret|admin_token|integrationKey|rootPassword)$
    version: 3.8.1
