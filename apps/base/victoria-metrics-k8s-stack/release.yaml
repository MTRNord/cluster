apiVersion: helm.toolkit.fluxcd.io/v2beta2
kind: HelmRelease
metadata:
    name: vm
    namespace: monitoring
spec:
    interval: 5m
    chart:
        spec:
            version: 0.20.1
            chart: victoria-metrics-k8s-stack
            sourceRef:
                kind: HelmRepository
                name: vm
            interval: 60m
    install:
        crds: CreateReplace
    upgrade:
        crds: CreateReplace
        # Force recreation due to Helm not properly patching Deployment with e.g. added port,
        # causing spurious drift detection
        force: true
    # https://github.com/prometheus-community/helm-charts/blob/main/charts/kube-prometheus-stack/values.yaml
    values:
        vmsingle:
            spec:
                extraArgs:
                    search.maxSeries: "3000000"
        victoria-metrics-operator:
            operator:
                disable_prometheus_converter: false
        grafana:
            adminPassword: ENC[AES256_GCM,data:Is42/L3HWQhtt9Ir0YdrqbSf0fKuTeaft2lNiIWRNStJQ+Sw8gti8G2LApr7X6bRpV9cHE+JmVpkozdVHVBu+w==,iv:QRI72rfHo9hAmQe3wNyDH76zO5Ss6OtS3X8BqN+vKgQ=,tag:C8e2gZQHzsZx4IzCfw7DKg==,type:str]
            alerting:
                rules.yaml:
                    apiVersion: 1
                    groups:
                        - orgId: 1
                          name: Draupnir4All
                          folder: Matrix
                          interval: 1m
                          rules:
                            - uid: fdz35yf78i8lcd
                              title: Draupnir4All Synapse online
                              condition: B
                              data:
                                - refId: ENC[AES256_GCM,data:BA==,iv:LNMDc3kaUlOJnuYIqEUfK5KxkEdMeMuaU8z1TCsaF/k=,tag:FmuZxAHH1vfs2eyb9/aFjQ==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:qc79,iv:3BEj+kbZ5oB/kNn+AvaiN8d9b7Ys/K7qi7HLgkr0RC0=,tag:A3F3Pi7kDa5dtESt3FD7Aw==,type:int]
                                    to: ENC[AES256_GCM,data:7g==,iv:yKVZ6EOaf9lnveE7TfVlTACFUSNs8UQT6UDKzHRdB7c=,tag:GahBcZyFBHxY18WNWuoDkQ==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:i7NMqpVP3ZYSYA==,iv:OTA+utQ87Pk8SE3L6mJg81EUMMYek6HicWXh+ZFk4Mg=,tag:2dCZUMipAvLUKte09DRuzw==,type:str]
                                  model:
                                    editorMode: ENC[AES256_GCM,data:IVZlBw==,iv:nRjjSlzeAkcHpGyFWmXBFmFwipDZTEP91N4/tIY4mGU=,tag:Z2fFb1vxF/N6xyXM5tLZIw==,type:str]
                                    expr: ENC[AES256_GCM,data:y0Ze8gJZJbvZZAo4nZZ9rOYc0YF5VUxbiyOaXPUUUNViLBMQjpN4UjeqbM9omIxLNkENEl8qns3CJc+7blj1vb6dPCKkveOc3i7Q1vqD66b/b+r9s46IIJkOjvGIXVM4NUrR3O9EDgW7ufDn9+a86DDPvaFuXcZFFOWzbxaXUVgGEoWbGUYm+h5x4wpuggKpt73+tclKcBaXsjmdjObGymyJqxSKywVVLOLDGzbQYipizcunE/ITomyaFUiLnF+cLI+8ShiL7OrOLQGYCBo=,iv:9D/JoDyP8FABd94NFvldJKx+aqZnjf/uAgkwuMBi5uo=,tag:xwct1hPxXoFcCgv98WoLzQ==,type:str]
                                    instant: ENC[AES256_GCM,data:tEd0qg==,iv:6ncPJmB3wZjdBa0icbBEKovy24LqJjufz3AtBAZEo90=,tag:koYXSlR+D7xkPBq9sx0PPA==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:TWNByw==,iv:gjo5oeQnfxHlL6kADUhGSK26+ErHCWsehI2J0zWDojM=,tag:58lGvdPsfaqgH68+UK1RyQ==,type:int]
                                    legendFormat: ENC[AES256_GCM,data:FjSpNkfK,iv:2jQTNIKcOFUXyvEGTk3IetcOA2Q1PQNIZ8dlr+BoWc0=,tag:omsKGGcF6skLF6JCarUFWA==,type:str]
                                    maxDataPoints: ENC[AES256_GCM,data:ASNJLXc=,iv:dUel4nTRIAx1jhzo89A11cqpn+8da9HcQQxFzsDYlrs=,tag:XK6VsOiY+ZJEafWR7KYQAg==,type:int]
                                    range: ENC[AES256_GCM,data:seR6P6Q=,iv:KRFSu/XcEhM6PO10IDqdkuV433PDudlN12bgu6DuGus=,tag:J95nHDKTY4qQsZn95VYcHw==,type:bool]
                                    refId: ENC[AES256_GCM,data:Vw==,iv:KGk5Q6i3DcsCWP6qXb3pQ0jeViOiIdHlQjS2UzZvdp8=,tag:ZaV0PZVF5ORWcEazAx+BSw==,type:str]
                                - refId: ENC[AES256_GCM,data:hA==,iv:A7qW6k8Am+IjRaHfN+x0RUSsD4cKiuy6dfwYGbkxGzQ=,tag:JeFnWHE4Uok/Kc0I4olXbg==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:N6Ti,iv:/wwMBcxJaaUKfuRocHFKDNcyD7VipU1CHlBXoU5zyVs=,tag:ZtVGI68tHB7oYfKxvZcFkg==,type:int]
                                    to: ENC[AES256_GCM,data:RQ==,iv:HdkN0lo6hxQL2X8KcAgXZvvIz2BI9sPOkGTdRGF15PA=,tag:dm+rBALqiR6J+FEraK5ObQ==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:Spm4UC847k4=,iv:Uapq6SDwfToPB8BM2ADvQ8IUaBgD+wEvKH1hbE913UE=,tag:/X0QoIdZuOwM+DyFE3Z2xQ==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:Eg==,iv:sLHFAezOIhMaPxtMUJvK3/JWV/pQ+XEn+UGBqPONQC4=,tag:N/8RqU3uqY6MBj2lu1fOuw==,type:int]
                                            type: ENC[AES256_GCM,data:xIk=,iv:WtY2qhCuBeTTh7VTcKWBYeNFhEMaubJGDhUQIn6DvTY=,tag:rRWhZ+i9nsPqlZ2SmJEwOQ==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:TOLK,iv:aLN9Qil75OsVV8Mk1pfICV1Sz3oeyDAWlRLJUDZueoI=,tag:W4FfoO6ufprWHGCy9wCSSQ==,type:str]
                                          query:
                                            params:
                                                - ENC[AES256_GCM,data:IQ==,iv:NMV3NAYsE6iM/zy2yjziI0ukrFHesk96xuykgaZSfyk=,tag:LGgbQ4/HjGUAaRFeepU+Fw==,type:str]
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:BdghHw==,iv:mlnC2mFw3HEk0E/EST7hQpLOSizxU3V11iOOE4NQ3Tw=,tag:M/m0Bl4akzo58yXCRXqAJQ==,type:str]
                                          type: ENC[AES256_GCM,data:14e7whs=,iv:vKuvojImEhGb6S6S5MtSbREBpCQ/a62sJzXBpGzpsNA=,tag:kpCX/A7i7Kc2+Z8cxdQydQ==,type:str]
                                    datasource:
                                        type: ENC[AES256_GCM,data:H921IlGOdzw=,iv:gO0YjuqayP5b1Z57RxxpnnvruOUQiX4NRYnq/+bL3Hc=,tag:iQJNsKvbW9FVgCoTyVaPMw==,type:str]
                                        uid: ENC[AES256_GCM,data:LVoq9GIqaGk=,iv:F0YhQ1AZeU83n0Am8CP+4dQoF1zIol9ghNbo9NfZGpo=,tag:ldZ8PSf3bOlumjwjYBGcsA==,type:str]
                                    expression: ENC[AES256_GCM,data:dQ==,iv:VQskx4NsNT2FiL1ng7t4IRRPbRFA0ICrDgacoDE/Yg8=,tag:NzopAgjYK5+EGTkypF+J1w==,type:str]
                                    intervalMs: ENC[AES256_GCM,data:m0gJZQ==,iv:0FgI6SJMCsca92ovsGqiGcGxv6Bd48j7U9hYFn3gjXk=,tag:fC8MMk25H6a9LpGLKq1uWg==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:XCcEdDo=,iv:Gj4RQ++2zO8BxtpXoL9J/o3Xc4PpLIWvLT5bLwsBLBY=,tag:t4UaBiHXtWaGiti6Xf/buw==,type:int]
                                    refId: ENC[AES256_GCM,data:2Q==,iv:5NLWF+ji4LponIPL9+YSe11jq7kGT536C7+AM2AzfvM=,tag:oW+AxBFSMKUR8xr6xatMhQ==,type:str]
                                    type: ENC[AES256_GCM,data:1M4hVMWmKcO1,iv:S0ueJZZqxZ/N475yyV5g66Gz5sAwP1suiGwPkuDSzCk=,tag:53NIMngD+tB6m5TCsWy6Sg==,type:str]
                              noDataState: NoData
                              execErrState: Error
                              for: 5m
                              annotations: {}
                              labels:
                                service_id: draupnir4all
                              isPaused: false
                        - orgId: 1
                          name: Kube-system
                          folder: Cluster
                          interval: 1m
                          rules:
                            - uid: d2b94d3a-2483-4be4-bf2a-2fd9f9fac406
                              title: Coredns Failure
                              condition: Thresh
                              isPaused: true
                              data:
                                - refId: ENC[AES256_GCM,data:7FXNeF0=,iv:IOJxLe/nUYm8jVNyrjSS8XG/ZPcnaFCOEn7Tai89WhQ=,tag:h/ZYcqfe5WUUa26xkoxufQ==,type:str]
                                  queryType: ENC[AES256_GCM,data:cW9+s7c=,iv:qSAs2/qIOn3FpA/EKXc7Sb5YbtgxcAsxTwLDZarTvGs=,tag:776/dKfmLwm5SW/dMkOS2g==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:Gb9w,iv:6u0Zt653yO49EKr1ka2R0sA5QZuKjt7X44FUctxLHpQ=,tag:lzZUbYtdLf2ecrICtmwSEQ==,type:int]
                                    to: ENC[AES256_GCM,data:Rg==,iv:R1/s+kI4mRmQxUsnA1x9JhcV4+mt9skhCo7oh5pu3Jo=,tag:Yo+kbYzDccbRRQKAezZ5kA==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:LEzD0Q==,iv:AvrkhKK13WfidFVfYR3u7e6E5h83raRpChRUkBdLPDE=,tag:foBqkS/zvnIGfxSeGGBjDw==,type:str]
                                  model:
                                    datasource:
                                        type: ENC[AES256_GCM,data:6VsqtA==,iv:Vxr8JnwkqVZ0si8fiJhgxNRajV8gW0whLDsHpA6WPe0=,tag:9zLxT4SJBu+RZIlrC7WfJA==,type:str]
                                        uid: ENC[AES256_GCM,data:qm7o5w==,iv:xOp9+htAFhuXFFE0WsaEYSgEk14iAPgr8tG/ep6icxo=,tag:7YeUzyXfSSYcDmQMCoUvjQ==,type:str]
                                    editorMode: ENC[AES256_GCM,data:hFABF88pXA==,iv:rCOCO5eMYM+2ntxwcxtUoe9U6HsJO9UszTlc3w+nRUU=,tag:+wwCk0oRQH04NPJiqlGjGg==,type:str]
                                    expr: ENC[AES256_GCM,data:t61+E0ily7Khjy1L53WXDrMN8YftkQBesSuDSa3pClD7vHdnoiED4wkInemmaw7zEqmcHoICfsZmpxvakmabfNMembkd,iv:LvsKN0235zzUtT5Gha1SOVi6wAKSWjcydRgpS/P4cH0=,tag:pKoJe3bwJ2OD0DnKnJwhCQ==,type:str]
                                    hide: ENC[AES256_GCM,data:IJHsd1Y=,iv:wx4Y+anRAin/qAdo+74ys5ncDIZW/uthgSAy3jMw5m0=,tag:srrdi1fRRRpfOsh+aIwbUA==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:kTUyAw==,iv:tvK5mPRrMrwPbyJM3ict1wQR7s/bDwod3t1keM1TeJg=,tag:OKaiukQdQy93qCZYaeJLAQ==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:hKwgeWw=,iv:0PfCqAs6wNtCD77dx5ZHJvLJmRBszsOwHVBDqughsn0=,tag:1eNj1DXpan5Hpy5CQMIiwQ==,type:int]
                                    queryType: ENC[AES256_GCM,data:+WKckvs=,iv:YUkjHKO/6vIwxkoRvIi9ZC8371/DGYsvTElCTB7oQK4=,tag:IIcGUN2wiAuARYdpCyuK5g==,type:str]
                                    range: ENC[AES256_GCM,data:LDCtmg==,iv:pB4pRMGoRI0pHMtnd9LsNI4kUOb3g04fq054uvIOl7I=,tag:VephYmLO5dA69tmTqeg4zA==,type:bool]
                                    refId: ENC[AES256_GCM,data:vxZ9gSI=,iv:CVlmykiqtULU266Yw9JMj7b714HElBVb7BcUCFZJ604=,tag:kiatE+c/jrmOcEJv2vnBQw==,type:str]
                                - refId: ENC[AES256_GCM,data:IFpYXEte,iv:+T61Hu7fRN4Rz3wWKdjVFCj4pqx1CFammyGnqieRUTI=,tag:kHjKsaOUtcnY/QiUxIPN2g==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:Bze6,iv:R4XpVVdGbW5rIyssUPVfL1IokmGK1Iv7fCOogrSTGcM=,tag:CIHg+rn5AR/Whwncy0OspA==,type:int]
                                    to: ENC[AES256_GCM,data:bg==,iv:Lxq1yaUgIz9auZhvgUl0kADB2pxixblRQZ5Hl8fuyNY=,tag:7ZihfGJs2h6fsMpUFkf1qg==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:xaCmVmFmE6w=,iv:0ttLkYivpHJWjTbh6mRi+Ew21L4OpPLdPa40D1lqLuc=,tag:c2mP2Fh9IYXMp+0a9or8vQ==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:Lw==,iv:vXSjBACecwpXodQdCvganPwg7oQbUmjTD2geSb270wU=,tag:DgXKb3TLLd44W844hpIQrA==,type:int]
                                            type: ENC[AES256_GCM,data:tbo=,iv:p+mDsc8rqNfWfhnnL1G+sI5QqnQ1ePgsbMMOnpU2XTI=,tag:rF/AwGS2jQ6zV3SjaqFJBA==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:czxr,iv:nkqRsXvOuB99NfI/BxnjXVPGdRtkXKf5ta/07XMLO7A=,tag:zt0ggfQjFauVoV3zakV0SQ==,type:str]
                                          query:
                                            params:
                                                - ENC[AES256_GCM,data:QQ==,iv:xoF5EjZXTCqGitKTlQZC92qInEKYc6qo8EjCCIVoVl4=,tag:msHodc03liFLTTeF5bnJeg==,type:str]
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:TC13Ew==,iv:DhgaAqH4MUlLFFzi7/gtMthNqxRl6Mvndt2Z/FMs8Hg=,tag:uVcEmNECBsNIfBKK+45M9A==,type:str]
                                          type: ENC[AES256_GCM,data:h09ENgc=,iv:s5CnpOIETY9vf20PXoUtRlQNw/JQzXwrQuG513R4C9Q=,tag:gXdd+pZbDemkNP1bBQ7t2Q==,type:str]
                                    datasource:
                                        type: ENC[AES256_GCM,data:WTkLVR0sTV0=,iv:DdOys05Vjbnyivv4LMAzqW1yotkPmULL6AGJQP9ixmA=,tag:FQ6z7EMvzDprw4E3VO94Jw==,type:str]
                                        uid: ENC[AES256_GCM,data:3Pm52pfyfAE=,iv:mDUrVTFv4cc/XwSBeOPbyfryRcys0QAE31lbVPpXRjE=,tag:6kvhtyICJX9Cxg02rOfLAQ==,type:str]
                                    expression: ENC[AES256_GCM,data:PQ==,iv:SEV8mFpTqVnHyOhoOBQmz7Q+Yurp9foyYEEesnDDYaI=,tag:fq2x2NjgS+RgjdOQXi4Msg==,type:str]
                                    hide: ENC[AES256_GCM,data:RmrOfyM=,iv:etuW4ZSzf2NVy2yBpEamgYXkAV52vtilDktrAHeQdJM=,tag:tzoGFnJL/TgTDSxcf8IzCQ==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:ib+xYQ==,iv:eC7lZrDYce7dDWnQJNJpGD5Wop4y8i9RY7v3GODvQQE=,tag:lzB1JCrhCwvLIbjJLdiF0A==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:69XOt70=,iv:gNiuBNunVezGaCPaplLSb2MeJlkRJd06aHMtcYL9+JY=,tag:iuSRwEZOUtMNPTjmqg0tRA==,type:int]
                                    refId: ENC[AES256_GCM,data:gA71DqMB,iv:JHb2u8VwXa1mtJhncl906ZDrNY2svvWde96KcMQ2OcM=,tag:+64nh44CmRdryy1y6XpUdw==,type:str]
                                    type: ENC[AES256_GCM,data:zU/eUnvAiy7a,iv:0X7/jU/t9ebpwA1BqzBgcqzoTpXbF0K7uHxPc8hXRwU=,tag:H1vBTh2aMgVygK5s+GP1/Q==,type:str]
                                - refId: ENC[AES256_GCM,data:Lg==,iv:tkjbzBRE2mXuor6iPwLUz4NOEIop9QaW+Q7bHDhvLPE=,tag:kCgmf8X1wIMNS5QuUegPXg==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:+03S,iv:0jjuuc6+jMOp2c2f75Ry8PmtMiiZByLWYjrf/QPWJ7w=,tag:C36bza/yyzV/pi6MvVWAtg==,type:int]
                                    to: ENC[AES256_GCM,data:Ng==,iv:rhmoFf4LU1Jc5T93j02BNP5soWBWub4qLCkbKIi1z4o=,tag:4Ay8wRdKg0sHIfeO7UXGOg==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:oN5ymmow9lE=,iv:LntqK7cFwZCB96XFTG27skQGLnvE3dAfAUoj00ZF288=,tag:o1aRsP0Rf6nbgCdZhQN3+A==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:UQ==,iv:vjegCiS2NQExN/HRpxu2+6r+Pw4sD5it4aokhTp0TRA=,tag:eWVNvSU7YyQKLSu1P8WfRw==,type:int]
                                                - ENC[AES256_GCM,data:2A==,iv:aNVt37HBcnkInMN/7sd6GzbGTTMwnB/hSyGSLh/izZY=,tag:UUoCW/BPd9U3Uj9xTXP6aQ==,type:int]
                                            type: ENC[AES256_GCM,data:dso=,iv:3GIs+Tj5FGNAKGmsg90x5w8TAQm3EUA+agdMDzmaDkI=,tag:1Lizm6GPdQV5fRevCW5GhA==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:to7l,iv:38jA2PWFRvIMDJjlc39baCgrIcNTVzZpVtSqlR08JYI=,tag:UpSbx5TAM0aBc2y2E5oDJQ==,type:str]
                                          query:
                                            params: []
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:56x4,iv:GwW5o9Hv2V7fHyAz+xxl7c2vuCiHT/92PdecBFpcXFw=,tag:87XuuKpNzeaHdZoOCpErXQ==,type:str]
                                          type: ENC[AES256_GCM,data:HxXUmP0=,iv:tugdpTvk8BH/WHI9OQzSWZPHdB7WlpEmxOJmvv0OKXE=,tag:PNwjTfdDoaqmGQfEHPWOTw==,type:str]
                                    datasource:
                                        name: ENC[AES256_GCM,data:UduZltZ1mUsiZg==,iv:r6ZTBY90LLVYed77KB8mCOzZhVnvIjYtuGSCOfalZvM=,tag:4HBQpACozMofDofYwFthWw==,type:str]
                                        type: ENC[AES256_GCM,data:g773uvorREs=,iv:limk0RggD9ffgspP1xikquh71yHxUPUF3dckdiKD0wE=,tag:Uxm9snpJdhTx3QT+BX7cbw==,type:str]
                                        uid: ENC[AES256_GCM,data:j0hxemgPs7w=,iv:rs1zyjxVbQ5VS9az5nI3wt0xOlwWpkU1/pzhgbfAUmo=,tag:KKih/rX/UM4FPoV3f/rWJg==,type:str]
                                    expression: ENC[AES256_GCM,data:+zi0j1E=,iv:9y63KQD4Clk2frU5YKBpe905JxUp21WEv3vSNQGatx8=,tag:VNwHNf+0ADavtswziR6kdA==,type:str]
                                    intervalMs: ENC[AES256_GCM,data:LQiEkg==,iv:9WojDAj0M60Gra5VVa9xV0LtovCXQyQ27/HNHI4B+eI=,tag:bx2FDZJ4Foc+OFTmJIp6KA==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:QYxyBxA=,iv:q4ss/0kV/Dm7AXxiEmwR1tCcY+aa2E3cjMhIwR6I3Hk=,tag:/ISfLFPfnUNy7j3+jxllGA==,type:int]
                                    reducer: ENC[AES256_GCM,data:ybvyZg==,iv:JGKPlnsaN6PIx5fO9KQ5dyXPfLVK9nmHcnyWgiS3MqU=,tag:fL1BnzeTmReB7E516lBklw==,type:str]
                                    refId: ENC[AES256_GCM,data:VA==,iv:C+mPxpxZ8IfeupfpUht+EzNbSS5q5yTreGk7bniJFhI=,tag:wKWOKieNrgzUmQl4tnT+LQ==,type:str]
                                    settings:
                                        mode: ENC[AES256_GCM,data:Nya52N4tfMti,iv:JtbQTJsOKoKGmoDWR9H+1no7tEilNMSwIWGvzdAfIfg=,tag:jiSnaV+ymQZtFU4p1LWgBA==,type:str]
                                        replaceWithValue: ENC[AES256_GCM,data:3g==,iv:OewFWDtapARIKdKaLxtssLOMTTwpOoJPjabyJe8EH1M=,tag:Boh6iTLhFIpaGKnByTIJrQ==,type:int]
                                    type: ENC[AES256_GCM,data:4/1n3oM4,iv:KbtZLRVr3duD4bwgEa435ypvjP/jND9xNVv9Z3lDCkI=,tag:ioc9hFmQ9zGkzT1VXPS4Og==,type:str]
                              noDataState: OK
                              execErrState: Error
                              for: 5m
                              annotations:
                                summary: High amount of i/o timeouts in coredns
                        - orgId: 1
                          name: Matrix Synapse
                          folder: Matrix
                          interval: 1m
                          rules:
                            - uid: b6db960c-c0bd-4d4f-b0f1-e1f216ec81cc
                              title: DNSQueryRefusedError
                              condition: Thresh
                              isPaused: true
                              data:
                                - refId: ENC[AES256_GCM,data:qkIwaX0=,iv:Ux1Mwq+O6yVCJ5s+vMDKYEr9qKITeYAqGPqSpcUPpxA=,tag:K01Bu2Mzc7S0M7t7SaMshg==,type:str]
                                  queryType: ENC[AES256_GCM,data:7NX9YuQ=,iv:Z9dhPXJ7CHrrBcnquLAmINsOcq5cWb9kGbbbDA2XzVg=,tag:FnWGEDZuoR9K0zl3iBMrpg==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:h9Re,iv:1//GtwqLfFW0lnoSJFLQbch/dYCpkPt8HAiowY7ym3k=,tag:Uu3HqBxk+LhvNa6bLddC+w==,type:int]
                                    to: ENC[AES256_GCM,data:dg==,iv:OFwnR+RGNSIAbpNotuqxtYiMehAjMkLfPqg2hunDzK4=,tag:f5ZQh3YNH8tP9ZZdg2wzkQ==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:IvJfkg==,iv:eqTzM929Rbeo7OqhngXeJHBUjPi3OW7gnIGqpbJ7apg=,tag:3P4BFO/jNWFlWaRSzQ+VbA==,type:str]
                                  model:
                                    datasource:
                                        type: ENC[AES256_GCM,data:DFXSuQ==,iv:lnsEopGuMRN3ImUbCC8UhpdIEkmdFWTJAQNWXsjuNpw=,tag:HC/4Jb/OLeI8tHe/0uFNfQ==,type:str]
                                        uid: ENC[AES256_GCM,data:c8RZyg==,iv:dO9GHvXYvHXBZQ6mEBLXDS4uhO+pI2K3WSK1HbRn1aQ=,tag:sgcBZnBtshY9BazrVSBt6Q==,type:str]
                                    editorMode: ENC[AES256_GCM,data:4FbUQwNJAA==,iv:Z6BhdVzJe1AKypyc5Q4bJ4ZqIGzsL0QA3q/x61FT7zk=,tag:31VTTEGvF4jk5VcntAnavQ==,type:str]
                                    expr: ENC[AES256_GCM,data:I7pxnaqhlT9emiUUVS1hUkxrRkfBHZ20ZNDk1Yqv9SEai27zjdjjg05tWg55kRQnLJhhxoTWMXPCzXvMNxuJlM+klD9GqrcqoMVXcw4SBiA=,iv:zpjeqj/ShX0AHTQvE+a0W0RhbedfIBK8loyT/MFG72k=,tag:9OLVLhQUCZNk0QfmkGyziQ==,type:str]
                                    hide: ENC[AES256_GCM,data:PUUDuow=,iv:zOIWOs8QFkkLhVGy86vS4B2c/pydPwqOEL7qce3mAw4=,tag:x9Ee8Xi8Cyg/RU8DjYkmcg==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:QR57mg==,iv:od5Eie7z/6DPmSpaHQa6np/LElmKrcbzbMTzxhASfHE=,tag:6ICGgdnMHtxBNwpdM76xCA==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:MKDfBZw=,iv:fmee4HEZmZ5/bprDxRXF+FjZ6rNit+dUPH+JHS04IjM=,tag:Ogue0+QLFnHneZx3IKsR7w==,type:int]
                                    queryType: ENC[AES256_GCM,data:/9c9CbE=,iv:zIk9e9aw6m6pNWDXMq9n4h3RdS7VD05Ufo2XsIVMRV0=,tag:e0UtiFz1MTEAw7lCcW5aGw==,type:str]
                                    range: ENC[AES256_GCM,data:7R3Ajg==,iv:uPXVlyTgciaYNItFy0cflfvEa7m0ws17Py5EvmDty44=,tag:VGRWwjxTJZ30AlCtYI08nw==,type:bool]
                                    refId: ENC[AES256_GCM,data:bcDySUs=,iv:Rw9YfP5ZMM0bT1hpzzHM0vDFUXLsFpyQieh8gqTOFXU=,tag:dIb1oNjfspmUSFKDWfjPTg==,type:str]
                                - refId: ENC[AES256_GCM,data:io2fx4pn,iv:pHLyuT2t0IU3QFbJ7kWc3H3dIpnlmryPdVCGXuLhPhc=,tag:KjQzB20wBvvbjv0CFvGXtw==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:f9Bn,iv:ls6jvNbXZuHlLf/DgUxfOVH0K86xySZS0tRHkogYw0w=,tag:FGC/izOIgUgbfx4pehZfLg==,type:int]
                                    to: ENC[AES256_GCM,data:GA==,iv:+yC88/aGIBdyvnbwMr0kT4wGgD6fYD3lIpGBCHYjSls=,tag:TJLIU+rtOEKxk6AJDlH41w==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:D2b6RBcDOJQ=,iv:q/vZbB2Tms6fk4EJIdf3GMwozO/NYUjZxm0tnlQ+xo4=,tag:OFToJy4xZRlNYO0O9rh0Cg==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:SA==,iv:OtZlPHp8hDff+OqNVpsIzWqQofzcY7t8XTl9LTvmakw=,tag:AtVkqL2byY5NwEdXoBRdCg==,type:int]
                                            type: ENC[AES256_GCM,data:A+U=,iv:13x3+qcxVlv/2cHhlk/3+KA/dy5ZW6H0gGfenEVrENw=,tag:nxwpcOxjgSZojJ+VM3nosg==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:/tgW,iv:PnYF4L+jBC/NlgmTDAiOWAcR6XGSJnTyGk08JlT+7vU=,tag:PMi7Yg2HYq7ajFYR2sitjA==,type:str]
                                          query:
                                            params:
                                                - ENC[AES256_GCM,data:iA==,iv:fI59KmE2IeICs3mtZvJ7fzDsROvV9Ph5WA4enqPPbTE=,tag:DqOHzYurzj/yn8QN6d0WqA==,type:str]
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:Vvg7tw==,iv:c6ZSRS94tqa1ybvcssNwDO9+NE++Ac0LSx/zuC8faXI=,tag:AlWU1OPFKNo6BLbbfkv1NA==,type:str]
                                          type: ENC[AES256_GCM,data:0TsG7/Q=,iv:DYKmm7dilGtA9QjHSXMrwT1V66p+nIf4bKXgmgEQFQA=,tag:WYlge+75wW9Z9IoiXsG3CQ==,type:str]
                                    datasource:
                                        type: ENC[AES256_GCM,data:bHCe8J8DPmQ=,iv:76BOfCy7b8IZmbrfHFAbgP1PPzYlB7lImASooRV7/Ug=,tag:zr0/7pA2ZsyeNHt6Lg3j8A==,type:str]
                                        uid: ENC[AES256_GCM,data:bQ3j6vwZkQ4=,iv:ABdE+CT8eo8U8PsAutwcT1NZYfAcTMizs/51VwjH4oQ=,tag:MgAVV5fouHBVKkJCwt28Fw==,type:str]
                                    expression: ENC[AES256_GCM,data:2A==,iv:8x2xKkKAdHQ63MZyyd6gftWJdTL1DYrT1EpStR9wGvM=,tag:TwYe7d2aAPSEPSGzJpuH4Q==,type:str]
                                    hide: ENC[AES256_GCM,data:zxjvYOk=,iv:J0TM0VyBL3rZXEcX89QkLirruUwIHOgopD0toZ9ClZA=,tag:d9nKOv2bJEqXSXyiA1xwZA==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:2ugO3Q==,iv:Ti88L/62zUCCtKJdoFLjPr0YNjF4rEY4FzHkCP53avs=,tag:HfZxtzSIPJklrTrhjMxXaw==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:uXLgUoA=,iv:kzinAI5B1zp05VhQOb+DE7zWn7tOwaSsO57kOKpZ8cU=,tag:/t+68YBVtMD9X5m/I7S4hw==,type:int]
                                    refId: ENC[AES256_GCM,data:f1IbfCh1,iv:PqiM8Y8DhVkTbzl/oQIhvR+D535IUsPOQM6eXt0b3zs=,tag:b4qYSj3nEeSrQvmyDqOdrg==,type:str]
                                    type: ENC[AES256_GCM,data:pSe36s+WrY2T,iv:rYZCR1P9TSijI2nqe8SXIAh5zqzcD1ZPn5hPi5OHgXo=,tag:NJW0PGaQ1htMtJyGrREIqA==,type:str]
                                - refId: ENC[AES256_GCM,data:hA==,iv:xzlCtKAqNnxhqqQ1r99m3OiAO6SxZODJ9tO3sTd3Agg=,tag:bBCQfl/CX6ucjmC1LdDl4Q==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:hiz5,iv:XBsy0UONeb4MicQSfBIJt0se44L+CA7XAACZM/R3x9s=,tag:7mxFo+9YEdXRPvi87yFiDg==,type:int]
                                    to: ENC[AES256_GCM,data:0g==,iv:NlCDT31Zxi8M6zlY4KTNxIhZFvudAJNjqdMT4kwuwbo=,tag:TD7eIPnfCCSdWZz8lha1IQ==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:uGKIoyIxmLU=,iv:O283LjaVLMtxKKtk28hZqU29eD4DKPEB5ip9e929W5Q=,tag:mJHEMxPQjnHlSSCIzJw0pg==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:dA==,iv:NBvo/yIADfJXMukem0EMhSLZ9S+9mDxU0kjPlGIcNy4=,tag:irB6QnpSk7evg4Fg48pCfQ==,type:int]
                                                - ENC[AES256_GCM,data:8g==,iv:GTxxyzfSS/GwPk4FuyuOComdS68FPNCPSZnsDrGRIDg=,tag:nQAY+vmPJznLrp+/9n6olA==,type:int]
                                            type: ENC[AES256_GCM,data:xoA=,iv:p0XI23NeITCiZxzNThKeuR1G51JW/ISjfkBcQRhZysE=,tag:ld5WOHNweKj4Y2BU5AnqNg==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:5vIr,iv:iJDU7NkawpmkNtaSnCclDGF4Sg6oV6w56iJCaGFI+zg=,tag:DTn97GbHMyAsHEjU9XeZ4Q==,type:str]
                                          query:
                                            params: []
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:JLfJ,iv:PXuywJLXikr6G0tHYorMnL0zhXFIY8UfGhNRoDtkpDw=,tag:vl1Vji4UhJeS5zGZ8kz7XQ==,type:str]
                                          type: ENC[AES256_GCM,data:S/1KxqI=,iv:Dj01m2S+fr44J2IkG1wx6AuykqyYpkYX+lw4Ld9rW/M=,tag:bYtUtnKQZe/KJDd6ofBBaA==,type:str]
                                    datasource:
                                        name: ENC[AES256_GCM,data:+6IlyrK6YP6JLg==,iv:oNIgTq+TDKLn/Ne3Mb6DnQwSyFzP4RB4ANiU/iQvKoY=,tag:jWk6tZKFdKSOa/EE6p3DsA==,type:str]
                                        type: ENC[AES256_GCM,data:XiqtNccr3us=,iv:cqbtaxnjX/+IhkLS368vkTjqUtfYcBe7ciThPwEVx8s=,tag:N8wn5thfi6agpJPWciqttg==,type:str]
                                        uid: ENC[AES256_GCM,data:9TeHdJB/lgA=,iv:/Ur3CIotBXGRGUx8KXe35KOXbeNORBIcvOzA9UbIW9w=,tag:iguGkukDYbGWw2wt0UZCYw==,type:str]
                                    expression: ENC[AES256_GCM,data:brnh9Bs=,iv:XuWqhM2nmamqAn+Nioip4q2W9Zc39aBqWedY5VSJriM=,tag:1s+Cy5+w5uBOLufPYuwkgg==,type:str]
                                    intervalMs: ENC[AES256_GCM,data:haSAyA==,iv:SE9ZX2eCNt0qr6DilqsUa78i8fS7v2rvomGsHkiIU/U=,tag:B0N03IeE4mUCpuSe44H1jA==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:wFj9Qao=,iv:HdHQ5FtId2VRqutl6PTS0jwf/ZHRCtPXgFQk0JSIip8=,tag:9b8P3SChMX/z7VHFVfHV+w==,type:int]
                                    reducer: ENC[AES256_GCM,data:iTe3Yg==,iv:0OzmPLD4smPw7dskjd1CMJ3MMxtIQPpnbvq0DOLWg8U=,tag:H5UgueE6XPjvENhczkqnMA==,type:str]
                                    refId: ENC[AES256_GCM,data:ag==,iv:R9CUuUCLckVrvz8ECj7wK2JQOf188XouSns76vbwBTo=,tag:hvydfjAVdwzfkZQjdfY1fw==,type:str]
                                    settings:
                                        mode: ENC[AES256_GCM,data:CtrYMxzCOFWS,iv:PFx0SdIcShDCOVPae0kiVcFElAE91ZfLdfSbC7KXTuI=,tag:RqX0nzwxlbSGBC4Hu1VIuw==,type:str]
                                        replaceWithValue: ENC[AES256_GCM,data:aw==,iv:QzF2DQSJprbsftlhRwEwy02OxOEUGu285rocIMTwhEE=,tag:9WIMC8R+ESZbx4QiwSJ13w==,type:int]
                                    type: ENC[AES256_GCM,data:DyWN8YLk,iv:35ibzsr8gaCq+R0IvQyzSGn+UB2o/hPB3c45uESB6Ts=,tag:Hh53KTJa2g8uo5M0ev+xcQ==,type:str]
                              noDataState: OK
                              execErrState: Error
                              for: 5m
                              annotations:
                                summary: Matrix Synapse DNS Errors are higher than usual
                            - uid: de30a1da-84da-45f4-a4a5-d641dbd92e6c
                              title: psycopg2.errors.ReadOnlySqlTransaction
                              condition: Thresh
                              isPaused: true
                              data:
                                - refId: ENC[AES256_GCM,data:Gr3353o=,iv:mUJeHdv2ClWbzaHDqimugtfdugoWBCVijsfG6dBgngM=,tag:tE7uNZ33CTu/BP8MFpWIdg==,type:str]
                                  queryType: ENC[AES256_GCM,data:4sFVZek=,iv:NeYgXTm2Oo45H7mWEhlqlXoVuQslNFBE8ldzqaJqbrs=,tag:wEE08QCccqKTqLKY0F2OFg==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:Htr2,iv:pCXlvpschvZjSYFIvKI/d9TWRVu6irpvTcd9Pdia0pU=,tag:FkxKC2RvUvGYDTNe/eB8Ig==,type:int]
                                    to: ENC[AES256_GCM,data:4g==,iv:2mSZGMV9e1zKw19HlIUQDcW7IAtQoRaVFrtb287yVEw=,tag:y/zfxdFJr+oaaKZlsd8zfw==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:gUSNwA==,iv:DQnDomsnjcSK5Gjc85znMmZxJlY4cIkn4qpB/SmSyFo=,tag:fqUcRX+fmXFk2Xbp6wbM9Q==,type:str]
                                  model:
                                    datasource:
                                        type: ENC[AES256_GCM,data:uqb3kg==,iv:EZWP05b3txiKct1Kq4JS4V01OF1ys45sgOUCOmrSdAg=,tag:5LF/S1GdADlNHg3MPI/JpQ==,type:str]
                                        uid: ENC[AES256_GCM,data:BvEV4A==,iv:adKrFKrKFvbT+OS1wzidpNMVs8Z2BY6tLXnAWlP10u8=,tag:d2BX9n6ifNZRGrgSMKL3pw==,type:str]
                                    editorMode: ENC[AES256_GCM,data:l0lPBwS1Fg==,iv:UaMWPhd6AfVEls8YT20dN8nsDOZDiIol16nPseoDFPg=,tag:w5jtS5LzXxiflVMthwr2/g==,type:str]
                                    expr: ENC[AES256_GCM,data:MEdIVmMhRb6c6bq86xpWHnvxMs2kXF02r2eu74xb/IyfKVgp9Gpz7lLh0g85vJFNnQ18iTQ9MVdzZnWpLXe88OMpwCeeKa+4/Mevj660bC0U6JHc//o+ucT8/1bPP9/sXqc=,iv:mVPsCLqIzGJu4kv9USsc/FSnVfUkWY5paVkAubjX068=,tag:RU4chiT04TFfA+N+asNd9g==,type:str]
                                    hide: ENC[AES256_GCM,data:/vqLGOI=,iv:RKQjCbCKfKeyqMOs+3jzNxlJ+fs0QlRhsplbQDLUryU=,tag:ZJalMXw4kF4wBq7kFMFEXw==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:omZ64Q==,iv:4QhkWwJwFs9yqjqSaH5YCGW6sghcE0w423XGgP1XmSY=,tag:qPK/vok88We3nU3paq4+9w==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:XJint7o=,iv:0AiAqt1J+5YHDo8zuR6Y4MM2oA1XRu0HKsfrS2X8+64=,tag:WP/q9MPqInduZ38+2PPbQA==,type:int]
                                    queryType: ENC[AES256_GCM,data:A7MP820=,iv:nIukdjdvbZOmv9M23tJTk+/Nncfz5OCVhc5g882bt2k=,tag:lV6sNmlhUvEOCwemyPM0mw==,type:str]
                                    range: ENC[AES256_GCM,data:5RpEtg==,iv:cKB9nldg4Pne187YPnk3xk3vJbv2xSWORb60y2ROWPo=,tag:tbwPnGKcgwjHVRclze7a6Q==,type:bool]
                                    refId: ENC[AES256_GCM,data:V3q7974=,iv:Tj8EsMZRCkle1ofmvRmdRWtFo8UbD7pStVFpPBRuCMY=,tag:zmKCrXXMqw2aI4q9bKwqXg==,type:str]
                                - refId: ENC[AES256_GCM,data:4AcmQyYH,iv:Z2w5YHlj7drIr1clFZuNiR+gcVX5zxkcRHc5Ad6NBn0=,tag:Q8FR1OmGkP/1brQrtG22Wg==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:PDNY,iv:O2FvPL3mx3v6rk2xQA6PHbgbMeay32fKfxp7RrsuNZw=,tag:WwiLYeEuaCIA+IK/Yi0+Wg==,type:int]
                                    to: ENC[AES256_GCM,data:Kw==,iv:KgHTxXQpldM4FfRfh0L+y7qj89H6KDihEbdNKcy/Xc4=,tag:1epXwRXU1yDz7kJ6HYhw3g==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:4bu0ZNbY3lA=,iv:yqVKy0vnSRjxWDB6DpdwsX4QXHiz7JqS0xgwsyKK3Vs=,tag:/rJQEQns3hElVxvIznQYTw==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:Xxfj,iv:Qp8uEjQv7hNrA8xbOvuBCCOkC4pP4iIzCZqKTDh7UbU=,tag:b2awGhhXwyyPWJvP2GVLyA==,type:float]
                                            type: ENC[AES256_GCM,data:XE8=,iv:iWiJHQrxAePPfdGeG9txc9Rv90ci8DEuPdgZ9vp1Cww=,tag:fBnVU82PQbFJ1cRhduOVbw==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:WEzm,iv:ND2WJSB6LYX1aJTQbcdlsAF3U0x9F3vIqWC26gPdyBE=,tag:HCdkX0u4XT2AWvn0RT571A==,type:str]
                                          query:
                                            params:
                                                - ENC[AES256_GCM,data:xA==,iv:zf8L94+y8HPg0nmyGklEbC5eHHbysB4n8p1/IkKi26o=,tag:8XPbtQs29nSswEyygQFFOQ==,type:str]
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:DqgjfQ==,iv:j8qSDHqj9SsjKsk6M+w6FPbxwX+3W7SRAdO2Xyj+36A=,tag:ZVtlzQjJwfdU6m00g2qbCw==,type:str]
                                          type: ENC[AES256_GCM,data:pPNTtRE=,iv:RtMV2gx+AED27mMJyXcwDeN6hsd0971RPCLSF3c1HLE=,tag:pJzdqftJ7B80BBPSVE+mBg==,type:str]
                                    datasource:
                                        type: ENC[AES256_GCM,data:ggxoQ0qXEsY=,iv:fi8Pa2O7g7OCQ5bOlUDQyH3wzBfbS5+1htEk9tiolew=,tag:LDyYY3Z2ABChOO2XYW0Z5g==,type:str]
                                        uid: ENC[AES256_GCM,data:gyvvFJvSrUI=,iv:PjWPLkG8MJQbxCSEc2OJ9kapl55CnbTUjsVJeMR/l2g=,tag:CobDRTa6umm+qvc/Qs29Fw==,type:str]
                                    expression: ENC[AES256_GCM,data:5Q==,iv:DP/pBXZZg0du2oXB8xDeKdzkd5Bdi+y7NxCkEt/GG5s=,tag:dH22qXHAkPQCwhGu4yQ5YA==,type:str]
                                    hide: ENC[AES256_GCM,data:7y6QLK4=,iv:aAgnnC58+tsNQdskWP0nVFE+pfVlacRbi0oP3qsNtsQ=,tag:l/Jnc4m58rX4wa9Rg4deuw==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:qBu3mQ==,iv:KBv4HN1bc8catJeuzOm32IK/lqLCeBlW6gMJDqP5gK4=,tag:i30J6do74ppYI2on1XvWxQ==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:TsxnGXQ=,iv:DW4PkdF4YnfeHLh8uhNw57UzrARzW6hvbyi5lYnz42U=,tag:KWgUfhQYwcLNK9JDdjW8sA==,type:int]
                                    refId: ENC[AES256_GCM,data:WfF2xKUU,iv:0w5CU+hDvGM8li4aeDhx6vmA845ejkGZW+fhimeGc28=,tag:pjqBo2QpFcCYPdDO5tGaaA==,type:str]
                                    type: ENC[AES256_GCM,data:uTan2B5z6ZMH,iv:N+l9PSWKLesdaGr8hScKfGS8KFsJ6qNNNfzQhmLf0OY=,tag:JDWXDgQlKDqiHrHImyv6cg==,type:str]
                                - refId: ENC[AES256_GCM,data:9w==,iv:iEptggm/CfO//NOBQQFWVGTKUjNbFgxMASdKCGdvZyQ=,tag:IkNrW1u7YD3LHJcE0TwTcA==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:sqBH,iv:+9UfwvM1+kBIQ4C4PZCPKPjHUVVgyZGliLLxnd05jzc=,tag:kgoni0GdUbHLrN59lyxkLg==,type:int]
                                    to: ENC[AES256_GCM,data:kw==,iv:4QhIVqkwKwRS4WxBg5uD5StEjBJgIxWFGm3TXfgfMDY=,tag:+xZaMotJsgBoS80sOt5T+Q==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:H0SimY+WoXI=,iv:qgSyIGBo8xlhEox4My6iRrT49wiUJhcPwdYj9auXWqA=,tag:NMazB5waWFuTiO4vmG/iSg==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:VQ==,iv:0hc/38sV7Watn7Jh9g8SAogDh0XHMEpnVdAgXym70yc=,tag:dg7dIgk3H+XvRAgoadZgSw==,type:int]
                                                - ENC[AES256_GCM,data:Rw==,iv:Hp+Ub7EACFX7l0SQrNRsuGuta8yIn9qBM+8u7jgihmQ=,tag:7cnYHh0QQbSHLI0OX/gRqw==,type:int]
                                            type: ENC[AES256_GCM,data:arU=,iv:K+shLUDjZQ8wTwRnWDEa97dprKIPfJPocN+Elar6FXM=,tag:lj8EreeAPfX25jrVS1yIFg==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:Ttra,iv:gvjr58HRoVUJ+HMv8BzOv5W+q4YqwhMHXLMAgWO+HzE=,tag:qkVGljcTZ8ssbhiL6dwGmA==,type:str]
                                          query:
                                            params: []
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:Thu1,iv:8JlzpEhz0VjHildyXs/X6GavuNmPst6qE5cqa183byU=,tag:AvYAnhyZUF5UKcHzwA12KA==,type:str]
                                          type: ENC[AES256_GCM,data:eq8i39Y=,iv:YSvfHtkEgHxozz6vWjTOY9H1bv9ca9XMlEl9utD+Ut4=,tag:ssRuQLD4innZt0vEO6nmeQ==,type:str]
                                    datasource:
                                        name: ENC[AES256_GCM,data:Ix/M0Ko1dtQLqA==,iv:EUfOFF/RcMBo4kVua0XIJdturytVqPS9ZnY7IrQ59Co=,tag:f2EjXYuds+CrkLt6LGX4lA==,type:str]
                                        type: ENC[AES256_GCM,data:MkRLFIp/RuY=,iv:12nB6KpYt2t+RnOVOEEdhicAlgrGf1KwWqbqRZ9Tlvs=,tag:YN087DHevWvxbLDKj+7HxA==,type:str]
                                        uid: ENC[AES256_GCM,data:/ugZN4RS4wQ=,iv:h8ERBLtNK2924zUMy+R9fNyaRgcQ9gmozb0gBxxBuE8=,tag:goM3Tfa21S6ct3xe2hNcsw==,type:str]
                                    expression: ENC[AES256_GCM,data:FqU6ZyY=,iv:1tpmgLE8yDfgkYFojg6tdYSbmDmlrjSVNM96DzOSSJ8=,tag:6xrjVQ7sAH+tLa+SCxFAWA==,type:str]
                                    intervalMs: ENC[AES256_GCM,data:gnFLtg==,iv:CZNnBrO41DLYhsNBPa640J0UmyIOWWD2QqRcItjWgVE=,tag:xDJv6PPc+ENKZBByIaLd4g==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:EeKY4+4=,iv:tQtRTPu0+ELaipd9CdPRcNLfP1DGUSxoAeVhXzEmvXo=,tag:+aAdDwRkWby3iXuDycTNVA==,type:int]
                                    reducer: ENC[AES256_GCM,data:tTEfIg==,iv:6MU8T5fA5COQI4GvD0mrL4rt92m/kh9pOKhRAVZ7dbQ=,tag:O5zgXKpIoCDWT4g7C/mnVg==,type:str]
                                    refId: ENC[AES256_GCM,data:9w==,iv:WxdCkNLZYHyLIiqSuJ8u8u6/B3S3YfwePALn+FLy2wA=,tag:vPyqNcdhnY4WNJaMUXLevQ==,type:str]
                                    settings:
                                        mode: ENC[AES256_GCM,data:w88mENrOolxV,iv:Ui20ZWxfFonHKG+z8rtQFbzsgIMfoZVnf0tH/aUEFsk=,tag:1egX69es5oWHw3XKiy6/Rw==,type:str]
                                        replaceWithValue: ENC[AES256_GCM,data:xg==,iv:PzWm1TFJ/9Bu4LFEP7SZHIEE8oV19xomNKKK8sfTOSE=,tag:H+iftJvguevVv3yIZyRqmQ==,type:int]
                                    type: ENC[AES256_GCM,data:6qyZFSLF,iv:G/C6wId04d6Ny03FtbHOoMiZrXBUk5G9opdTDzpGtOs=,tag:XD0FL7bUVPiBIBZKrMeJMQ==,type:str]
                              noDataState: OK
                              execErrState: Error
                              for: 5m
                              annotations:
                                summary: Matrix Database rolled over but synapse crashed
                            - uid: d16dc343-31d9-466a-bdc1-c2466b0bc18f
                              title: Unusual synapse logging
                              condition: Thresh
                              isPaused: true
                              data:
                                - refId: ENC[AES256_GCM,data:6+sE9xU=,iv:h6bltqcV/Rl8HpttSjChlSxFFsp2Yyu06LJ9gDhQ1UE=,tag:gayyTod1Cll5EWsprOGalw==,type:str]
                                  queryType: ENC[AES256_GCM,data:ee+mnhQ=,iv:fSiljAPU6lg0TBfMB9D8rf4FLW+6OPVBW5JVf1GWW4M=,tag:CMYriOJ0KBNMI3jsXy30LQ==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:GvuV,iv:MqBT3gplVLNNbIvIPxkwMRqTJdOWA5G7kpS/13+ljW8=,tag:SuXVDjYpT1+Ys/q1KmklCw==,type:int]
                                    to: ENC[AES256_GCM,data:Ew==,iv:00uaqGnkYehR6xTKLmO/IWjy6c4+7yQvufnzgk0iZtM=,tag:lKxSzXiTLV5FysIsmRz/Mw==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:X0Vp2A==,iv:1R48E1mQJsYb8pnP6gfZHw8s6MQ2Tdih2vJzDkvc8+8=,tag:Vh6ovhzd2Re/6zt3yKWqng==,type:str]
                                  model:
                                    datasource:
                                        type: ENC[AES256_GCM,data:cmm4DA==,iv:SAMNT4li/7uBqg1JmvqEGRFfMKcMBuWJa/Cgid1kWak=,tag:XKKfpPTAiW48/ZpGr7Yavw==,type:str]
                                        uid: ENC[AES256_GCM,data:TiA1zg==,iv:Ym2YnpI2qzR7j8081TFWEMNrplY19zVKSXuzheHJfDM=,tag:NW4irRNSPsYmsR2wWtJOMA==,type:str]
                                    editorMode: ENC[AES256_GCM,data:zuss4xnzag==,iv:3HXO2o+BsQpyhS7hlpWvkLTrKgVjDfs/jQKXVh6U6mQ=,tag:rEHPOHwyplgQmI/kkAUECw==,type:str]
                                    expr: ENC[AES256_GCM,data:nVUNtExOX7TavRAgwKn6qNAX86k0jQ/kvzjEW/VDeZUOW6wWeA6uizGBPAa/wZyogYQdV/XEsiKmqgC48mGVPWxt+MgBP0QxYUxXQCm0xzM+9xtnA/veBD+M3kfqI8woFLBlO84GoDK2YgqHXu3hmgmRY/VbZAxBg/AGqaNBe3Z3GlI1IJZO4udE3sJ7l5NQS0htwpszYWxaHJ9Wif7Iu+GPudBKWmIbxg/Nxyo=,iv:54sELIRfRIu8qUlQ8TMQ6SBy/1WmmzRhdVB4oEQvOu4=,tag:n3UTnocAhtHbnlWsV3BAvA==,type:str]
                                    hide: ENC[AES256_GCM,data:pgc/9GQ=,iv:PiPC32OPMQn76jr4LJYFFPrtBYaDR3shHvGr8+2D2Hc=,tag:A2/q9oDT4dMCxGXGsSYEOQ==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:4EvgTg==,iv:k9SyEPh3DIjpTKOAPCBtFbuUS++wawCwPTbpoWURKZg=,tag:3YSdiKiWlOzLtDj+Qu7C+w==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:ix2J22Q=,iv:58Nll7UdYCsztflZ738YALlyTznqTQMwsCzOl0EANxM=,tag:To//rhd7wKah7SN/RUg2Dg==,type:int]
                                    queryType: ENC[AES256_GCM,data:Zepk8P0=,iv:NonVr7Lh0DqzLbRFu9HLrkk11zhRGisC0Rt+q0aXYdE=,tag:NMbexsygWDBRrxvQkPkQvg==,type:str]
                                    range: ENC[AES256_GCM,data:eh7kZg==,iv:2GJGca8GWj4vg+N09+6O+xvlrVSwGrpIs7NSm9CwWgk=,tag:aZCrJvqohn7Uwkn6rQSaFA==,type:bool]
                                    refId: ENC[AES256_GCM,data:n72E9MQ=,iv:pItfnQgjtFkBbz7k7pCTHP/vRSSlypckqOBvusj5wLI=,tag:OWAldk1vTdAwqvmPpD8FFQ==,type:str]
                                - refId: ENC[AES256_GCM,data:zHryNsBf,iv:XKH9Xn+0uPoi2PYh5s3x+hwPJcInvBfXhJAqHkofLl8=,tag:IwL+2A/f6ACnvwjX36I9MA==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:tZyN,iv:0pL5Wma9a3zY0UjPmaS9WEo1AbeqNJMElnvukNuBkNQ=,tag:kSrcDCf/dNP8tPZaePuPjA==,type:int]
                                    to: ENC[AES256_GCM,data:Gg==,iv:wqYybo3MYZop8S2wcUjhOHLKT3XxEnbeO5roPhptJj4=,tag:qDr+zLhpJBWrglDYsi4luA==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:w/JMGLIQO00=,iv:IOdiaQezUyQKN6GkFY8z6cmt9/qB+IxK/NM5wZUB3DI=,tag:GRUq/0nntTKZR3/itMRJKw==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:j+E=,iv:AS8OREeBj88N5oYi173lsS7nY66xpqdNHYzFKp1euDI=,tag:/dZmFP17pCaSLdiUmXxcjg==,type:int]
                                            type: ENC[AES256_GCM,data:kCQ=,iv:rh3pc8gCFj8R/D1k6ZSxvpFZH9XLljCp+jqlc/TZk5U=,tag:97JhIVjGDNlVpvZvYZM1gQ==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:l8ol,iv:TTNF51CaNr4zKPTOAWJItb/U3TZjhcSfq9dRpr5ZBps=,tag:cnEyBgr5xQssrwTRTJKV4w==,type:str]
                                          query:
                                            params:
                                                - ENC[AES256_GCM,data:/g==,iv:rhACkT6kl4xMgn91RzfCx2CiR/QVi4Eoe1sk1SDIHww=,tag:CtOn69n3ODSKAJPYMr/h2w==,type:str]
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:kmlB0A==,iv:uvUcOfEsPrwk2pV6YHWYRhYGXcccdjc/2aYznQob/fI=,tag:jzk7QuCbOaJM/7TVrvDDtg==,type:str]
                                          type: ENC[AES256_GCM,data:Aan+mC4=,iv:OU1RVgYiJCfRGIVFTwgvCsRt6HvU6pUHaYlkptpfUvQ=,tag:VfVo4pddtDxDvrKTpAbvgQ==,type:str]
                                    datasource:
                                        type: ENC[AES256_GCM,data:FROJucMN8cY=,iv:SBHDJkGA+RCu9mEPiKo2lO6jA40dUxi32pJFi1Ra5SA=,tag:HQkc+gf7WYmC8epkcP4/ag==,type:str]
                                        uid: ENC[AES256_GCM,data:JMo2egpU/y8=,iv:8EC55jZSETXLxmtdhWvU5FwbYadnEmwUtpWK8EqLxtg=,tag:xMek3Wdx+9dtmwLLYMyeLA==,type:str]
                                    expression: ENC[AES256_GCM,data:Og==,iv:xk4DOGfxi8QgIDbWPPxztimR/nmc14JLnh9+A8FpBHs=,tag:YTMxN9jGOw0NiqzqvU+nDw==,type:str]
                                    hide: ENC[AES256_GCM,data:/ln/at0=,iv:otna1tV+3UIAM9vQosn2JWXYHNE+ynF+CI3j64Rh+wc=,tag:lC9cGV9QFpGg+v2UqSa1uA==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:1vvIxg==,iv:wEOAPaTd7MeuLlc1luD4syA8jRP+hXpsmL4Liey8LgY=,tag:ew7+qBbGOjrHlDdDNPQp7g==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:n1G9fhI=,iv:B5ZdLOoIHtoSsFIoR5YOa8Fj/D4vHUniWPoVUmbq3VQ=,tag:s/crdOlc65jKcoI3ewn3ww==,type:int]
                                    refId: ENC[AES256_GCM,data:sM2hhJED,iv:0PiLjrBUMT9e68YKszTza5GQpEHYzdpsnclDvcK8o2c=,tag:Nk3Igu1QeOM65HIHmdVeGw==,type:str]
                                    type: ENC[AES256_GCM,data:XD8aSxfjWYpd,iv:DmDeJs9ZK0lhnsFyvnBcSceI6gD0pgTB/IZRDvg9Aj8=,tag:DXXXTYQxA0EOH3cVhc7zYA==,type:str]
                                - refId: ENC[AES256_GCM,data:4g==,iv:P+dQ82ojfzwAyvGP+gghPbjC+yPT1VX/7qKxRitkKoo=,tag:S04eQ7j1RAjoZZpbsMiBdQ==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:UXR2,iv:6F5cNU21ZQVEJAzQkf/7LiLCmf1U/QdE0hLR3KOoJDo=,tag:cbtROA5fAq7AM5sgdW3KLg==,type:int]
                                    to: ENC[AES256_GCM,data:Kg==,iv:SXFX1qJzQrPvj90yR7NGt5jznKyO6vbtCUKW0OiCycw=,tag:j8oqBXBWTOpFZHqAcmGbCQ==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:VBTxkSAlv60=,iv:l1lw5O7dGZ++6U8vBDMm/ViL546aANz9YZehHZTzA2s=,tag:pzspNGVooVlYEanfoiGHNQ==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:CA==,iv:iEbWbLzdMlHVBnguUNVDhd8IZ3pgUbMBQPtya8BUM0g=,tag:ebV0IEjQjgjzrhl6teGNdg==,type:int]
                                                - ENC[AES256_GCM,data:wg==,iv:8NkmyVJXP0PAKIul3WqMSpfEedR+OYQMEmv6l7jgDGw=,tag:F4MgfxD1cpK9NE/sEhJ3aQ==,type:int]
                                            type: ENC[AES256_GCM,data:Ro4=,iv:ip2URJiheE/mpGHhKwZdpXwcjjI7/GKPirYq2C0Wo3k=,tag:o6tT6ruOZWy7MLweM8WZzg==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:KSEp,iv:RzYjmY8EQst5YYvw+2efVTqd3Aroog5aMwMkOc2lA8g=,tag:UQ0CWOIdhiPCaa76weFwiQ==,type:str]
                                          query:
                                            params: []
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:v0lb,iv:M5rHKpiMCxILCATByuny+qVBmx62AuaXADWhCnNUAZk=,tag:5Jm9ZTls0LpOKWQk4J/tgw==,type:str]
                                          type: ENC[AES256_GCM,data:28pwivY=,iv:d/yntr9NtRv7FAqCJu8ojSzFBB78JoZ8KVEwzdpZN0M=,tag:fjSM7SWRfjct0TdeodS6uw==,type:str]
                                    datasource:
                                        name: ENC[AES256_GCM,data:4DeHM1DG9QIqQQ==,iv:e46IKBXw2eNA/G+K37YCEhtTbNqDolqzzyAJ3JZ28/g=,tag:iqjCLaQcR2gGE53gSftsbA==,type:str]
                                        type: ENC[AES256_GCM,data:s5dZhxXvu60=,iv:JQF6R24iSpVqwdU2jrsns4Sd5x8g84bWTt3d0Ul/or4=,tag:DIYivVyMB7yXMAH7qv2QQQ==,type:str]
                                        uid: ENC[AES256_GCM,data:2WRN7twb2EA=,iv:Dqf3qoAU1BYEtMcjb4+hDZT0oMJ1mbbssmwUSJU67l8=,tag:rifyHQpLDTIM1sx8YN3UKw==,type:str]
                                    expression: ENC[AES256_GCM,data:TEWNP10=,iv:nVdNYgjz073cpNO8y/BY6NQBcHPzykh9jc9DFOulcWU=,tag:0F1PRR+FNEXtybA2fQFTrw==,type:str]
                                    intervalMs: ENC[AES256_GCM,data:poBtUw==,iv:6PdwzAG8EpqonZEy1kBXaPSQrppNZwrmoKEoWsY24Yg=,tag:FUQu8zmKiFBncVE//zK9Xw==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:vxDVK3A=,iv:heNu13WL9wm4IGn6qdtwjRc7W90l3Jhh5qdi/7jfvk4=,tag:JtRk53a469PIYZvKamZNpA==,type:int]
                                    reducer: ENC[AES256_GCM,data:1OV6cA==,iv:xEcadNX0OND6J/xXbU3DozBSFqh06F1fk1cw+LNeKlo=,tag:xALQkvNJ10JM+wNUoMuIxQ==,type:str]
                                    refId: ENC[AES256_GCM,data:iQ==,iv:29wt+vmCkH3OuHd7SflJ/VfZDKJSdfkHTkokBHXttj8=,tag:sI+23qpIJgxGvugxtr+0Iw==,type:str]
                                    settings:
                                        mode: ENC[AES256_GCM,data:4j4jjXwJa/2g,iv:gvEG1HGB3tydXEJYGUeCGr4Nn0bA0tklUJT82Xi7ZBc=,tag:EroFiQYa7nBEkXQKH5MJ+w==,type:str]
                                        replaceWithValue: ENC[AES256_GCM,data:uA==,iv:pfVAJcRlnaZC2wxY3Xy4X6TZKc/9S9NeNFwlh0Y+m5g=,tag:9nCMGHQLUbDGfpu3AsBPng==,type:int]
                                    type: ENC[AES256_GCM,data:MyCrETUy,iv:9zJF2JQzxxHFWduAPlX7NF6RJdk58pw01MQ+SfWLOps=,tag:mMDJk1/ilOd3ztl7XuNjEQ==,type:str]
                              noDataState: OK
                              execErrState: Error
                              for: 5m
                              annotations:
                                summary: Unusual logging for synapse.
                contactpoints.yaml:
                    apiVersion: 1
                    contactPoints:
                        - orgId: 1
                          name: MidnightThoughts Ops
                          receivers:
                            - uid: "1"
                              name: MidnightThoughts Ops
                              type: email
                              sendReminder: true
                              frequency: 1m
                              settings:
                                addresses: ops@nordgedanken.dev;mtrnord@nordgedanken.dev;mtrnord1@gmail.com
                        - orgId: 1
                          name: PagerDuty
                          receivers:
                            - uid: adz30e8814wshd
                              type: pagerduty
                              settings:
                                integrationKey: ENC[AES256_GCM,data:ffbSYi1/H5A+If87dBzAKFgAnHCkfd3gTG1oIk3DzSY=,iv:zE7lJv2DpPmpfzzMEYmcMhAJ3bplDqe6StwbNEs7W/w=,tag:9BOWF2+2o4rL0tq2FNTv7w==,type:str]
                              disableResolveMessage: false
                        - orgId: 1
                          name: PagerDuty Draupnir4All
                          receivers:
                            - uid: 3
                              type: pagerduty
                              settings:
                                integrationKey: ENC[AES256_GCM,data:2pPpty+Quc0Lf8yNSFn4L+NRT6PvXH5qVkt+jk6Grk8=,iv:v4rvrp1bPGJGWJJ4LsgefxzuFVx+np6cMcmPvDLC19c=,tag:1lfjuBXlVD3VyjzMk/cO4Q==,type:str]
                              disableResolveMessage: false
                policies.yaml:
                    apiVersion: 1
                    policies:
                        - orgId: 1
                          receiver: PagerDuty
                          group_by:
                            - grafana_folder
                            - alertname
                          routes:
                            - receiver: MidnightThoughts Ops
                            - receiver: PagerDuty
                              matchers:
                                - service_id != "draupnir4all"
                            - receiver: PagerDuty Draupnir4All
                              matchers:
                                - service_id = "draupnir4all"
            plugins:
                - grafana-piechart-panel
                - grafana-worldmap-panel
                #- https://grafana.com/api/plugins/parseable-parseable-datasource/versions/1.0.2/download;parseable-parseable-datasource
                - isovalent-hubble-datasource
                - isovalent-hubbleprocessancestry-panel
                - chaosmeshorg-datasource
            smtp:
                existingSecret: smtp-auth-secret
            extraSecretMounts:
                - name: auth-generic-oauth-secret-mount
                  secretName: auth-generic-oauth-secret
                  defaultMode: 288
                  mountPath: /etc/secrets/auth_generic_oauth
                  readOnly: true
                  # - name: parseable-secret-mount
                  #   secretName: parseable-secret
                  #   defaultMode: 288
                  #   mountPath: /etc/secrets/parseable
                  #   readOnly: true
            defaultDashboardsTimezone: Europe/Berlin
            dashboardProviders:
                dashboardproviders.yaml:
                    apiVersion: 1
                    providers:
                        - name: default
                          orgId: 1
                          folder: ""
                          type: file
                          disableDeletion: false
                          editable: true
                          options:
                            path: /var/lib/grafana/dashboards/default
                        - name: monitoring
                          orgId: 1
                          folder: Monitoring
                          type: file
                          disableDeletion: true
                          editable: false
                          updateIntervalSeconds: 10
                          allowUiUpdates: false
                          options:
                            path: /var/lib/grafana/dashboards/monitoring
                        - name: zammad
                          orgId: 1
                          folder: Zammad
                          type: file
                          disableDeletion: true
                          editable: false
                          updateIntervalSeconds: 10
                          allowUiUpdates: false
                          options:
                            path: /var/lib/grafana/dashboards/zammad
                        - name: matrix
                          orgId: 1
                          folder: Matrix
                          type: file
                          disableDeletion: true
                          editable: false
                          updateIntervalSeconds: 10
                          allowUiUpdates: false
                          options:
                            path: /var/lib/grafana/dashboards/matrix
                        - name: nats
                          orgId: 1
                          folder: Nats
                          type: file
                          disableDeletion: true
                          editable: false
                          updateIntervalSeconds: 10
                          allowUiUpdates: false
                          options:
                            path: /var/lib/grafana/dashboards/nats
            datasources:
                datasources.yaml:
                    apiVersion: 1
                    datasources:
                        - name: Prometheus
                          type: prometheus
                          uid: prometheus
                          url: http://vmsingle-vm-victoria-metrics-k8s-stack.monitoring.svc:8429/
                          access: proxy
                        # - name: Parseable
                        #   type: parseable-parseable-datasource
                        #   url: http://parseable.parseable.svc.cluster.local
                        #   access: proxy
                        #   isDefault: false
                        #   basicAuth: true
                        #   basicAuthUser: MTRNord
                        #   secureJsonData:
                        #     basicAuthPassword: $__file{/etc/secrets/parseable/password}
                        - name: ChaosMesh
                          type: chaosmeshorg-datasource
                          url: http://chaos-dashboard.chaosmesh.svc.cluster.local:2333
                          access: proxy
                          isDefault: false
                        - name: Tempo
                          type: tempo
                          uid: tempo
                          access: proxy
                          url: http://tempo.monitoring.svc.cluster.local:3100
                          isDefault: false
                          jsonData:
                            httpMethod: GET
                            serviceMap:
                                datasourceUid: prometheus
                            lokiSearch:
                                datasourceUid: loki
                        - name: Hubble
                          type: isovalent-hubble-datasource
                          uid: hubble
                          access: proxy
                          url: http://hubble-relay.kube-system.svc.cluster.local:80
                          isDefault: false
                          jsonData:
                            serviceMap:
                                datasourceUid: prometheus
                            tempoDatasourceUid: tempo
                            prometheusDatasourceUid: prometheus
                        - name: ES - Chat Sessions
                          type: elasticsearch
                          access: proxy
                          url: http://zammad-elasticsearch.zammad.svc.cluster.local:9200
                          isDefault: false
                          uid: zammad-es-chat_sessions
                          jsonData:
                            index: zammad_production_chat_session
                            timeField: created_at
                        - name: ES - CTI Log
                          type: elasticsearch
                          access: proxy
                          url: http://zammad-elasticsearch.zammad.svc.cluster.local:9200
                          isDefault: false
                          uid: zammad-es-cti_log
                          jsonData:
                            index: zammad_production_cti_log
                            timeField: start_at
                        - name: ES - Ticket Articles
                          type: elasticsearch
                          access: proxy
                          url: http://zammad-elasticsearch.zammad.svc.cluster.local:9200
                          isDefault: false
                          uid: zammad-es-ticket_articles
                          jsonData:
                            index: zammad_production_ticket
                            timeField: article.created_at
                        - name: ES - Tickets by closed_at
                          type: elasticsearch
                          access: proxy
                          url: http://zammad-elasticsearch.zammad.svc.cluster.local:9200
                          isDefault: false
                          uid: zammad-es-closed_ticket
                          jsonData:
                            index: zammad_production_ticket
                            timeField: close_at
                        - name: ES - Tickets by created_at
                          type: elasticsearch
                          access: proxy
                          url: http://zammad-elasticsearch.zammad.svc.cluster.local:9200
                          isDefault: false
                          uid: zammad-es-created_ticket
                          jsonData:
                            index: zammad_production_ticket
                            timeField: created_at
                        - name: ES - Tickets by first_response_at
                          type: elasticsearch
                          access: proxy
                          url: http://zammad-elasticsearch.zammad.svc.cluster.local:9200
                          isDefault: false
                          uid: zammad-es-first_response_at
                          jsonData:
                            index: zammad_production_ticket
                            timeField: first_response_at
            dashboards:
                default:
                    nodeexporter:
                        gnetId: 1860
                        revision: 22
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                monitoring:
                    forgejo:
                        gnetId: 17802
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                    flux-cluster:
                        url: https://raw.githubusercontent.com/fluxcd/flux2-monitoring-example/bcae1ef44963da89caabe962a93280c0dfad3381/monitoring/configs/dashboards/cluster.json
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                    flux-control-plane:
                        url: https://raw.githubusercontent.com/fluxcd/flux2-monitoring-example/bcae1ef44963da89caabe962a93280c0dfad3381/monitoring/configs/dashboards/control-plane.json
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                    flux-logs:
                        url: https://raw.githubusercontent.com/fluxcd/flux2-monitoring-example/bcae1ef44963da89caabe962a93280c0dfad3381/monitoring/configs/dashboards/logs.json
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                            - name: DS_LOKI
                              value: loki
                    asterisk:
                        url: https://git.nordgedanken.dev/kubernetes/grafana/raw/branch/main/asterisk.json
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                    traefik:
                        url: https://git.nordgedanken.dev/kubernetes/grafana/raw/branch/main/traefik.json
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                    postgres-dashboard:
                        url: https://raw.githubusercontent.com/prometheus-community/postgres_exporter/master/postgres_mixin/dashboards/postgres-overview.json
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                    minio-dashboard:
                        url: https://raw.githubusercontent.com/minio/minio/master/docs/metrics/prometheus/grafana/minio-dashboard.json
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                              #minio-bucket:
                              #  url: https://raw.githubusercontent.com/minio/minio/master/docs/metrics/prometheus/grafana/minio-bucket.json
                              #minio-replication:
                              #  url: https://raw.githubusercontent.com/minio/minio/master/docs/metrics/prometheus/grafana/minio-replication.json
                zammad:
                    ticket_statistics:
                        gnetId: 14222
                        revision: 2
                        datasource:
                            - name: DS_ES_- TICKETS BY CREATED_AT
                              value: zammad-es-created_ticket
                            - name: DS_ES_- TICKETS BY CLOSED_AT
                              value: zammad-es-closed_ticket
                            - name: DS_ES_- TICKET ARTICLES
                              value: zammad-es-ticket_articles
                            - name: DS_ES_- CHAT SESSIONS
                              value: zammad-es-chat_sessions
                            - name: DS_ES_- CTI LOG
                              value: zammad-es-cti_log
                    chat_sessions_statistics:
                        gnetId: 14224
                        revision: 1
                        datasource:
                            - name: DS_ES_- TICKETS BY CREATED_AT
                              value: zammad-es-created_ticket
                            - name: DS_ES_- TICKETS BY CLOSED_AT
                              value: zammad-es-closed_ticket
                            - name: DS_ES_- TICKET ARTICLES
                              value: zammad-es-ticket_articles
                            - name: DS_ES_- CHAT SESSIONS
                              value: zammad-es-chat_sessions
                            - name: DS_ES_- CTI LOG
                              value: zammad-es-cti_log
                    cti_log_statistics:
                        gnetId: 14223
                        revision: 1
                        datasource:
                            - name: DS_ES_- TICKETS BY CREATED_AT
                              value: zammad-es-created_ticket
                            - name: DS_ES_- TICKETS BY CLOSED_AT
                              value: zammad-es-closed_ticket
                            - name: DS_ES_- TICKET ARTICLES
                              value: zammad-es-ticket_articles
                            - name: DS_ES_- CHAT SESSIONS
                              value: zammad-es-chat_sessions
                            - name: DS_ES_- CTI LOG
                              value: zammad-es-cti_log
                matrix:
                    synapse-dashboard:
                        #url: https://git.nordgedanken.dev/kubernetes/grafana/raw/branch/main/synapse.json
                        url: https://raw.githubusercontent.com/element-hq/synapse/develop/contrib/grafana/synapse.json
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                    draupnir4all:
                        url: https://git.nordgedanken.dev/kubernetes/grafana/raw/branch/main/draupnir4all.json
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                    matrix-media-repo-dashboard:
                        url: https://raw.githubusercontent.com/t2bot/matrix-media-repo/main/docs/grafana.json
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
            ingress:
                enabled: true
                annotations:
                    cert-manager.io/cluster-issuer: letsencrypt-dns
                    external-dns.alpha.kubernetes.io/hostname: grafana.midnightthoughts.space
                hosts:
                    - grafana.midnightthoughts.space
                tls:
                    - secretName: grafana.midnightthoughts.space
                      hosts:
                        - grafana.midnightthoughts.space
            grafana.ini:
                server:
                    root_url: https://grafana.midnightthoughts.space
                smtp:
                    enabled: true
                    host: smtp.fastmail.com:465
                    from_address: ops@nordgedanken.dev
                paths:
                    data: ENC[AES256_GCM,data:X8k5MH0h4yksBiedXdp95Iw=,iv:7kE1JCdBG/x3saV/QGMwixPmE6GaE8Wy+Dew5xCB9tk=,tag:saqv4JaxdW+fYh734dZtIQ==,type:str]
                    logs: /var/log/grafana
                    plugins: /var/lib/grafana/plugins
                    provisioning: /etc/grafana/provisioning
                analytics:
                    check_for_updates: true
                log:
                    mode: console
                grafana_net:
                    url: https://grafana.net
                auth:
                    signout_redirect_url: https://auth.midnightthoughts.space/application/o/grafana/end-session/
                    oauth_auto_login: true
                auth.generic_oauth:
                    name: authentik
                    enabled: true
                    client_id: ENC[AES256_GCM,data:2va6K1w1aX1dwfT6fa2pln3XRS9mcV0IUzRqG2jefv5M/Ma7nPUwEpeEJcIG3I4QXGU=,iv:oS+gsWfc6n3RFcQJF37bg0w+8QC9hXKt0SQYJmGrCLY=,tag:zZAu8JhlYs2ebGXxAQYf9A==,type:str]
                    client_secret: ENC[AES256_GCM,data:cvQeGoLy0Fh676PJfs2gA3F/X2d9XLHNKFB9Tca9OlOeDlkTyADIqBzA6gc/8mUyXPDSZUAI,iv:rCQzRezZOJprZNunA6+enSrKMujlnzaF7vnbwLCZcE0=,tag:sLjqlgMjRsgJUPDKGuxbpQ==,type:str]
                    scopes: openid email profile
                    auth_url: https://auth.midnightthoughts.space/application/o/authorize/
                    token_url: https://auth.midnightthoughts.space/application/o/token/
                    api_url: https://auth.midnightthoughts.space/application/o/userinfo/
                    role_attribute_path: contains(groups, 'Grafana Admins') && 'Admin' || contains(groups, 'Grafana Editors')
                        && 'Editor' || 'Viewer'
            imageRenderer:
                enabled: true
        kubeProxy:
            enabled: false
    postRenderers:
        - kustomize:
            patches:
                - target:
                    # Ignore these objects from Flux diff as they are mutated from chart hooks
                    kind: (ValidatingWebhookConfiguration|MutatingWebhookConfiguration)
                    name: kube-prometheus-stack-admission
                  patch: |
                    - op: add
                      path: /metadata/annotations/helm.toolkit.fluxcd.io~1driftDetection
                      value: disabled
                - target:
                    # Ignore these objects from Flux diff as they are mutated at apply time but not at dry-run time
                    kind: PrometheusRule
                  patch: |
                    - op: add
                      path: /metadata/annotations/helm.toolkit.fluxcd.io~1driftDetection
                      value: disabled
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1esjyg2qfy49awv0ptkzvpk425adczjr38m37w2mmcahzc4p8n54sll2nzh
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB1UkE0WHhLWllYVmpUcXRo
            TjV4SklsSFlYaUwyakVVcHBsdVhOZEFxT1hnCjhoQzMwVnNNOGU5bmxRS0R6MkpY
            STNEOWF6bGFGTjVFRjdJQUhnL0MrUmMKLS0tIEZybHVsa1NhZVpFbnN6RXFwMm5v
            NXlwV015MHAzWTRqUERXaFZiUk9BYmcKUEuUvU/LTEEtMkNF8ksJP+Tu51CqL7Kz
            IoYXEKYGziKshWIX11Oo7LSjQJtXXaYWD9TWREUWFMEdHbLVvNv55Q==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-09-26T18:28:49Z"
    mac: ENC[AES256_GCM,data:FxgcDe1cBWNJYFs8CXYhEs4nXNPJuS7DVNWvK9JVg6p4VFjLw0ElPGYhIywnvPb4ei82LUIdS8ZnvWxgYvEXg1CRBNmrZYT8ZnrNxIZU10dZwPxmY3X59z3JWsyweFXsXla1AwfkPhj7juh97/b1DzDJyfZolW3RktPm/086Qp0=,iv:MQt5X5QCJ7DEcKOME7X6B+b8cbbGuGAMNBHBewhS0jg=,tag:DCZ4JgVaaNFzEDUaNhYiWQ==,type:str]
    pgp: []
    encrypted_regex: ^(admin_password|extraCommands|key|clickhouseDatabaseURL|databaseURL|client_id|client_secret|secret_key_base|otp_secret|private_key|public_key|primaryKey|deterministicKey|keyDerivationSalt|token|clientId|secretKey|installationId|installationKey|uriOverride|adminToken.value|password.value|sql_password|erlangCookie|AUTHENTICATION_PASSWORD|ROOM_API_SECRET_KEY|adminPassword|configPassword|adminUser|configUser|APP_KEY|api_key|api_secret|keys|livekit_key|livekit_secret|secret_key|admin_pass|admin_email|mariadbPassword|mariadbRootPassword|privateKey|data|stringData|PASSWD|password|pass|postgresPassword|postgresqlPassword|redminePassword|smtpPassword|registration_shared_secret|shared_secret|secret|admin_token|integrationKey|rootPassword)$
    version: 3.8.1
