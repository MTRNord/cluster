apiVersion: helm.toolkit.fluxcd.io/v2beta2
kind: HelmRelease
metadata:
    name: vm
    namespace: monitoring
spec:
    interval: 5m
    chart:
        spec:
            version: 0.20.1
            chart: victoria-metrics-k8s-stack
            sourceRef:
                kind: HelmRepository
                name: vm
            interval: 60m
    install:
        crds: CreateReplace
    upgrade:
        crds: CreateReplace
        # Force recreation due to Helm not properly patching Deployment with e.g. added port,
        # causing spurious drift detection
        force: true
    # https://github.com/prometheus-community/helm-charts/blob/main/charts/kube-prometheus-stack/values.yaml
    values:
        vmsingle:
            spec:
                extraArgs:
                    search.maxSeries: "3000000"
        victoria-metrics-operator:
            operator:
                disable_prometheus_converter: false
        grafana:
            adminPassword: ENC[AES256_GCM,data:AgXoBCKZ5L0JQsHxijCKygF/VgajaFCizj+s94DZ4kiVCY3DHyT6yMKfscp7IhSm0y7HrO7+nSNX3Zi+IUuqeg==,iv:tLj8fhjfmfr8rCHXQ9f01qUdK8Ll+eBw77bHZPj7FIg=,tag:dawwrreudL26KrSfcfYbgQ==,type:str]
            alerting:
                rules.yaml:
                    apiVersion: 1
                    groups:
                        - orgId: 1
                          name: Draupnir4All
                          folder: Matrix
                          interval: 1m
                          rules:
                            - uid: fdz35yf78i8lcd
                              title: Draupnir4All Synapse online
                              condition: B
                              data:
                                - refId: ENC[AES256_GCM,data:yg==,iv:90IwHTfFqOlve3QIpQb+OyhjzI8fKaFuR9LKiM+a05M=,tag:yShry9O6hSpveLMEdGxJZg==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:KtNN,iv:dkRou/rrJpAT5IO1dgGzPiF200NtZBZ5IDumAICYeQg=,tag:KpCBwE8BCJVHqYEnbHsVfw==,type:int]
                                    to: ENC[AES256_GCM,data:vg==,iv:MV149fNn4DPkPCx2eU+JpHVIY9U+JDu0vM5kjpgH5Gw=,tag:P2OiTuAJpJQySE8BQaioRw==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:/dJtL2WUZ8tCjw==,iv:qDduZYGOT9UCDpBOd0sHOjBmQak0Fqr0la/2i2AoGxQ=,tag:CuZLaA71zTNzl4qSMsm0kQ==,type:str]
                                  model:
                                    editorMode: ENC[AES256_GCM,data:jKuM0Q==,iv:/jaDqRMf789nAa9IFFbHlcAOtM23sFGikQKNvX04LHk=,tag:qlN6On4A6KZgrle83LEjqw==,type:str]
                                    expr: ENC[AES256_GCM,data:KaM1bNaXIGZUeWRt2NqLNzk+uIx7vdX/xk2anWVYmwyeKSDT9siFutcHlHUHArlNzT7xIZeFGjWkMR7g2O4r4d6MOreQpIiY8G4GHLQvJex5ixMJTF6J2pYolrrbv6ZMLy16hp5UrdcAzrD0uuWhLXEgB+VMqzb6UxhRyvEihDG18m2tPgcdfJ52T5+jItITcVI6u+rw2Z2l6h4tBwDcaNGo4rET8ytmOUz0I+Gq0hWSMNZRiRQ/lwrfedv0nmLyEz1YLjiPkJhj8c46sPY=,iv:46AyokNcvG8CfN7L/XcucB8totmENVyGHPqfytACh84=,tag:zWmM2TpoVJCme5JLDnuB0w==,type:str]
                                    instant: ENC[AES256_GCM,data:Ww/VqQ==,iv:BzwVtLZy+R3/iL28h4Fx1+ESqbHmtb7et5as33GNNWI=,tag:YPy++JzH9p1/91EI6xSTHg==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:aO3w/Q==,iv:nGXrXCVAATi06A79mH2LglXPgZRdMKvepzydLgTZgsw=,tag:i6qNdYKKss153HVkokb9cg==,type:int]
                                    legendFormat: ENC[AES256_GCM,data:lYGriRTb,iv:Pdt58sSFN1+HuPLKlz5sEfSGEigWurnzEk4Ey7QaDEY=,tag:zG/JCBQhj+nCMOBG3oCMGA==,type:str]
                                    maxDataPoints: ENC[AES256_GCM,data:3o0qV2c=,iv:7X/+lOZAve6FQlXlfwD47daX4Tv0ceaIi/A35b1aD7E=,tag:DRKv30mjhXIJKFXSwR+ZAg==,type:int]
                                    range: ENC[AES256_GCM,data:AEkNzGQ=,iv:UwV7Be0oIpYBR+klhuZkZByuz89iWict+S26MkrREfQ=,tag:mYO6QV3JDXZgzhjEaL98CQ==,type:bool]
                                    refId: ENC[AES256_GCM,data:Jw==,iv:hOnisbukNceMzuq31eH1q09u2Am2T28TnlxmeMEgwhs=,tag:BV6x8glxwWfGLs4JGwr5Ww==,type:str]
                                - refId: ENC[AES256_GCM,data:Ow==,iv:cuhCnDwp8tUNXPy4N0SG/mhjs4Er9/+JESdZMCcW3ho=,tag:2qUhnXg7idlXjOW2qEtGZA==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:lFVJ,iv:KblRksjtfmEbhX6tw3IdmMwidNJJVA2rg6LQc2iXrvw=,tag:I4stxvohMy04j8U51C1kaA==,type:int]
                                    to: ENC[AES256_GCM,data:5Q==,iv:LDf2FhrdnNCCFPFoZkIUvn7q/eVxCzQ6fLQOs195m50=,tag:r/AKIRxIGaT5ANKTL4cOCA==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:7jVsjN8DQvk=,iv:6+mkg3xq4MlxXprgqPXXOKu9nOCC2KO4UVIN5NHRvLk=,tag:rPE8PVA6hMoFB1SwM2D+/Q==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:Qw==,iv:b8Bs6AHbbtdDZKIxwJXI/hQSj5lrYW3NgJBUlUW0uUs=,tag:xn+A6/WfpZ1RioAsUW0X4w==,type:int]
                                            type: ENC[AES256_GCM,data:Bls=,iv:G/I/kCIIVVagPiJSlewQXK073dZH+stHEVDAIfpM9BM=,tag:NplyJBn5/kn8Wd3p6dYNbQ==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:kNB1,iv:fWIgfTR+vI8dOjyxdMZwm/IndGNbCBIxBF9NdO0TUx4=,tag:+SF7W/GCWyjiuVGU/wxLFg==,type:str]
                                          query:
                                            params:
                                                - ENC[AES256_GCM,data:4w==,iv:zAHq972Ur2rnVI0EzNxhY8vyho41Y4TL/HxPQCAsQEo=,tag:vFTVjhe7FGzJZ2Ac9uT7fA==,type:str]
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:/jSaLA==,iv:F439e8HchPvLNO/6qb1yy/psiQP1GFEXUrBMWmrsK28=,tag:mSanxu0GN7FJXGQrSES5yA==,type:str]
                                          type: ENC[AES256_GCM,data:KTqZcY0=,iv:4/CNaKtbuuIjovHWzUulKMEEerwjmdH6f+APKvNiVII=,tag:/L7rANzmWMBM41b4WU4JwQ==,type:str]
                                    datasource:
                                        type: ENC[AES256_GCM,data:41es6rOEPTM=,iv:819M1+9wyr+ZmnLAUr+WpAFGlcvfk//CMB43cZBgLFw=,tag:G6u4XMYsd+tSNlTtgYaEiw==,type:str]
                                        uid: ENC[AES256_GCM,data:1qlfN3mv9Vs=,iv:hBiBvHIrDqwMe+V3EzQqPXXsQ7ylIhDUqrbyQRZJJg0=,tag:1Esm9tzpE4K0WBHrP89RLg==,type:str]
                                    expression: ENC[AES256_GCM,data:nw==,iv:il1L0IQFBW0Jh71Yt4HPLid35GwqUnCBshJCASEaEaA=,tag:/yG3ZbVV2gCCafbvGEMozQ==,type:str]
                                    intervalMs: ENC[AES256_GCM,data:Fu6lQg==,iv:x7ooYbErWmr7Np33lNeH2x+qfrgbHETlacxj5adyCA0=,tag:8dFpYJdp/y6BxtjClkzVDg==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:/x+hAp8=,iv:89eEh0Cm1yNhvwmhbWLFLC9L27CnwvlxDrDBz1TPFX8=,tag:HTAATJHReQE+DvcT1jfEng==,type:int]
                                    refId: ENC[AES256_GCM,data:bg==,iv:kIfKXzBcqOuu6G71HK7vrDQWhWEpy93WRLOf88mY6Ik=,tag:It/N4RzvGc5bW0Qtw/2sqw==,type:str]
                                    type: ENC[AES256_GCM,data:VAVqJHvjrXM3,iv:0siA3OVwUvmSx7d+frVNTEkjP+d8morxNEyr6pH1Ars=,tag:I3+gKTdny6fEnuLJ/Largw==,type:str]
                              noDataState: NoData
                              execErrState: Error
                              for: 2m
                              annotations: {}
                              labels:
                                service_id: draupnir4all
                              isPaused: false
                        - orgId: 1
                          name: Kube-system
                          folder: Cluster
                          interval: 1m
                          rules:
                            - uid: d2b94d3a-2483-4be4-bf2a-2fd9f9fac406
                              title: Coredns Failure
                              condition: Thresh
                              isPaused: true
                              data:
                                - refId: ENC[AES256_GCM,data:oreJ2NQ=,iv:mYVBvORqOEBr348cD3/rhQHwRLQRZ2SY2KA3bVZXcaM=,tag:dk/aWjGl0bedVacRHLfzBg==,type:str]
                                  queryType: ENC[AES256_GCM,data:ziTwuw0=,iv:OvlDiuYVbHh+JfxYb4hnfn7cGEHV0otr5xrI7OJDMbg=,tag:RpN8SIzUhtS019efrE4vBg==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:vVBb,iv:HFWlrZ92I1zGhBc5wmJvNUGz4gmHOSs12+3BTMOgZCg=,tag:uGGkUZmPT/pR8jyRjtZTFg==,type:int]
                                    to: ENC[AES256_GCM,data:5Q==,iv:LrwEECyWOf5M9mpJEJzel5FQ9ajUUZY8JZIyMxLlaoY=,tag:tQFEPbuQ3Z82FAtpLYR6IQ==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:IVn+kA==,iv:0ZxRWCSahrova+XBnplreEabTcwtkk5Oy2vVpdw1MGg=,tag:VsYmDgj0twMtBM4Cw1WgTQ==,type:str]
                                  model:
                                    datasource:
                                        type: ENC[AES256_GCM,data:CmvIbw==,iv:znhuF56Fpdy422tL6VQ5/uvxrMYBon7Um+X3ThY6OTw=,tag:wxBEXupfRvfBVFHaXeGzkQ==,type:str]
                                        uid: ENC[AES256_GCM,data:DqD0fQ==,iv:gDKIjeK6caIJtG17Et70ktgZ19Cv4dwhs1ThZNnfTew=,tag:Bdd/lLVF21aUMk48GuEstw==,type:str]
                                    editorMode: ENC[AES256_GCM,data:erTTxke+yg==,iv:Y/gwll/y8NkYxktqVy+U5d1jq2jQgVv/N2nW6iT9wHw=,tag:N32X9/GtmO7rgui9JgQoPA==,type:str]
                                    expr: ENC[AES256_GCM,data:hrTwrNiE9RxLisjWClRf9BosbhYCrrXB8CbXMyQ2VUpHeGFGTQp6p+vXsIjC/GrUfu9Wa2V9TRfUK+4fDbclC7y4I2j9,iv:sGP49YFrC7WLft6pLNR6OZN5xityp081EaCptK1mXLE=,tag:BwDTB8/dmVPO8MGJv8fx+A==,type:str]
                                    hide: ENC[AES256_GCM,data:ivRfHd8=,iv:nijQqd21SmX1eqedVJIH4ZpuCH4UCZ40qrW+Fa3/f1E=,tag:gQIec27nuzls9BJBfHGF6A==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:fEAnKg==,iv:66CtTW4DxUSlw5ZmEuWmEZPLzzzTZGikbdPCwNCQC50=,tag:GLl6TXBCuFA0B0bRRzlVZg==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:elo3PFc=,iv:s1ored/OXriJv9OEDegcqtnZnPCCdfDodAnTR+jq7hE=,tag:0d4qo7/wRRsBTBZQ9Hksdg==,type:int]
                                    queryType: ENC[AES256_GCM,data:RDCaQaA=,iv:vZtpECYYMEUmrQ3r8f/0oF25tE4QhyAedMAyet/zH0I=,tag:lmnhfgv1YZyTC6mcVB8ddw==,type:str]
                                    range: ENC[AES256_GCM,data:mNXvBQ==,iv:q7uVovfSq3ioZbJ4kEq2NGP9dA4/Kyjd2L25eZFApsc=,tag:80rSyNcpWtJ5IvdMR9PRdw==,type:bool]
                                    refId: ENC[AES256_GCM,data:OL9sOTk=,iv:mC/NtLY+AI1ej1vnwrOyR8RMJtZgiLTdQtvvF5A5TPQ=,tag:5YbHe51MkcZVLQUxO5lhRw==,type:str]
                                - refId: ENC[AES256_GCM,data:cNcQV64f,iv:zSGF5fSq6TUCa6gOH8vtZIwHr4wyCsNTRHETC7TmKvk=,tag:QdZwszHxl2fR9019aTySYg==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:tVIf,iv:oTKCsZLqBmiPpDY7qjQvZjItIMYx+NsVYIu3GKrkQ6Y=,tag:dO1FD7njQSkbmu55ZwPztA==,type:int]
                                    to: ENC[AES256_GCM,data:Kg==,iv:aIAgOHWO24OxqbASm4eGM0ps5R1yZpwRUBKNOzOOa2Q=,tag:SB1n2QiMhh5AxMyiYBKX5Q==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:nGILhAujD0k=,iv:RRrRlug0x9Bc6kFP2UnCanTrdjqFUJomzNZCPlijuZ0=,tag:WRKxqCz1hNLbOVqaqh3qxQ==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:Fw==,iv:q1VKTRw/uysDA031Ke8y7kvcCL1r5e48GVGULhA88R8=,tag:DhrcO2/arw+7bNDt+4B6/Q==,type:int]
                                            type: ENC[AES256_GCM,data:JnE=,iv:FE6oSxINod8XKp8wU9k0LOImURJMk8pm4skBKAe+YUU=,tag:favYmv/OOrTLt6eBPV3jWw==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:+BpK,iv:JDtW1fd036N7ARE6Ah+rwJWorZZNQresCubXE09LmPc=,tag:5rn+raj9jPCRugpShR75NQ==,type:str]
                                          query:
                                            params:
                                                - ENC[AES256_GCM,data:+g==,iv:cO1xi5nc4hMMEaOmPqneZvK0vkJXEuwWxhDLZYQXCPA=,tag:g8j85T1pNBPeubxAmG1GOQ==,type:str]
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:AJc0iw==,iv:teiBlHt5W3blcC2XQqEBNV8/UvPT55Ku5EYbIY/gJQM=,tag:bpte942D/tlDUix0ACevvw==,type:str]
                                          type: ENC[AES256_GCM,data:A7zayUs=,iv:iUSd+kf90hTGUKMnOhGMwWh8Kd/q8hiH43SqP5x+Clo=,tag:EXYx0ky+CfUeCE4rxtqW8A==,type:str]
                                    datasource:
                                        type: ENC[AES256_GCM,data:KqRLXB6Tkg0=,iv:u5/tCx8mM03b4KpRWSB4+AjTjDF8cs2wsV891JVRQXo=,tag:GaDkgvbpe4nWnORvPipKpA==,type:str]
                                        uid: ENC[AES256_GCM,data:Il4ZzdtQz+M=,iv:F7SnhYK2nKwWNwpul/56c7hwJhv/B1JnC3d9ZdN2VoA=,tag:3uYZyTNU44Sxwk9vck7dLw==,type:str]
                                    expression: ENC[AES256_GCM,data:Xg==,iv:Z9ayr3ugenQjqMYY1/VEAgVR93rQa8hXpxzYaLOeYUk=,tag:LRUbwDi1PXnR1916pwG7+Q==,type:str]
                                    hide: ENC[AES256_GCM,data:Y3wO2h4=,iv:08iYa1CBUnZzv/8s/8DHCDrKjQR/MxJKre5bZynYr/s=,tag:E66yLqr2ZFIazTQ0vv7FiQ==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:mul20w==,iv:S1RDfZ9qKGRc/J3xBRlLlBsHGrAvyzczmVHZHs668pg=,tag:tDa3ky9pnEzX5VHKoEJEdw==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:WtqvRZc=,iv:PYHyjEFcMrRNH05/AKVB146ai8tq/wIMPwV+lekd2IU=,tag:fI3Ys5oXl63EmAzm3Omiaw==,type:int]
                                    refId: ENC[AES256_GCM,data:xycH5zTD,iv:d4+ToroBUoAc4pmg7KlLYVvSMytiLDc7ECnXwZiLG6c=,tag:nCnRwsFU1lkPaOniE3VkDA==,type:str]
                                    type: ENC[AES256_GCM,data:snpsoiNBD+Ty,iv:E4wdKQMcaqCAQRwMdKFUmJJWzoiDo8WWMAfu4VNb9Pk=,tag:H2rvdp9oD6phBwVUTJbCgQ==,type:str]
                                - refId: ENC[AES256_GCM,data:Vw==,iv:0sP1y5AX00Get3wQ9wuhFAB3nWY63HA+2QHHg50VM/k=,tag:WwWneLYYPW9qtFtQ/0VBTA==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:XCtq,iv:IS/M4RB8mG5/Dckjtay0fJdqoIPxwalxO8zIQjlCEAA=,tag:dfVbZ2QJWGIrlebjqO7trQ==,type:int]
                                    to: ENC[AES256_GCM,data:Hw==,iv:IDjotf5H5K15flHdYnLFdwoiFgzvK2VrmsyzQVRBVp0=,tag:xamHqkKTOpTl6f0Nhpfk3Q==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:3Wzeqv4ALz4=,iv:1/cyfYLuI98tkFM9KSPSipkpQlshlmkD/sQacVjJhZQ=,tag:aynGdxdKteYRuyKlw/layA==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:+Q==,iv:5Ki8dX7yrqoWBt14bMiG7VdHID++Dds52IqfO9LebAk=,tag:Ke0/yJEggEOHYYLAsABFOA==,type:int]
                                                - ENC[AES256_GCM,data:7w==,iv:y/40Y8NcP31SJamg5A+r4etxs8xRR4yUV/7pmfeuApk=,tag:LvzHTztlBFgGGEPPmuZN/A==,type:int]
                                            type: ENC[AES256_GCM,data:fzE=,iv:FgfryCLHrNWUe6BDo6TL2xqbVDIn4cX+ITpFL0iuCSM=,tag:LbQlz+HGzu+rCmfgEq0PpA==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:jweJ,iv:qtDShI95eKmQ2evnKL/o5RvTOKju4yDVG1OOuwuyyo8=,tag:rFqX4oepN88gLKTFVSBIFg==,type:str]
                                          query:
                                            params: []
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:9GDZ,iv:NWoYxPnA22BiTVUQa/zrZuzfP8m40IBz23saQa3sOCI=,tag:EZnr0CcEl7Eoup+WLgFzsA==,type:str]
                                          type: ENC[AES256_GCM,data:YLlAnq4=,iv:Vuox5R1a82fmaWBkdAIe8Y/g5hHvlzy7R+Yowd6v2UU=,tag:P3/RdD64Mw9BjrMXjutAaA==,type:str]
                                    datasource:
                                        name: ENC[AES256_GCM,data:Nb7n376r4WFkAA==,iv:9fpI1deVlC3p30mftrA9UqDQluv5IGRKG4xdwj9C4ZM=,tag:LI7VOv+pXQOlHRVj3dkUXg==,type:str]
                                        type: ENC[AES256_GCM,data:4PPGVRw+RFM=,iv:Ml514zQCpmq5giW08NPKymYGnIVNrea0og7PPQXsJo4=,tag:XUXf6aVoFxZdH6t08GpxMQ==,type:str]
                                        uid: ENC[AES256_GCM,data:zSNtvzrv22M=,iv:bt/Mr+3sCvHaHcBxTekaQ+b1SPQ07d1xIQnI2oZKlrk=,tag:ceCj1S3uc+xD4mghJDXEWQ==,type:str]
                                    expression: ENC[AES256_GCM,data:sbqL70A=,iv:WQdAdDFAAAWpmtiNSkVxJ9DzQeE1QKwRlLohKZjHzhU=,tag:ivQdXV113uMuygQKzlFkSw==,type:str]
                                    intervalMs: ENC[AES256_GCM,data:Tz4ohg==,iv:nBYQPMNg6Vcbyyil+gelEbUUhgRB2hT4ZprXLfoXaaM=,tag:B2zuxBLrlXClmhq+1ZuQ4Q==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:BdmJvKA=,iv:WCqZNI0m9P9IigIDRJg3s9zUCClIX/us4BPwF2WAplo=,tag:VZseMxZlzjF6jVpasSe+fA==,type:int]
                                    reducer: ENC[AES256_GCM,data:CCVulw==,iv:+3mxP7AAcj4MWvCTkfbPB9UZ5uUKnxYrIaP+xAUroNQ=,tag:gdUcU08K4FJqvRqFGOXbZA==,type:str]
                                    refId: ENC[AES256_GCM,data:QQ==,iv:QfHNu/LeoMdiKvML4ivij8wjjOJY1Va2TbV8KvApoT8=,tag:BPklcNbb3R7jOGfMhv7pug==,type:str]
                                    settings:
                                        mode: ENC[AES256_GCM,data:TWeDPxgd28/o,iv:ijKDi79rD9skZKT0MQT3/PrVEU7rADqOM/82ZA4Wdwk=,tag:G9vmNxXds6UKaN7huqJ14g==,type:str]
                                        replaceWithValue: ENC[AES256_GCM,data:pA==,iv:qjqCoM1drQmGDBTx6W5JoL5GpSup6o36yjv7oIPZ2oM=,tag:mq39NKoeekw0MpGoPNFBkQ==,type:int]
                                    type: ENC[AES256_GCM,data:oAellV43,iv:euKUdgUiiZWYB1UndQrEfPoNLHLT4fGn9KUvCQAoRIU=,tag:2wRJA+wffYeAfgEyP8S8Ww==,type:str]
                              noDataState: OK
                              execErrState: Error
                              for: 2m
                              annotations:
                                summary: High amount of i/o timeouts in coredns
                        - orgId: 1
                          name: Matrix Synapse
                          folder: Matrix
                          interval: 1m
                          rules:
                            - uid: b6db960c-c0bd-4d4f-b0f1-e1f216ec81cc
                              title: DNSQueryRefusedError
                              condition: Thresh
                              isPaused: true
                              data:
                                - refId: ENC[AES256_GCM,data:ULPMy00=,iv:qXxGsKjH4bakQLjWNzz25ZM+1GfgkzgkkNeToK1STEY=,tag:9VJx/SmCeia/aM9XZd9u7A==,type:str]
                                  queryType: ENC[AES256_GCM,data:aXv89Ew=,iv:BAdpwKVOuCYottq6srzzwrz/cOraK1HNJXZkU9VjjpA=,tag:OHVQUum/AlsZ5t+k8K22fQ==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:GpId,iv:LEJzzB1qHc4/QLM2l3Uf4qpjLAgS+XEEz426VX6NSr4=,tag:yddxCb8dSDzE9cI7Tsr2+A==,type:int]
                                    to: ENC[AES256_GCM,data:EQ==,iv:ca3WlUD23ix6nupD9Sfi26GeKpupTEjVblZ7TyRmZsE=,tag:MayScI2+yl/y4yMU7RysMw==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:6cG/OA==,iv:x7GyGKNpjOlZRAXwsWAt7d12EOlErm2QfdJJVXJ3LVA=,tag:rAw+VD9nw2xopI8MSoqX3w==,type:str]
                                  model:
                                    datasource:
                                        type: ENC[AES256_GCM,data:3svmkA==,iv:dMWi3j0B9xpUsIGp6oInTJ/9DWfgpFeKd4TlkTpPkJ8=,tag:POiwblZKeszi+ll0kiH0Qg==,type:str]
                                        uid: ENC[AES256_GCM,data:JOq6Dw==,iv:5w0x34C2OwWWkwlXQCgj+NXlAzKxHrZhBxLLLbNcXzc=,tag:ONx6Z0wsIpX9wVkkxHFh+w==,type:str]
                                    editorMode: ENC[AES256_GCM,data:HTClv9A8aA==,iv:Sbor7IKL7v2QvJwBdvS5v6rlaDKsweTKvKXKLT52x4s=,tag:fvpguyKU+Nag3NtcsrUL5A==,type:str]
                                    expr: ENC[AES256_GCM,data:XaKBxl92wJfqowPqg5n4eebJk/G7JeeNjaDTvr5e1ZSSZzIohpIqIoXmyvSXh7js8vLyqRAgVb2C2W1pFpqXECwoy+GdZ3tQOroiUowX14A=,iv:VdlDRngpUjQue6Dukf6G6Gj7yg8TjOz7d1d3V7ZzZrY=,tag:IR77hzIYoCcx9sJ71jGm7Q==,type:str]
                                    hide: ENC[AES256_GCM,data:fLk5fO0=,iv:Q8X8kxu5VTe09vmvSGhSA32t0bL65HTrNOX02a5lXoc=,tag:utWhkIMXSA9tTFpJkgo1WQ==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:CguJdQ==,iv:IsF33HT1iTcnWefipOAfAToHb1pP+D/8vzrKQPP1seQ=,tag:mw4+79tcu8xVm3pVd0Z4uw==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:qQwfYz4=,iv:10Oodn4ctvvbDwYWQ18tDIWIS4hte6qzPpinqSkjs7o=,tag:7WlhrjYQ6HE6nLR/jE/6Nw==,type:int]
                                    queryType: ENC[AES256_GCM,data:Yu03Y1M=,iv:G4XtZ+8zXzv2tbZWAOobnl66jC0es7EC5vxknUAPYuI=,tag:iHvm0n+iZ83DSs6uQiNkdw==,type:str]
                                    range: ENC[AES256_GCM,data:rW5wJQ==,iv:ZBDsX1GlDWMDm6khny1IKwcPlOVcl94YRslhjX+HH/g=,tag:UT2ooKNlHm51II9148VzoA==,type:bool]
                                    refId: ENC[AES256_GCM,data:dkPhoZg=,iv:K1e3jnStxTwwVcQYUs0Zdksi17plj+op0/aI+CeC++E=,tag:ho5eAbZUuaZ0FSlsNudwUQ==,type:str]
                                - refId: ENC[AES256_GCM,data:TwilqVx8,iv:8JjFjjYzMZmRQgcL41EYrKcpXWTW6ykalmHgEvagJZ0=,tag:dXgZ+ta4DiL92onb3FtnKQ==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:QCoA,iv:WdPf4t/AC4e2hjGJVmFcwH1HAhJImIE1vTCEsqf7g5E=,tag:TMhtNtBTt8ZA6H5Q2NEsaw==,type:int]
                                    to: ENC[AES256_GCM,data:6A==,iv:xTzFvxasftiWFpvJOwU7LmXOQeDfOONyr64cVb+JZWI=,tag:1/OBs1PJMoNJwyvm8JPYOA==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:vaCMNtU3pFw=,iv:YJixSuuXd02OEKqBkhPt+XzQgU+J1CiOx4Dz/pgOC80=,tag:fm/YkyKYONEX5Kp02CvGTQ==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:8w==,iv:GWyfp93A3lOrEynUtHnncedrSP90a4QWQKj5HW52v+A=,tag:5X5YUZ3Y0uFcCVfNzoZkxA==,type:int]
                                            type: ENC[AES256_GCM,data:3AM=,iv:JrGfgFwjhkh4+FXnlBGprhqxaj9+YCKNR0KjLsptqhM=,tag:sEun9oYF03gB0RM5df9M9w==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:0wk0,iv:mKaGzmPDgq8FdBxMjmVKdC3GcQFe+LjETJlaKfmx4Ok=,tag:eQlHNxRYRGSo+LdQy0eZ3w==,type:str]
                                          query:
                                            params:
                                                - ENC[AES256_GCM,data:3Q==,iv:Gu3yGm739lFB3B4wvJmdw1wB3g+bvat4ydJtLQlthsA=,tag:dzUvWnx0duuM39RuwTNKbw==,type:str]
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:uHqWOw==,iv:4lc/q5flM6bxQFIp869cKj61AjicOQLbyDlmZA9DqSA=,tag:Isz0eHa1+QbqR9DG2VATuA==,type:str]
                                          type: ENC[AES256_GCM,data:nggUcG0=,iv:xmNgXruHIg5s2Od9QD9b6qwtc05SnoVE7IZSHQWs2Ks=,tag:8CLTiWcl1tRu1JpmaRflxw==,type:str]
                                    datasource:
                                        type: ENC[AES256_GCM,data:Hus+QINCroY=,iv:/0bbwwRDXxT2AgtE9RR6UZfFLAjQUpuUCo40GSv92YQ=,tag:jB9QXJ95nPlFt0/ENYyuCw==,type:str]
                                        uid: ENC[AES256_GCM,data:zMT4+g1hQjU=,iv:VFrQASBQzfuUFaSnunAHJWznmsME9AQ1XiNAsKismF0=,tag:W7PI33B89utvq48ImnPpdA==,type:str]
                                    expression: ENC[AES256_GCM,data:fw==,iv:BkIHyhCsZPjSlGzbU0vf0rIQDSWDr3RUCBGPpgrHBgQ=,tag:XFeA19qvflY9LLYGKfq9hw==,type:str]
                                    hide: ENC[AES256_GCM,data:AGW5cms=,iv:x9KIinlLHZFrtFjsVjT2+Gq8kqGh02IpzifjIJ9xAr0=,tag:xp2ftz08iMAl5EExgeyKnw==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:0QU8mw==,iv:IG/Kj1dalWmMlmnt+UsNHuJpmo2VASs/yQ1vciCvxFg=,tag:HpnKw3Am8sGMNZx36Phvfg==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:X8WCLHg=,iv:EAazCBgfnx8/fM55FGBWQX5D8wEMVjKJAR6OPL98IBU=,tag:Dx683abLTr0gEk6YXxgIcA==,type:int]
                                    refId: ENC[AES256_GCM,data:RuAdsYsu,iv:RXl8K7IL4l8Je8D+Y+MJlpnHtmcDnoBdZUhk+x4KJD8=,tag:ozzdHqOKtNCMpDjxH33qVA==,type:str]
                                    type: ENC[AES256_GCM,data:nfX14odAStTg,iv:w/vw7Gk1Y8zTTPqbZtf0cU5s1X/OgDdgt7baMR13Ws8=,tag:/OEeRMH4RKIUJ00n9z/wzA==,type:str]
                                - refId: ENC[AES256_GCM,data:Sw==,iv:f9VtkCHOZs9qi24ctsQ5IL9e0FjLUarr7CqJLZhWLww=,tag:VmWB6fJpLTVS8X0U00QpHw==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:CRjH,iv:5RVHzC3ysk5dRlIZT5f+qfg/ZRD/oC1vQP1exLBtz8A=,tag:8IG+0xi5H+qMd6mUJYOZsQ==,type:int]
                                    to: ENC[AES256_GCM,data:YA==,iv:PViYeEn9hl9l3IqA4BuY3KV7mfRpf5s2WQZOkJqW1ws=,tag:fLqlHhho5nw3K65EFFoq7Q==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:CV74bt1c/MA=,iv:bwX9IyY0HcEeNj/NRDzg4QC7uurx8nciec869RWukVg=,tag:+NObVaYYYYoMtUuWQQMZEg==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:2Q==,iv:/5OCcbLabRKO+TJbVYf+/z+FyPFpge5bf6cMH0Eb6uo=,tag:npxNOMLsN4Y7jGWRyVgD+Q==,type:int]
                                                - ENC[AES256_GCM,data:Qg==,iv:FRvPRNnTh+8pmNLELko0xc8H9ysN5v+l/cwjBqa4pWA=,tag:bDt3HU1uT/fM8gnDEzomWQ==,type:int]
                                            type: ENC[AES256_GCM,data:OK4=,iv:kZ0maMAGjtzZZcbdaPHZgHxs/8RChqPsmZdAEyJrLBY=,tag:e5Q61soF+kR8pm8yIJDIPA==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:e4gP,iv:OMh5Onobd1PEcnYR7e+9lVbnmn4be+FWonBBy9avElo=,tag:3JywhTFdScwYhM9RPBNzyw==,type:str]
                                          query:
                                            params: []
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:UP9f,iv:ybkbOTx1pzYwFm3Cr4YsQQ3q+/PoNfw89Sxt67lL4eY=,tag:zdZ9KABtyu+dhGkT9TSqiA==,type:str]
                                          type: ENC[AES256_GCM,data:sv5WLNY=,iv:hHFZwEimFEOBpvjRHzA5c2TdULASzVx9AujSbImYZks=,tag:MGUcAmgec8D+RdgOW8aS7g==,type:str]
                                    datasource:
                                        name: ENC[AES256_GCM,data:KfuitfQh7Aje0A==,iv:kF0xnCZPzmaaSQsBQkwTM2ehITMzuyZYrdTkfsdbXac=,tag:jHXI0NUUj30cfAWK+GVCMg==,type:str]
                                        type: ENC[AES256_GCM,data:wTpLTlafnVs=,iv:nOPbP6xCPubeC3hfGS6LZqWFfgwRHqLlG6V04gYqGYE=,tag:zQEpWtsXVWDsy3oyJcPSeg==,type:str]
                                        uid: ENC[AES256_GCM,data:vVNwsAoSlKw=,iv:MiBod10E0bd4qAYQDxRbA1PXsNVOooZtIPSydPwggoU=,tag:bT5A5khPWMWY/+UuflWWAQ==,type:str]
                                    expression: ENC[AES256_GCM,data:OxCbITI=,iv:kvqiLEjHZjzJJd5BCH7QdYHgJF2MwmPBdn6Vrj7fswQ=,tag:Xg7TndpZu+3SYI6ywLfsYg==,type:str]
                                    intervalMs: ENC[AES256_GCM,data:x+xuaw==,iv:GafxkjnyzzQjP5HyOs70P+TCTY+W354fA9gW8eDVqfI=,tag:ZdIuuf49Wf9/phhNoA0bzw==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:hxZltk4=,iv:p6dEgb2bvo4YfcRanf7cpIzC5RnP32Mk6fwv/xSqiyQ=,tag:TPiD8oZMnycNZC73GV8Qwg==,type:int]
                                    reducer: ENC[AES256_GCM,data:2kDBhA==,iv:vSD9mfHD8DPzJrs/DZ8jDh5C9bvlCav9Xbz1qSkfMAM=,tag:iTPdTMMQALnkfakQ2iTzOw==,type:str]
                                    refId: ENC[AES256_GCM,data:Kg==,iv:EMk2oSVUbX+0qOt7FE7jN/dIXgofmwHd1oSiPsxltcA=,tag:MdD1UvcQEtJFasoYoz+k3Q==,type:str]
                                    settings:
                                        mode: ENC[AES256_GCM,data:KLTIWFRo+bOS,iv:Ls9VX7mWfukboAywxLCtyoI5SIZXPq9vonqE+Z+W3Fg=,tag:gp7ouyiHhCtbuVdtt5Pu4A==,type:str]
                                        replaceWithValue: ENC[AES256_GCM,data:Xw==,iv:hXVZh6/iG1n8xTxCmqK5GLSg3w2QnXrMh2uXG5SR4QA=,tag:ToPKXvMzutUuw0yPPo5F5g==,type:int]
                                    type: ENC[AES256_GCM,data:hV1La6WY,iv:0qexp6VLi52ipER1sWeslzHjez2hhL2sH35l8QFPkCA=,tag:Jc4yXEzjFPm7B26NrjD5Ag==,type:str]
                              noDataState: OK
                              execErrState: Error
                              for: 2m
                              annotations:
                                summary: Matrix Synapse DNS Errors are higher than usual
                            - uid: de30a1da-84da-45f4-a4a5-d641dbd92e6c
                              title: psycopg2.errors.ReadOnlySqlTransaction
                              condition: Thresh
                              isPaused: true
                              data:
                                - refId: ENC[AES256_GCM,data:AqXkaTw=,iv:h7wwDcMzm1CRh3uoecrBNt4qltU1/nlYqEDNQYIDVuU=,tag:Y/L/EmEVkrOUEmssGrqckw==,type:str]
                                  queryType: ENC[AES256_GCM,data:V7GPWNQ=,iv:P4MK7rGVVo13G/BlxFnrarJhskbtZwIACmLF9sR1Fwc=,tag:wQo9hvsJ5lcigX4cULozkA==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:KOi0,iv:75X4Kh6EeEVY6I8JD36i0yInJxdX2Zbagshz22gW34E=,tag:VTWk6C69ifVkKl78ZWiGtQ==,type:int]
                                    to: ENC[AES256_GCM,data:9A==,iv:jgyesBGE1dNy5k1HlJ0wWZ0KuZxra3eWZWmbYIBjpR4=,tag:evW0fKIGgRYXbF0fz87Haw==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:XqQQaw==,iv:g8OdtnUVRVZh5aZVsMoptsd1fMw+3LhvsTVkP0DYaR0=,tag:T7QLROMBFxB2uOVf7VOBMg==,type:str]
                                  model:
                                    datasource:
                                        type: ENC[AES256_GCM,data:KTQH1A==,iv:ezJH8yMwY4i6cabdNwIwDWeLKfI3wLT0kZO16l7bZNA=,tag:ioWzL998c/EowQpu/NLSvg==,type:str]
                                        uid: ENC[AES256_GCM,data:o5FDoQ==,iv:QnGO51vyevgXDFZhfcm1Ooxy6gZPoC0rR7IOmUr/Cv4=,tag:fVavdNYl/3kV3DzeWNxhjQ==,type:str]
                                    editorMode: ENC[AES256_GCM,data:IFgkGAlLeA==,iv:K+RyIUR879apfQoMcyGhIdXUeeV7A2iCIx8F/WQ3Pr0=,tag:yu7wD7dobFX2dVsO/Plnuw==,type:str]
                                    expr: ENC[AES256_GCM,data:blsfEZQC8On3kGiPrvAwndmZLUaovvlPwOagdqgRoOdWB68whzR0iwbZSTC+zZRfeU2V3CmTDjzbRk0B7rAoG6Wz+NC3AXxLoApQK0L13ZGSw9LzXN7UxniAF5ZiaryN93E=,iv:FKN7k/3/9hoHJu7rL4rUUgBWTsokje2I2sFu+sqILjc=,tag:cWDR6Dd73BerPRKDXvUDuQ==,type:str]
                                    hide: ENC[AES256_GCM,data:GrQ5uy8=,iv:KFMPTF8Pijx9E8c1yG0EEjWF1w1Nil8hK8qqu+enZ38=,tag:IsrCPlFsy4yj1MpPQqFSVw==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:V0hGRg==,iv:RLxoXHYIs1w3zmhNhPP6/LoQicNe/gd1rS0732iFeQ4=,tag:D80g02d7CJdlbKowLK08Ag==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:8tNXo8w=,iv:jKvjpeDQ5PoxZgtgOJasgVwBo16ydWAUeNrektD5Z/M=,tag:hXYnk8v7Tdzs3Awi4IQ/qA==,type:int]
                                    queryType: ENC[AES256_GCM,data:OtU6eeM=,iv:7VY4VhaxBSHX4Ov01Wg/CEb8qIa8M+UQ5QygwviKE8M=,tag:yblGuSOqo+z8m5oZzDIm0Q==,type:str]
                                    range: ENC[AES256_GCM,data:X/35Mw==,iv:GrP9QTaaXAQBDW+ROcttIARp6RFzVzKw3Ttozu6J4pk=,tag:rXhat+Pm3T0apum43lUQ/Q==,type:bool]
                                    refId: ENC[AES256_GCM,data:XZOTf4g=,iv:3hbtR7hEu0MoOLdrwcWkUfIFuj6Z4gYbQkgCTEBbokg=,tag:79S9n/wxMIZaTMTpypuCuA==,type:str]
                                - refId: ENC[AES256_GCM,data:eakf512/,iv:4p8DcGcFtocalivbog2ZGjanyZ94mDbF2h2i1N/kyfA=,tag:zQSNQ9QITUqiClked4rrdQ==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:+9BU,iv:kwdPo9B2WGJ6DNbHsjzdFGArIMaCOblPyb1j/nyGTNc=,tag:buFBMkc1550CET9OsINHMw==,type:int]
                                    to: ENC[AES256_GCM,data:+Q==,iv:Xn5o9dkKT2IwvmsRj0peLcF2iSApaZLcqixChi/oxu4=,tag:nkgXD07L2igsMCL6BRxFJg==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:CIVBwqDbtdI=,iv:np0nyGfK7ZeB2S8DTRHMN/Iq9LCdv5xhR27+GD3yYOs=,tag:Aez92YkeJTgh2mXA/08jWg==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:bV6O,iv:fPJbSoZUBwsC7ROhFsBZXJhlcC/oNAiTTZFuS1ERCvI=,tag:IVIG/cDPn2BVRMCF3CnlRA==,type:float]
                                            type: ENC[AES256_GCM,data:1OU=,iv:rVZkzXLzOwOBpGUIP92rMjsOLHp9IhI/SbOGMmOzsbQ=,tag:aH1PE+THiobGa9dQ58QbuQ==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:tuM3,iv:Eh6rO2cjvWQqC407j7byAYNck/MSulKFqRD7uC2+41k=,tag:+FqfRrZbFWJH85qg6duZQA==,type:str]
                                          query:
                                            params:
                                                - ENC[AES256_GCM,data:7w==,iv:E11PxCcXH5IASc+pyKq4PhKbE/uCrKuHmCmMw+fEyJo=,tag:D4t13ioxZLrCv14VCDUY1g==,type:str]
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:xEoOGw==,iv:GdpLrxvANUtxHB1x7wmBY+iTUEb4pyosVmx1Y1C8nMI=,tag:FyjZnxrcBw47kVhNjMH4fQ==,type:str]
                                          type: ENC[AES256_GCM,data:KMWUtao=,iv:01FAuM69wurt9Wwu4DgV2vWNfLG+iA2yjhmbM+zJzZE=,tag:WAh0NYX5zD/cnZv3D3wbQw==,type:str]
                                    datasource:
                                        type: ENC[AES256_GCM,data:hfZDocLqWLU=,iv:FlOkjpB65zV7sg5ZMGp88GSPeluQLU2r5N7IlErfFbc=,tag:kxCvzjTFnSuYiHpuO4k6mQ==,type:str]
                                        uid: ENC[AES256_GCM,data:ooESZVBsbWc=,iv:NdQmzLMP4x7DPckc5oMZays8tJU7maro1f9tdUenmNY=,tag:jMxp6Xd/xLsfMliD1k4peQ==,type:str]
                                    expression: ENC[AES256_GCM,data:yw==,iv:HWrwApnYUrwzvid+FZMBSC6MoxZCIb2fjTyEQLvTNuU=,tag:OhJzd7BMSKFZ8lnUUxL5tA==,type:str]
                                    hide: ENC[AES256_GCM,data:4xteJ/M=,iv:Dz78ym+igBJYy0KYPa7YC7lYRupdAruFHZhBWQKAJfk=,tag:jJ+5s8SfK4vveh4FvShMSw==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:rhSAAg==,iv:a6H/D4JNmxLf4GcLUCleFI52cGD/B5i2Go+jmK/HJ2Y=,tag:Seld5rAHdobK7P9Bnmlbmg==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:f2vicYo=,iv:57NUc/q15N8+T//3gZ1nlWdK9Ipx+OXcXDhXBQMZJw0=,tag:txY7dRrXAWL4BIp3czRxEA==,type:int]
                                    refId: ENC[AES256_GCM,data:tf59W6kO,iv:yNVUzuE6vchnByht7npXbf6IM4/7SVYzIDBMBiLsgF8=,tag:FMEpOahsQkID7pmVYgCM9A==,type:str]
                                    type: ENC[AES256_GCM,data:ttQjjUx5ROfl,iv:pQPvOyY1u/13l8xS52UJTFYT2PQwUFs17WB0C9HLya8=,tag:kiPjzma1zarb/W7k2d4R6w==,type:str]
                                - refId: ENC[AES256_GCM,data:KA==,iv:YNgfPLLDW6QRWud9MlReSqTe7WsrUE30cCBKzZdK8gA=,tag:2FizT+FLxJY1PFA+xkNCiA==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:qbr0,iv:k+j9RvHZLt3Y5w3g76YVqqP8DANJcs0HO+Kbuh4wGTE=,tag:L7vSV1ImeU77JezBt0J3NQ==,type:int]
                                    to: ENC[AES256_GCM,data:xQ==,iv:R8SGb3lU4gZFpjDxlZE25FM0ScpWtgqWxXACvnsZQ8k=,tag:foqCH1NnUkvvGBffUXI4IQ==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:fGprREbT0cs=,iv:SOmgwNfr+jiwgBKiB7m28F8+nhFS6+6Lom+3eg1XpgU=,tag:mIGUnbwy4olvcTxIxmnpgw==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:OQ==,iv:x6dI3bboI+MspQl6lc53jPMU1d5ymAkKIEopzb9jgIg=,tag:LuVxytcrPNE40ZtdbwZYeA==,type:int]
                                                - ENC[AES256_GCM,data:lw==,iv:l+P2qMeb2bP8FhQnVAe3tCnk6u5yj+DXUbC91ZwkW/M=,tag:zKR2BvEuONPlVf526NeWaw==,type:int]
                                            type: ENC[AES256_GCM,data:n8M=,iv:yAx90vUd3rMm/f1h4p8is+0HeOkIUTZBEGIamrDn0tI=,tag:W+SF/LnC7QHcEzLgQvn/Gw==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:L5zn,iv:mS+31s1y1o9uDpsZErXXg5PHHl/IWSY17sdY2hUsMpc=,tag:1BXBo/CFJOaRD9wHgkX5aw==,type:str]
                                          query:
                                            params: []
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:4yoO,iv:yImbmW9B8pcWxQpMtBYLAf5fCRBNmU1QhNsDUaVL79Y=,tag:tYR6rQJFE7bsf3fQjGNOkA==,type:str]
                                          type: ENC[AES256_GCM,data:btFp1iY=,iv:UhUhnDa30960T+uPj4AgKAZUYE5j5827HhEI2FS0Xp4=,tag:9Nb0jJnR6g6XIlBdK4T6Ow==,type:str]
                                    datasource:
                                        name: ENC[AES256_GCM,data:wrQXtVOZ/yFjrw==,iv:BgeRnX4QWRBorI3BngeYKtctZ+xNnUaBRW6H1vHQyyQ=,tag:0GMCJFuNv2R5D/U1qk4aAA==,type:str]
                                        type: ENC[AES256_GCM,data:22qgCRqILyA=,iv:++YrdBCY4G1z061MOQbwQbQ/6ypl0bvBxJK3n26WBlY=,tag:ASdKjSD5+RrrEAxeRDzXJw==,type:str]
                                        uid: ENC[AES256_GCM,data:Cn3n6aU0drk=,iv:F/HkzJxq+TL0K/NQx5mXidw7C4bk05VZ2O7CGfuOvb8=,tag:e+JFxlVus9AYKJBs4KlJPA==,type:str]
                                    expression: ENC[AES256_GCM,data:Zjh/2xQ=,iv:kqLoj37i0hOXbPx5tgMxIQPya+P5QTC4c5ouxsWEV0c=,tag:v3aCi8pNleWKcrMqFRjQGg==,type:str]
                                    intervalMs: ENC[AES256_GCM,data:UW2VYQ==,iv:iJ33g1Ao792npD+Yp1OMpToonxgGdtsqTu34nEP2UQg=,tag:uNNN92QjLF1RBitlU4C1BQ==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:ZueZnpk=,iv:V1cPpd/GtPTGNeXMQv0WrOFKTksbp8o5Qb5egnlDhdM=,tag:R+wBskH/QvwVV3DpuHbOIA==,type:int]
                                    reducer: ENC[AES256_GCM,data:ZojPBA==,iv:8xviuUCKeHv7a1DW/Q2SArHtcnqjigj8Pw8ilW+Lbx8=,tag:bm1RVvbf6e0WDN4Er94hVw==,type:str]
                                    refId: ENC[AES256_GCM,data:5Q==,iv:RUVZCr1XQE2R/hHOE1MpTgwIJV2wTo0nz1jhFWSqfY0=,tag:j8cC2YRLI1IFqvdzykCa+g==,type:str]
                                    settings:
                                        mode: ENC[AES256_GCM,data:37FTUoOSbyPe,iv:GCR/8YHQ5QdDndUhHMlXUz1vGuBZV58cX8r3i+1E8wc=,tag:9txOzIJiHpgXPDnVGAguQQ==,type:str]
                                        replaceWithValue: ENC[AES256_GCM,data:AQ==,iv:snGKDVfnv0gPvZ1J1hTjJkLLyBQk92qshOzwLmkUoyg=,tag:nmicUfOv0ZX+ZRMAns10hw==,type:int]
                                    type: ENC[AES256_GCM,data:n4VJl9jy,iv:xE8EyoYCJKeiTgnIkPhC/4Emp2OUWZtX9Hk7xI3gJBg=,tag:njF6fyQW/Vzd2X5DuB0QSQ==,type:str]
                              noDataState: OK
                              execErrState: Error
                              for: 2m
                              annotations:
                                summary: Matrix Database rolled over but synapse crashed
                            - uid: d16dc343-31d9-466a-bdc1-c2466b0bc18f
                              title: Unusual synapse logging
                              condition: Thresh
                              isPaused: true
                              data:
                                - refId: ENC[AES256_GCM,data:fGM1HIU=,iv:vyBjQAkLyYmPhNUbVhmptfLTloKFWTkNNJH4AqUS9UY=,tag:KYh5cjoFnXD6Tv+FDxs6kQ==,type:str]
                                  queryType: ENC[AES256_GCM,data:erMFRio=,iv:0hzINWewoJtE6CuiOaQD826TAD8T9PC9xYQD3tICkIg=,tag:16yMD9cAUZjSsAfmzCoI2w==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:IM6z,iv:JvMgJ59xoggIbGHb9oUCaKpouob6qv1eMekHBfuGhv0=,tag:q+Fp5Bco32EV41s6USCPxw==,type:int]
                                    to: ENC[AES256_GCM,data:3g==,iv:9zjxlFwNto4vwvkEX9zOPVNUpTPkdnij02DbtGtRTJw=,tag:AG8p5RQ3hKkd/eTSPFhPHA==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:bBIkVQ==,iv:vE3i4MeASPQWJawMXcGao83DXvGv5PrBU9bYMeBOdTE=,tag:4gcESkIRv/4hjENO1OdstA==,type:str]
                                  model:
                                    datasource:
                                        type: ENC[AES256_GCM,data:ROavfw==,iv:tHVDfQqY1Y176LYe1vTRA3E1KUEMUu7szDu6LkI4I+E=,tag:ollMYMoPrnr1v6PIV35rPg==,type:str]
                                        uid: ENC[AES256_GCM,data:yvB8VA==,iv:qaVNcuqUvWfyyhaBDOYSkLiGj9WVdQzcFpRD4pXZdds=,tag:NfDNrSDiAdFNY6PU4U+eow==,type:str]
                                    editorMode: ENC[AES256_GCM,data:57/z8MOdQQ==,iv:irOqObS83klIU8IXi4gKWblNS+M7XyPQVd4Be6njJ9I=,tag:DaYx+ETwNKr+HV2px2KvBg==,type:str]
                                    expr: ENC[AES256_GCM,data:28ZlclTnv3ox0OYxTcZqJFmIVtdKjZcXdTwmdTVcIErFFz6w7yeEKl+fP3Qf+moBXWftHJw2ylOApPMxLirqRoycKwv1T2NhD4XTIEnmCBLcLbgxoq/KiHEpQJvf8ao3Q+rIVqG3Jr26ZUB+CPhDmR8NcQsMdrzObuea/9HIorSHc+cdDIkLbGONQu3v1ZJ661bjEc38LzHZNUf9bfRHPgo6LfM5l6P0mT0OuAg=,iv:/BwfexB05UlcuB1/9GJTqwUvzZpgu0jU1eHhRk6LOQo=,tag:UmUv3twr18DjFlwd+cApaQ==,type:str]
                                    hide: ENC[AES256_GCM,data:xZzkXC4=,iv:lsw7biUPujkYkz8giB5zUG5/h/8Wn9sVuUUKCjwafDE=,tag:Qz8O7Jwrjy1ToUFF6CKb1Q==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:hMAhPw==,iv:rNzTAKh8AOCsE4Qsx9or9WYquVWIfKYfCmEPtjx4xZ8=,tag:BWYE867XS0yjN0+Bn8Mt9w==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:lF3caKw=,iv:0o4ZZGl7ssvl9LX/4KvIzYO2SaErNaxNZ8CmVVXW/8g=,tag:fVsQidfsj6YnMW9FLcvDcg==,type:int]
                                    queryType: ENC[AES256_GCM,data:4d9ek64=,iv:3+n5vxrV1NklkinT9up4qf0CuFw/GJxRTu6B/dPSAR4=,tag:EPdvGd5pJynH2eV+wlWK+A==,type:str]
                                    range: ENC[AES256_GCM,data:HY5JlA==,iv:vrMrhwvJLj3gyRJ9pt2SHURR47TG7Ds2yyPeTlNs5AU=,tag:6VrDxZ7i9a8B9KncuiQkVA==,type:bool]
                                    refId: ENC[AES256_GCM,data:6qlYFiA=,iv:+Ow958zQTRmfyjahIuaOat/NeupTRoNZezeBFy23aPg=,tag:XAoWFClmqZvfNp4z/btpjA==,type:str]
                                - refId: ENC[AES256_GCM,data:90gGoiqh,iv:vfWjWzV7DoGIEPGwL7tD8cLwT+73HHDPGN8famri8XU=,tag:Np9Kce/ISrR5lHINYPFz3A==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:Fp9C,iv:qUOoax1u8zRQiO4jupAFPTcTibU84RcOD3laD9ssZZ8=,tag:uHi6nXiovvIhC+Dl2+Z4yQ==,type:int]
                                    to: ENC[AES256_GCM,data:Ew==,iv:Fhahdxei0Ma/b1KT8/sRoxtbw95di2mel72HPQHXCRk=,tag:Bgbnw0cE6Wiwy2hPgC51Rg==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:cyjjjZulOwU=,iv:fQu1y7vvzjc1s18BeQWeElQkjjwDMgGNLdqyxzNrskk=,tag:iUBXsdhpFsjqRLhqz7+Vdw==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:AZ8=,iv:5wgNh2D9OwIayzwUNhme5uky0ZKaEQWg0dCcQE52KSU=,tag:6ryGzozV0LH9TnhQnhWVdA==,type:int]
                                            type: ENC[AES256_GCM,data:Dd8=,iv:ygYmyKhxEEAz0zu3TY8Q6Z9eR9ZFAXU9bwTlccu8rP4=,tag:HWiixib/DJqjpSiwpJJ1UQ==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:ZvDV,iv:ACGEiLiEpHLMmCTo1IzeyhG+h8T9gmbt0Rm/VE5XdBg=,tag:vv3X08bRaH+y2yY/NpGOJQ==,type:str]
                                          query:
                                            params:
                                                - ENC[AES256_GCM,data:bg==,iv:Uxxn9gx7QMUJ9yyQehJHKTzyRurmnQfJ/UzWGPmdQA4=,tag:uqULcC8byl2BEkm7HvYUHg==,type:str]
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:TUxJIg==,iv:Qu7LE4nNT0SNZYw0duLfMEP1wle57bdd3zXpU6sboPE=,tag:ocK+eMJIJQ+DtrEQI4kZqg==,type:str]
                                          type: ENC[AES256_GCM,data:frLCyck=,iv:JnsI/818EytvtTEy1cpkQ+0sc+Ml8FVkWa1VV3ArfkM=,tag:+ZaVT/FqKTC5lIG4SREjtw==,type:str]
                                    datasource:
                                        type: ENC[AES256_GCM,data:ViUOw+wKye4=,iv:23Fret7i/X66m5Ae7LcRH9eiU7DUREZvCGhv4QDj4uQ=,tag:5nB77tm759U1NhaRniTsVg==,type:str]
                                        uid: ENC[AES256_GCM,data:LklqYRUGw8A=,iv:Gd6HxAnAPnRFbeOtDBWteSKNmfaDsYcJZYEjReaii/E=,tag:dM8RNBUrsO1L9fv+Zg4Ieg==,type:str]
                                    expression: ENC[AES256_GCM,data:1A==,iv:IIImkJv9ulrhHjNBwqt0ga4LqpG3LY++CfNlyFv2WY0=,tag:usEzwAeyIi4AeqaRXE+HYA==,type:str]
                                    hide: ENC[AES256_GCM,data:ngRJHQw=,iv:HAkh4jVSy5BN492Haa/DWSqRdexgzh1D6FnTc3NmJAI=,tag:fuVnXqNSSuKVarsHcpjhVQ==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:D8+bvw==,iv:o8Qr4vfkGU2899/MFPp2WJnsCPKNtnoTs7HE2njrm1w=,tag:ZajgTgHc5tCJZ5CY0S8LeQ==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:rjrlUqw=,iv:Ep5cvHk7dO6FKXvAlgoSLJ6Bit3IqicUWA20yF3Ca8U=,tag:NdG3vM6s8fgX2iFYdmRIKQ==,type:int]
                                    refId: ENC[AES256_GCM,data:cTPgEDNA,iv:3x+2vtZXhoS1al9cC1cgHllSGgrlHpCjoXvW/lFGJ4U=,tag:h5XqnyMUvJZSSAnpN5Ip8g==,type:str]
                                    type: ENC[AES256_GCM,data:VoW57XYHv8Fl,iv:xc1vxi9mxVXOGGyL3+0W5nVTBo5mgz5Rz9mvzSS3Vz0=,tag:GbHln3A+BFlnN1QZyVFKBQ==,type:str]
                                - refId: ENC[AES256_GCM,data:3w==,iv:p2WbcOEl0yYi+vq7nmEHwS5P72zawYMlofFxqewsGiE=,tag:JI7VlayYcyJfKiCTaXJLTQ==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:ZrgZ,iv:T4JwzC4ocVhMUSkqFrFTa65ZEZWeJzirHURNJWtvtcE=,tag:Usae022yvxiQvvF7A6paEg==,type:int]
                                    to: ENC[AES256_GCM,data:OA==,iv:OTMAJI4cdRwG+D1CwWYuYePYM8I3XsdGw/dgdyCJF8E=,tag:xilEXq0sp7vVZI8x4/KUlQ==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:IusBRGm3AgY=,iv:iDuXI9CbY8w19O4Fad7e4HMewQFXPU5iUb1I7YgN7Fk=,tag:jpcVfN61STACh3sA8CRlAQ==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:zw==,iv:UU83ghxjdLmHu1kb8kcE3/AipbjHDZPOz2yrJ9eELRY=,tag:aGsmlyKNHwkUBGSCxl1g8g==,type:int]
                                                - ENC[AES256_GCM,data:pw==,iv:PICdeSE5Htvj2wkFRbkGn6G+du+Ihoqu5s1LnzyrZfA=,tag:I6EWuAp3PqaCe7FwTggwBw==,type:int]
                                            type: ENC[AES256_GCM,data:ru8=,iv:EwC89aNwJhNR1Cftd13AKSBUoPe5hei8IYXO4okGb/8=,tag:wcit7QbV63lG1Ac5FDmaAw==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:K6Qz,iv:h44abbSZIEDzuU7wQqXLa9lTRpKfq9VETj61NXwDYxo=,tag:js1FdbnlJuzQJrvTEzrPZQ==,type:str]
                                          query:
                                            params: []
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:GNLO,iv:KOkpDeZ3UhtCP2N3CH8cnXZVIRBBObqA2mcLSpdFmSk=,tag:Hg6QeQYM92/ft3Hj8mfhPw==,type:str]
                                          type: ENC[AES256_GCM,data:Ra/fC7g=,iv:v/ezzimwUsvRIqmtzuTH5VIt7NxbvaJKjKLwyGIH3aE=,tag:7GHHJ2coSTHgjp2ieLv8Lg==,type:str]
                                    datasource:
                                        name: ENC[AES256_GCM,data:nWgcI1XjtcFFEw==,iv:dUTMxGh5ame14L2SsjYAphbjZOW+lV/Psc2KVqb38N0=,tag:N2yzLe/Zn92bDm4EWzs8Mw==,type:str]
                                        type: ENC[AES256_GCM,data:QlgetfaGx6k=,iv:LPbFyuUEwWCTHpjxEivFDdFgSwcDsafO2+cYeo2FscE=,tag:ATgrx59SuxWl4/c8fQbBKw==,type:str]
                                        uid: ENC[AES256_GCM,data:7XyXqhr5ZUc=,iv:zHoxjVxADlm1Z4nECuE3PM2Qu2EFNNrsTbrWDztvIXQ=,tag:6Ms8nFJO/DjWGDOEkzBe4w==,type:str]
                                    expression: ENC[AES256_GCM,data:9pXD0OM=,iv:2zzVdpNQBxa2YK0FQUB53FkMyKB+3UtSyiIt/DzOUtg=,tag:glHXa1lZajF46Rz7spTElg==,type:str]
                                    intervalMs: ENC[AES256_GCM,data:GeyqxA==,iv:SNwkvw791Yn7SfASzaDSePRbuRL+pYGJhH7DKKKqkXQ=,tag:42ZKHmWxSD2kLwkRpQK1OA==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:6GD+J1o=,iv:tCO/4bPzmEQ1e+zE4k8/3fyEHYdzk2Hjl93e3blPuYo=,tag:SSW4EMoeMqRDjxpSv3MV0g==,type:int]
                                    reducer: ENC[AES256_GCM,data:gxquvg==,iv:LE1wCIv+7k7xv3t6IQi7LaeYWNOn/ri0Oq9twn5LC/U=,tag:tWG0qqw2NtVpxxHYKCTK8g==,type:str]
                                    refId: ENC[AES256_GCM,data:tw==,iv:E6v/D20VVQZUylacDGzoshkeXfKeLUL7+1ZWg8tWTDg=,tag:RVyzlUPW2Qc6Aq2gN0urhQ==,type:str]
                                    settings:
                                        mode: ENC[AES256_GCM,data:iFL/8Rr8T1pb,iv:1e8qOhyEfbR6tMPVdaB9++P+nCzQ9/bL6baE1EwTgzg=,tag:NpPHbsx8bWEpD3FLcNzhtw==,type:str]
                                        replaceWithValue: ENC[AES256_GCM,data:GQ==,iv:DD0I3yBjw+ZYgZzz2adCxCW+WiaZjdzM0ZhPW/nDnHo=,tag:KK2SF1EqQ7U/VgHLkZs1lg==,type:int]
                                    type: ENC[AES256_GCM,data:ckTC/ZqI,iv:bNeubWH78lyNaddks8h8KtCdbVXzRbj7TdGzPO/M21o=,tag:4P2aqymLQJO+ykc4OH7qfg==,type:str]
                              noDataState: OK
                              execErrState: Error
                              for: 2m
                              annotations:
                                summary: Unusual logging for synapse.
                contactpoints.yaml:
                    apiVersion: 1
                    contactPoints:
                        - orgId: 1
                          name: MidnightThoughts Ops
                          receivers:
                            - uid: "1"
                              name: MidnightThoughts Ops
                              type: email
                              sendReminder: true
                              frequency: 1m
                              settings:
                                addresses: ops@nordgedanken.dev;mtrnord@nordgedanken.dev;mtrnord1@gmail.com
                        - orgId: 1
                          name: PagerDuty
                          receivers:
                            - uid: adz30e8814wshd
                              type: pagerduty
                              settings:
                                integrationKey: ENC[AES256_GCM,data:yvY9cx3pN2+RDp9hO4VTp6fQJt9Cw3FlWffIc47UF2I=,iv:2W27ck2ig+dbTUcpa9rTRr3fnPNYBEEGgLkWQ0t6iUg=,tag:3Y76i5nj4dRLWZ90SGOFzA==,type:str]
                              disableResolveMessage: false
                        - orgId: 1
                          name: PagerDuty Draupnir4All
                          receivers:
                            - uid: 3
                              type: pagerduty
                              settings:
                                integrationKey: ENC[AES256_GCM,data:teSYrbJLIgjODhiMcQ15jAd1MMJ8PKY2zEnKg41DdPw=,iv:X30Q89d4WQ0SAKBRqbrBEmDwNgty3EAU3b45aoP/y2A=,tag:kZaWpQ0IqS0G3EGqOOlEKQ==,type:str]
                              disableResolveMessage: false
                policies.yaml:
                    apiVersion: 1
                    policies:
                        - orgId: 1
                          receiver: PagerDuty
                          group_by:
                            - grafana_folder
                            - alertname
                          routes:
                            - receiver: MidnightThoughts Ops
                            - receiver: PagerDuty
                              matchers:
                                - service_id != "draupnir4all"
                            - receiver: PagerDuty Draupnir4All
                              matchers:
                                - service_id = "draupnir4all"
            plugins:
                - grafana-piechart-panel
                - grafana-worldmap-panel
                #- https://grafana.com/api/plugins/parseable-parseable-datasource/versions/1.0.2/download;parseable-parseable-datasource
                - isovalent-hubble-datasource
                - isovalent-hubbleprocessancestry-panel
                - chaosmeshorg-datasource
            smtp:
                existingSecret: smtp-auth-secret
            extraSecretMounts:
                - name: auth-generic-oauth-secret-mount
                  secretName: auth-generic-oauth-secret
                  defaultMode: 288
                  mountPath: /etc/secrets/auth_generic_oauth
                  readOnly: true
                  # - name: parseable-secret-mount
                  #   secretName: parseable-secret
                  #   defaultMode: 288
                  #   mountPath: /etc/secrets/parseable
                  #   readOnly: true
            defaultDashboardsTimezone: Europe/Berlin
            dashboardProviders:
                dashboardproviders.yaml:
                    apiVersion: 1
                    providers:
                        - name: default
                          orgId: 1
                          folder: ""
                          type: file
                          disableDeletion: false
                          editable: true
                          options:
                            path: /var/lib/grafana/dashboards/default
                        - name: monitoring
                          orgId: 1
                          folder: Monitoring
                          type: file
                          disableDeletion: true
                          editable: false
                          updateIntervalSeconds: 10
                          allowUiUpdates: false
                          options:
                            path: /var/lib/grafana/dashboards/monitoring
                        - name: zammad
                          orgId: 1
                          folder: Zammad
                          type: file
                          disableDeletion: true
                          editable: false
                          updateIntervalSeconds: 10
                          allowUiUpdates: false
                          options:
                            path: /var/lib/grafana/dashboards/zammad
                        - name: matrix
                          orgId: 1
                          folder: Matrix
                          type: file
                          disableDeletion: true
                          editable: false
                          updateIntervalSeconds: 10
                          allowUiUpdates: false
                          options:
                            path: /var/lib/grafana/dashboards/matrix
                        - name: nats
                          orgId: 1
                          folder: Nats
                          type: file
                          disableDeletion: true
                          editable: false
                          updateIntervalSeconds: 10
                          allowUiUpdates: false
                          options:
                            path: /var/lib/grafana/dashboards/nats
            datasources:
                datasources.yaml:
                    apiVersion: 1
                    datasources:
                        - name: Prometheus
                          type: prometheus
                          uid: prometheus
                          url: http://vmsingle-vm-victoria-metrics-k8s-stack.monitoring.svc:8429/
                          access: proxy
                        # - name: Parseable
                        #   type: parseable-parseable-datasource
                        #   url: http://parseable.parseable.svc.cluster.local
                        #   access: proxy
                        #   isDefault: false
                        #   basicAuth: true
                        #   basicAuthUser: MTRNord
                        #   secureJsonData:
                        #     basicAuthPassword: $__file{/etc/secrets/parseable/password}
                        - name: ChaosMesh
                          type: chaosmeshorg-datasource
                          url: http://chaos-dashboard.chaosmesh.svc.cluster.local:2333
                          access: proxy
                          isDefault: false
                        - name: Tempo
                          type: tempo
                          uid: tempo
                          access: proxy
                          url: http://tempo.monitoring.svc.cluster.local:3100
                          isDefault: false
                          jsonData:
                            httpMethod: GET
                            serviceMap:
                                datasourceUid: prometheus
                            lokiSearch:
                                datasourceUid: loki
                        - name: Hubble
                          type: isovalent-hubble-datasource
                          uid: hubble
                          access: proxy
                          url: http://hubble-relay.kube-system.svc.cluster.local:80
                          isDefault: false
                          jsonData:
                            serviceMap:
                                datasourceUid: prometheus
                            tempoDatasourceUid: tempo
                            prometheusDatasourceUid: prometheus
                        - name: ES - Chat Sessions
                          type: elasticsearch
                          access: proxy
                          url: http://zammad-elasticsearch.zammad.svc.cluster.local:9200
                          isDefault: false
                          uid: zammad-es-chat_sessions
                          jsonData:
                            index: zammad_production_chat_session
                            timeField: created_at
                        - name: ES - CTI Log
                          type: elasticsearch
                          access: proxy
                          url: http://zammad-elasticsearch.zammad.svc.cluster.local:9200
                          isDefault: false
                          uid: zammad-es-cti_log
                          jsonData:
                            index: zammad_production_cti_log
                            timeField: start_at
                        - name: ES - Ticket Articles
                          type: elasticsearch
                          access: proxy
                          url: http://zammad-elasticsearch.zammad.svc.cluster.local:9200
                          isDefault: false
                          uid: zammad-es-ticket_articles
                          jsonData:
                            index: zammad_production_ticket
                            timeField: article.created_at
                        - name: ES - Tickets by closed_at
                          type: elasticsearch
                          access: proxy
                          url: http://zammad-elasticsearch.zammad.svc.cluster.local:9200
                          isDefault: false
                          uid: zammad-es-closed_ticket
                          jsonData:
                            index: zammad_production_ticket
                            timeField: close_at
                        - name: ES - Tickets by created_at
                          type: elasticsearch
                          access: proxy
                          url: http://zammad-elasticsearch.zammad.svc.cluster.local:9200
                          isDefault: false
                          uid: zammad-es-created_ticket
                          jsonData:
                            index: zammad_production_ticket
                            timeField: created_at
                        - name: ES - Tickets by first_response_at
                          type: elasticsearch
                          access: proxy
                          url: http://zammad-elasticsearch.zammad.svc.cluster.local:9200
                          isDefault: false
                          uid: zammad-es-first_response_at
                          jsonData:
                            index: zammad_production_ticket
                            timeField: first_response_at
            dashboards:
                default:
                    nodeexporter:
                        gnetId: 1860
                        revision: 22
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                monitoring:
                    forgejo:
                        gnetId: 17802
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                    flux-cluster:
                        url: https://raw.githubusercontent.com/fluxcd/flux2-monitoring-example/bcae1ef44963da89caabe962a93280c0dfad3381/monitoring/configs/dashboards/cluster.json
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                    flux-control-plane:
                        url: https://raw.githubusercontent.com/fluxcd/flux2-monitoring-example/bcae1ef44963da89caabe962a93280c0dfad3381/monitoring/configs/dashboards/control-plane.json
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                    flux-logs:
                        url: https://raw.githubusercontent.com/fluxcd/flux2-monitoring-example/bcae1ef44963da89caabe962a93280c0dfad3381/monitoring/configs/dashboards/logs.json
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                            - name: DS_LOKI
                              value: loki
                    asterisk:
                        url: https://git.nordgedanken.dev/kubernetes/grafana/raw/branch/main/asterisk.json
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                    traefik:
                        url: https://git.nordgedanken.dev/kubernetes/grafana/raw/branch/main/traefik.json
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                    postgres-dashboard:
                        url: https://raw.githubusercontent.com/prometheus-community/postgres_exporter/master/postgres_mixin/dashboards/postgres-overview.json
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                    minio-dashboard:
                        url: https://raw.githubusercontent.com/minio/minio/master/docs/metrics/prometheus/grafana/minio-dashboard.json
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                              #minio-bucket:
                              #  url: https://raw.githubusercontent.com/minio/minio/master/docs/metrics/prometheus/grafana/minio-bucket.json
                              #minio-replication:
                              #  url: https://raw.githubusercontent.com/minio/minio/master/docs/metrics/prometheus/grafana/minio-replication.json
                zammad:
                    ticket_statistics:
                        gnetId: 14222
                        revision: 2
                        datasource:
                            - name: DS_ES_- TICKETS BY CREATED_AT
                              value: zammad-es-created_ticket
                            - name: DS_ES_- TICKETS BY CLOSED_AT
                              value: zammad-es-closed_ticket
                            - name: DS_ES_- TICKET ARTICLES
                              value: zammad-es-ticket_articles
                            - name: DS_ES_- CHAT SESSIONS
                              value: zammad-es-chat_sessions
                            - name: DS_ES_- CTI LOG
                              value: zammad-es-cti_log
                    chat_sessions_statistics:
                        gnetId: 14224
                        revision: 1
                        datasource:
                            - name: DS_ES_- TICKETS BY CREATED_AT
                              value: zammad-es-created_ticket
                            - name: DS_ES_- TICKETS BY CLOSED_AT
                              value: zammad-es-closed_ticket
                            - name: DS_ES_- TICKET ARTICLES
                              value: zammad-es-ticket_articles
                            - name: DS_ES_- CHAT SESSIONS
                              value: zammad-es-chat_sessions
                            - name: DS_ES_- CTI LOG
                              value: zammad-es-cti_log
                    cti_log_statistics:
                        gnetId: 14223
                        revision: 1
                        datasource:
                            - name: DS_ES_- TICKETS BY CREATED_AT
                              value: zammad-es-created_ticket
                            - name: DS_ES_- TICKETS BY CLOSED_AT
                              value: zammad-es-closed_ticket
                            - name: DS_ES_- TICKET ARTICLES
                              value: zammad-es-ticket_articles
                            - name: DS_ES_- CHAT SESSIONS
                              value: zammad-es-chat_sessions
                            - name: DS_ES_- CTI LOG
                              value: zammad-es-cti_log
                matrix:
                    synapse-dashboard:
                        #url: https://git.nordgedanken.dev/kubernetes/grafana/raw/branch/main/synapse.json
                        url: https://raw.githubusercontent.com/element-hq/synapse/develop/contrib/grafana/synapse.json
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                    draupnir4all:
                        url: https://git.nordgedanken.dev/kubernetes/grafana/raw/branch/main/draupnir4all.json
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
                    matrix-media-repo-dashboard:
                        url: https://raw.githubusercontent.com/t2bot/matrix-media-repo/main/docs/grafana.json
                        datasource:
                            - name: DS_PROMETHEUS
                              value: Prometheus
            ingress:
                enabled: true
                annotations:
                    cert-manager.io/cluster-issuer: letsencrypt-dns
                    external-dns.alpha.kubernetes.io/hostname: grafana.midnightthoughts.space
                hosts:
                    - grafana.midnightthoughts.space
                tls:
                    - secretName: grafana.midnightthoughts.space
                      hosts:
                        - grafana.midnightthoughts.space
            grafana.ini:
                server:
                    root_url: https://grafana.midnightthoughts.space
                smtp:
                    enabled: true
                    host: smtp.fastmail.com:465
                    from_address: ops@nordgedanken.dev
                paths:
                    data: ENC[AES256_GCM,data:wTlPYQIUuZqO1earogPB4nk=,iv:RF3Jmn6wenk6DJKf0fm+/7wSl6ZDG31OtBqzPLUi4eo=,tag:L9BBwLBhgRqlW6EQyLurVw==,type:str]
                    logs: /var/log/grafana
                    plugins: /var/lib/grafana/plugins
                    provisioning: /etc/grafana/provisioning
                analytics:
                    check_for_updates: true
                log:
                    mode: console
                grafana_net:
                    url: https://grafana.net
                auth:
                    signout_redirect_url: https://auth.midnightthoughts.space/application/o/grafana/end-session/
                    oauth_auto_login: true
                auth.generic_oauth:
                    name: authentik
                    enabled: true
                    client_id: ENC[AES256_GCM,data:vn5OTKpQiaTWDkN3++SqlogGoR7k2q3NgZdi1qfpk/vZloTob7sBQwJB4MtjCs6Sx/M=,iv:80AAAivWvj6U/wzwYoJwDbpZJfD40TB/KhcU7htMu/A=,tag:pz3+ZIhihhymEfDb7aRX+w==,type:str]
                    client_secret: ENC[AES256_GCM,data:JC5l9JJUj7gLwCiMpjHudqqtsafSI4PytdZtHKh9fkejfOOUbESpKAlQCusxbvVEDonqRSc3,iv:CSCZn6PdwHqIg7syorspoaszJhXRJA9nhKlI7RSp6iI=,tag:g9sirO4F7pICrkqjB8vBzw==,type:str]
                    scopes: openid email profile
                    auth_url: https://auth.midnightthoughts.space/application/o/authorize/
                    token_url: https://auth.midnightthoughts.space/application/o/token/
                    api_url: https://auth.midnightthoughts.space/application/o/userinfo/
                    role_attribute_path: contains(groups, 'Grafana Admins') && 'Admin' || contains(groups, 'Grafana Editors') && 'Editor' || 'Viewer'
            imageRenderer:
                enabled: true
        kubeProxy:
            enabled: false
    postRenderers:
        - kustomize:
            patches:
                - target:
                    # Ignore these objects from Flux diff as they are mutated from chart hooks
                    kind: (ValidatingWebhookConfiguration|MutatingWebhookConfiguration)
                    name: kube-prometheus-stack-admission
                  patch: |
                    - op: add
                      path: /metadata/annotations/helm.toolkit.fluxcd.io~1driftDetection
                      value: disabled
                - target:
                    # Ignore these objects from Flux diff as they are mutated at apply time but not at dry-run time
                    kind: PrometheusRule
                  patch: |
                    - op: add
                      path: /metadata/annotations/helm.toolkit.fluxcd.io~1driftDetection
                      value: disabled
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1esjyg2qfy49awv0ptkzvpk425adczjr38m37w2mmcahzc4p8n54sll2nzh
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSByTWlkaVVHZCtVY3dtK3FR
            dzlyS3laUCtLWDN2NXEzdnhicXhxcVVlakJFCk11QUlJTDhhZ2RHYmpYU2Y5ajJy
            VFJmWjZJdTd6VUtVbUVDOW50QTFyWnMKLS0tIG9SWVZwcU5FWlNBTlVnVDZnWTl1
            SVhtUkpIcGlmMXkzMUFtUnEzd2lTWjAKGWc0aCws4cW3LOxLogRTMM0v+unSZ2fL
            CnmCk2VxBGziTA8319QN1XWfqKmp8g1uKiUKTcmDDE4Gr+FvQzCvRw==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-09-26T18:45:33Z"
    mac: ENC[AES256_GCM,data:AImP5k94O2KqgAdd5IBqjpzIRzte9BH0TLux/cy3fDYbWypFbPoQfu6lU7ZqT7enKn26O+iZKMEB5lYDTOttp2Wg+QJ6OSkCoupW2VQm8q/Vud7xUnkOZpYmFsiJ85gYo5/SJWI9SfQhyYDxV5d+SuK7eNEmuhlp648xh6cqGTE=,iv:wvcfl2K3qqbCeT++frkUgYBmn3zT77I7TAI+59oqZnQ=,tag:+46bCo1PYE8wxLV+QcOuxA==,type:str]
    pgp: []
    encrypted_regex: ^(admin_password|extraCommands|key|clickhouseDatabaseURL|databaseURL|client_id|client_secret|secret_key_base|otp_secret|private_key|public_key|primaryKey|deterministicKey|keyDerivationSalt|token|clientId|secretKey|installationId|installationKey|uriOverride|adminToken.value|password.value|sql_password|erlangCookie|AUTHENTICATION_PASSWORD|ROOM_API_SECRET_KEY|adminPassword|configPassword|adminUser|configUser|APP_KEY|api_key|api_secret|keys|livekit_key|livekit_secret|secret_key|admin_pass|admin_email|mariadbPassword|mariadbRootPassword|privateKey|data|stringData|PASSWD|password|pass|postgresPassword|postgresqlPassword|redminePassword|smtpPassword|registration_shared_secret|shared_secret|secret|admin_token|integrationKey|rootPassword)$
    version: 3.8.1
