apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: monitoring
resources:
    - ./crds
    - dashboards.yaml
    - repository.yaml
    - release.yaml
    - minio_loki_metrics.yaml
    - prometheus-adapter.yaml
configMapGenerator:
    - name: grafana-dashboards-matrix
      namespace: monitoring
      files:
          - draupnir4all_status.json=dashboards/draupnir4all_status.json
          - synapse.json=dashboards/synapse.json
      options:
          labels:
              grafana_dashboard: "1"
          annotations:
              grafana_folder: Matrix
    - name: grafana-dashboards-flux
      namespace: monitoring
      files:
          - flux-control-plane-dashboard.json=dashboards/flux-control-plane-dashboard.json
          - flux-cluster-dashboard.json=dashboards/flux-cluster-dashboard.json
          - flux-logs-dashboard.json=dashboards/flux-logs-dashboard.json
          - flagger.json:dashboards/flagger.json
      options:
          labels:
              grafana_dashboard: "1"
          annotations:
              grafana_folder: Flux
    - name: grafana-dashboards-ceph
      namespace: monitoring
      files:
          - ceph-cluster-dashboard.json=dashboards/ceph-cluster-dashboard.json
          - ceph-osd-single-dashboard.json=dashboards/ceph-osd-single-dashboard.json
          - ceph-pools-dashboard.json=dashboards/ceph-pools-dashboard.json
      options:
          labels:
              grafana_dashboard: "1"
          annotations:
              grafana_folder: Ceph
    - name: grafana-dashboards-envoy
      namespace: monitoring
      files:
          - envoy-clusters.json=dashboards/envoy_clusters.json
          - envoy-gateway-global.json:dashboards/envoy-gateway-global.json
          - envoy-proxy-global.json:dashboards/envoy-proxy-global.json
          - global-ratelimit.json:dashboards/global-ratelimit.json
      options:
          labels:
              grafana_dashboard: "1"
          annotations:
              grafana_folder: Envoy
