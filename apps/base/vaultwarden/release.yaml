apiVersion: helm.toolkit.fluxcd.io/v2beta2
kind: HelmRelease
metadata:
    name: vaultwarden
    namespace: vaultwarden
spec:
    releaseName: vaultwarden
    chart:
        spec:
            version: 0.29.0
            chart: vaultwarden
            sourceRef:
                kind: HelmRepository
                name: vaultwarden
    interval: 50m
    install:
        remediation:
            retries: 3
    values:
        pushNotifications:
            installationId: ENC[AES256_GCM,data:AuBD7JExmj2y7qxqpr6FRAYpcnl8gRnJ2BDuMhkmfMgIRL3/,iv:L+T1/U8Yduce7nyM/A9Zc9yapLEx0uptpaoBwS8vVfc=,tag:cMdpI3scT7HU7kcPLTDn0A==,type:str]
            installationKey: ENC[AES256_GCM,data:vrpvebpFa+6jcHXCh3y2orOXirU=,iv:U9nsl1L4EgwLN4GaP+nry8+5pPM3BGvgIQLXUxnj3HQ=,tag:hCshkG06GL1FfVmN0iMr4Q==,type:str]
            relayUri: https://push.bitwarden.eu
            identityUri: https://identity.bitwarden.eu
        signupsAllowed: false
        domain: https://vault.midnightthoughts.space
        signupDomains: nordgedanken.dev
        timeZone: Europe/Berlin
        database:
            type: postgresql
            uriOverride: ENC[AES256_GCM,data:+8FZD8TegolG6JE4KPtwMqaTeTuem9H61lg2QwlGaGeXy8K1ogNdk3qQu2mA+prMsQ2t8WpIgr6I0/Wd78QC7QKEIKGmDfQiyN0NMpHBi0ijzY6CqlLHpLB9+OVRTeoh3+WvrR6LRdj0RFgL+doj1DSDJf6XDm2dQEj5M4CjlydWJdgmVBQ4Wc996+JBvpxTQRscma1gAtAzYNTsUUI=,iv:290GBgNQsKAza00kVTsDYeJmqPlpF2NiUh3x3EE5ec0=,tag:dqRsAuZEnXkPBewqtFAedQ==,type:str]
        ingress:
            enabled: true
            additionalAnnotations:
                external-dns.alpha.kubernetes.io/hostname: vault.midnightthoughts.space
                cert-manager.io/cluster-issuer: letsencrypt-dns
            tlsSecret: vault.midnightthoughts.space-crt
            hostname: vault.midnightthoughts.space
            nginxIngressAnnotations: false
            class: traefik
        adminToken:
            value: $argon2id$v=19$m=19456,t=2,p=1$R0VoUlJ2T3I5UDRiL0h0cGgvTzYwbHhIL0poeFNpWmkzZThPUDh3TnNtND0$dm7crNLYaQFcGS7KZ38aKTyrV+E2RdyYKx1wDSjpu4s
        smtp:
            host: smtps-proxy.fastmail.com
            from: vault@nordgedanken.dev
            fromName: Vault Administrator
            username:
                value: mtrnord@nordgedanken.dev
            password:
                value: ENC[AES256_GCM,data:/qVjQKcnItWH9U1h+TxynA==,iv:6ThYljJ8hyEhT3D53ymwtfbNX184sJjW5uYnPYJLsWY=,tag:GtEw0bVAMlQ2ZjrjGFkN3Q==,type:str]
            security: force_tls
            port: 465
        data:
            name: ENC[AES256_GCM,data:huKhx0XHZj9/c/fL73qirw==,iv:WJWrYgEaQV3XvgSE9OGwawyFfqktYHcrt3+4vBJ2LpE=,tag:bKgXlcrtJe8liztiKxXlcA==,type:str]
            size: ENC[AES256_GCM,data:gL8s,iv:935ANkQmj0g9klQx+d9byKzg6cFAsNbIhDSdmijLU8I=,tag:GWZsBfk2hVou7UnvwlDDsg==,type:str]
        resources:
            requests:
                cpu: 50m
                memory: 256Mi
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1esjyg2qfy49awv0ptkzvpk425adczjr38m37w2mmcahzc4p8n54sll2nzh
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSA1bE1LWEowYWFEcDc5Z1B1
            Ny9lTUdsZmhDNENxcGdDNjdKZ2FLRE4wd1hZCmc2bzdOOEg4YlBsZ0J5eGxWVXFC
            dEc1eWJTMWpkbHNSSFlmenkvTHVzRnMKLS0tIHJlSVlSK05ib3F6cCtXK1ozN25D
            eFpQV2FCaEdVVnpNRU92VzFJeVppYW8KBS4p2L8MWNpQEnTB4yiQfRctc0LUWfTI
            CdDiYvnOtrN6x8TJVxb123YNHDD2ft0pljD7RCO5o1vdNP3QHuHrBw==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-10-11T10:01:56Z"
    mac: ENC[AES256_GCM,data:9CGReKuC5H9iU/kGa1b9MnGpnAiLMBhKAwe29SdtL+UaZy05iyJwgzum1ohaQ9v+llM/Us1ehvoXFuQDFEVBhrHIYIP4YYn3d9YzJoYikk/+VShO+U6zbsQ1vRHlubegZYYRGIx8CWCRC2ACnU37zfP979WUfRq6swVqJyUYhvc=,iv:3XYiK7lvrIJ99NJbuC7YbPWbUxjjAnXmxvGgnR2INzY=,tag:LV9p9T8ibdFjD8wrokaL7A==,type:str]
    pgp: []
    encrypted_regex: ^(DATABASE_URL|SMTP_PASSWORD|SECRET_KEY_BASE|admin_password|extraCommands|key|clickhouseDatabaseURL|databaseURL|client_id|client_secret|secret_key_base|otp_secret|private_key|public_key|primaryKey|deterministicKey|keyDerivationSalt|token|clientId|secretKey|installationId|installationKey|uriOverride|adminToken.value|password.value|sql_password|erlangCookie|AUTHENTICATION_PASSWORD|ROOM_API_SECRET_KEY|adminPassword|configPassword|adminUser|configUser|MAIL_PASSWORD|APP_KEY|api_key|api_secret|keys|livekit_key|livekit_secret|secret_key|admin_pass|admin_email|mariadbPassword|mariadbRootPassword|privateKey|data|stringData|PASSWD|password|pass|postgresPassword|postgresqlPassword|redminePassword|smtpPassword|registration_shared_secret|shared_secret|secret|admin_token|integrationKey|rootPassword)$
    version: 3.8.1
