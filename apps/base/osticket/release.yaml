apiVersion: helm.toolkit.fluxcd.io/v2beta2
kind: HelmRelease
metadata:
    name: osticket
    namespace: osticket
spec:
    releaseName: osticket
    interval: 60m
    chart:
        spec:
            chart: ./charts/osticket
            sourceRef:
                kind: GitRepository
                name: osticket
                namespace: osticket
    values:
        image:
            repository: ghcr.io/mtrnord/osticket
            tag: latest
            pullPolicy: Always
        ostName: Midnightthoughts osTicket
        ostEmail: support@midnightthoughts.space
        adminFirstName: MTR
        adminLastName: Nord
        adminEmail: ENC[AES256_GCM,data:MX9duBX6QYrQbEztinxMZV3XBZmQwzSa,iv:/dswS+w70In4c/k0qemEQLW1t7YXHfwDcESOlKVb3Ig=,tag:I+z7MZ089tOJnE9iUWsuIQ==,type:str]
        adminUserName: mtrnord
        adminPassword: ENC[AES256_GCM,data:+VuZMvIVdoa2,iv:s9cz6pyLcBX/OmOXPh9y3pwo7wIjy8dGjBUm7ZTMbzI=,tag:V/1s8Ah6bn3jZouPcs/KRQ==,type:str]
        timezone: Europe/Berlin
        service:
            type: ClusterIP
            port: 80
        ingress:
            enabled: true
            annotations:
                external-dns.alpha.kubernetes.io/hostname: midnightthoughts.space
                cert-manager.io/cluster-issuer: letsencrypt-dns
            hosts:
                - host: osticket.midnightthoughts.space
                  paths:
                    - path: /
                      pathType: ImplementationSpecific
            tls:
                - secretName: osticket.midnightthoughts.space-tls
                  hosts:
                    - osticket.midnightthoughts.space
        mysql:
            enabled: false
            externalAddress: mariadb-primary.mariadb-operator.svc.cluster.local
            primary:
                service:
                    ports:
                        mysql: 3306
            auth:
                database: osticket
                username: osticket
                password: ENC[AES256_GCM,data:VH6YaTELGJQUtZlmPyW0LTG5ZcNyl3+RmlYiHfaSe9JiBlNBlHYLnZcXbwiAHJDEb7UkgA0Twd3N8yENEq/TNg==,iv:JREAhE4O2dy0hM88gmbjvI7ofb9f3SXyH8Ubye+R4YY=,tag:gtPvzeGr53pdwGHykth/7Q==,type:str]
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1esjyg2qfy49awv0ptkzvpk425adczjr38m37w2mmcahzc4p8n54sll2nzh
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBpL0NjWDVObUhBN2FON2ta
            SlIxK0cwUjFqYmd0UUFTTzlpYU1TdUtMaW53Ck16d3dLdVo0M1ZlL3lHN05XWnY2
            YnE3bzdIVS9XMEJJMlFTYzJIcXV4QWcKLS0tIE4ycHNwM2xVUFFmaE1MSHlWUy9x
            a09WajNWUW4rSndma2FxSUZqMHNnRlUKfdJj6+nB6iZBDTTxBlqqcmT1bNIbRcUc
            PRirIbqW0liYauNBckpmoVRMqxK+EYzVPIOFc1DMDdBiIRw4LADdbg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-01-07T23:10:27Z"
    mac: ENC[AES256_GCM,data:kJg8xSUDB6aSnluR2qfKGiMppfhRpHQLdLKluCLo2W0+uaQnnDbocNi7OEXEtvop2r6iV2thKbnIZuipMd/PTiXiDb8228Mg0dZb0Ah0dHrjLddiP68MZez+8i6KGNtshMHxekQCjd/vBuC0Yugl5H4P3ES8jyUw2tqN6D5S/3Q=,iv:DRN4thn02U/W8VmSqcHHO7DF9b7X5k3TesBqZtCgl4A=,tag:33VhtNJzr6SEpsTf/oNnsA==,type:str]
    pgp: []
    encrypted_regex: ^(adminPassword|adminEmail|jenkinsAdminEmail|securityRealm|gerrit.config|routing_key|DATABASE_URL|SMTP_PASSWORD|SECRET_KEY_BASE|admin_password|extraCommands|key|clickhouseDatabaseURL|databaseURL|client_id|client_secret|secret_key_base|otp_secret|private_key|public_key|primaryKey|deterministicKey|keyDerivationSalt|token|clientId|secretKey|installationId|installationKey|uriOverride|adminToken.value|password.value|sql_password|erlangCookie|AUTHENTICATION_PASSWORD|ROOM_API_SECRET_KEY|adminPassword|configPassword|adminUser|configUser|MAIL_PASSWORD|APP_KEY|api_key|api_secret|keys|livekit_key|livekit_secret|secret_key|admin_pass|admin_email|mariadbPassword|mariadbRootPassword|privateKey|data|stringData|PASSWD|password|pass|postgresPassword|postgresqlPassword|redminePassword|smtpPassword|registration_shared_secret|shared_secret|secret|admin_token|integrationKey|rootPassword)$
    version: 3.9.1
