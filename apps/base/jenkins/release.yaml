apiVersion: helm.toolkit.fluxcd.io/v2beta2
kind: HelmRelease
metadata:
    name: jenkins
    namespace: jenkins
spec:
    interval: 1h
    releaseName: jenkins
    chart:
        spec:
            chart: jenkins
            sourceRef:
                kind: HelmRepository
                name: jenkins
    values:
        agent:
            additionalContainers:
                - sideContainerName: nodejs
                  image:
                      repository: node
                      tag: 23
                  command: sleep
                  args: "99999999"
        controller:
            admin:
                username: admin
                password: ENC[AES256_GCM,data:GQU2HhAxnOM2c/LTm3bgQ5AY4HKw9Q==,iv:Gv/wDu2eU8qM0+KN07p43NvC/nmaWuFWKchHb9InsFM=,tag:C8r1v6l9qxsWZp670Hn8Vw==,type:str]
            jenkinsAdminEmail: ENC[AES256_GCM,data:2wiGDKQMTjuBfd8gcafOqf4Xp67fIdHs,iv:Ku9CjPPZlJsFyuxcS2iXXIqIRHsaVPNSgb1mIqQEUcE=,tag:Rd99k4e45OGTyKvIc5sgrA==,type:str]
            installPlugins:
                - kubernetes:4306.vc91e951ea_eb_d
                - workflow-aggregator:600.vb_57cdd26fdd7
                - git:5.6.0
                - configuration-as-code:1903.v004d55388f30
                - oic-auth:4.438.v6e62f6782770
                - gerrit-trigger:2.42.0
                - matrix-auth:3.2.3
                - gerrit-checks-api:66.v3ef8b_f08f1f3
            JCasC:
                securityRealm: ENC[AES256_GCM,data:ACtQd8XQbMIseWvyvOGekS2saz4ffEe80IvdI+veyoF9TcTGoMTulvY05Px9ge6qQq7bb5YNXO70BBW2toeKrbMUrgCHNj+0bt9mJeFlu7UguCz3HSFbKCInNqlW21PqMK3RCUhF+X/g/VoK51kjAWNBHK4hw2QuxQ0dmWZy2AWrxkwgnOGUNsE4JwdxQq7H57FKu5i/SPn9nG7t6/Y1j90Xkc79sJ2CfkEIZw9YVDQ3n5QsfyGmNbF0KPxIW51wxJKtNEyUP3nnwaz9JYpYCCbcYV7kkVt/c6e6LQplYZV/WPkI3WrQqH0y9P86lnUGlFqSK0/qIVCtRfC7o85GtO/iPcOEzevOWqZF5eMK4mdbGv3xUApJZo6W/6ubylCyZzfQFq5+rCmn1/EYsZixdu+msbm8IHSLDO+b3AlpFdaR65T7zOWPqxKwz+jo5vwG8e98p1MO6QUpcww7Ht53KNghZxLlk4G9EoG826TldVFC9VZ6ZzvC3/gPdFHh7TFYTx1+0WFktQh498P3uhivzKtV8oK3d77gZSWv7735VrBrmfGYV/TdcmgW0A5DK+S6CBsc98VBGyL9Ytd6Fas9C5eKqTqWd5gIkVdsobOcnfN7NoblU7u9KzctuEAYGGP3MpTwYfBnmpIjXJT22tAFqyZ816s6XWl6VqPj/QO7IKO1Eru4FN5mV1w4/GZpE+8QYDKFCIOMrEkP0ZinMQ3jb6dULhM4HtUgMGgWVmu5vYOp/jrFCcEE62zXtrFgsXgbrjq0Zk04+8Eg71IHQiVJtSm3abFhLpzISIbXmH5VyivFJzeGe5w+sMN8IZub1G+/CiJFvTzFg6pkXEfdVeFS3U5h2dJn1AkA1KKLp4Z2dA==,iv:h1QuA0HkL28DYVD95nBQRurepNAQWAxBNxRki4JbC7Y=,tag:6w20Wxo1qCdXQhWPrtZmlQ==,type:str]
                authorizationStrategy: |-
                    loggedInUsersCanDoAnything:
                        allowAnonymousRead: true
            ingress:
                enabled: true
                apiVersion: networking.k8s.io/v1beta1
                annotations:
                    external-dns.alpha.kubernetes.io/hostname: midnightthoughts.space
                    cert-manager.io/cluster-issuer: letsencrypt-dns
                hostName: jenkins.midnightthoughts.space
                tls:
                    - secretName: jenkins.midnightthoughts.space-tls
                      hosts:
                          - jenkins.midnightthoughts.space
        persistence:
            enabled: true
            size: 8Gi
            accessMode: ReadWriteMany
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1esjyg2qfy49awv0ptkzvpk425adczjr38m37w2mmcahzc4p8n54sll2nzh
          enc: |
              -----BEGIN AGE ENCRYPTED FILE-----
              YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBaTlB6b2JhTkt4bzdadDhJ
              N3hZZW5Rbmhod2tNOXExL2xpUFVoSWI0QUhRCi9YRTl2TWYvQjBidE1iOEdvS3JL
              dUtDWU1XQ0kxaDJYazVpU1lWaUtQU28KLS0tIHhVUXpuNEV3TzZySFFJbWEwSGZl
              TERtMGJJVW1xbmE3RVowMXR3QTdOaU0KDK8H/eGgd+o66Im5+ixnHvP/1AONdVqu
              TaV43Q09ntGJ8ZSgsp1A1j7G43MJTbe2CbvPcqKXODnhtnsQuPB9Sg==
              -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-12-22T01:53:23Z"
    mac: ENC[AES256_GCM,data:/4YAUVjHSc460O69B1ERwTKP+W7pWe6DqP4wGlPtFYAzLHIis2HgUzEZAGOiA7lNx57gY01JfnJ+4WOScwResDGDIPK/bnRAdK65euELQycwQ4Us40okkTxhkBvxHSeJr7ACit8Y4fHnqjMt2IsaaeooHbjTacxinKZUvHuxMpk=,iv:EN10na2zjwmR112okzxfkSAPwnr3N1r8u+/RjCHaCEY=,tag:d0qhtdNR6mkCUWLIXHbhlQ==,type:str]
    pgp: []
    encrypted_regex: ^(jenkinsAdminEmail|securityRealm|gerrit.config|routing_key|DATABASE_URL|SMTP_PASSWORD|SECRET_KEY_BASE|admin_password|extraCommands|key|clickhouseDatabaseURL|databaseURL|client_id|client_secret|secret_key_base|otp_secret|private_key|public_key|primaryKey|deterministicKey|keyDerivationSalt|token|clientId|secretKey|installationId|installationKey|uriOverride|adminToken.value|password.value|sql_password|erlangCookie|AUTHENTICATION_PASSWORD|ROOM_API_SECRET_KEY|adminPassword|configPassword|adminUser|configUser|MAIL_PASSWORD|APP_KEY|api_key|api_secret|keys|livekit_key|livekit_secret|secret_key|admin_pass|admin_email|mariadbPassword|mariadbRootPassword|privateKey|data|stringData|PASSWD|password|pass|postgresPassword|postgresqlPassword|redminePassword|smtpPassword|registration_shared_secret|shared_secret|secret|admin_token|integrationKey|rootPassword)$
    version: 3.9.1
