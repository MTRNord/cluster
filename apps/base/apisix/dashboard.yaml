apiVersion: helm.toolkit.fluxcd.io/v2beta2
kind: HelmRelease
metadata:
    name: apisix-dashboard
    namespace: apisix
spec:
    releaseName: apisix
    interval: 60m
    chart:
        spec:
            chart: apisix-dashboard
            sourceRef:
                kind: HelmRepository
                name: apisix
    values:
        ingress:
            enabled: true
            annotations:
                cert-manager.io/cluster-issuer: letsencrypt-dns
                external-dns.alpha.kubernetes.io/hostname: midnightthoughts.space
                traefik.ingress.kubernetes.io/router.pathmatcher: PathRegexp
            hosts:
                - host: apisix.midnightthoughts.space
                  paths:
                    - /*
            tls:
                - secretName: midnightthoughts-space-tls
                  hosts:
                    - apisix.midnightthoughts.space
        config:
            authentication:
                users:
                    - username: MTRNord
                      password: ENC[AES256_GCM,data:pWI4IyKZws+0,iv:5X7hgte6ntiy8Pf2c+rUtwusd+IDiayXT0tc6eiUiJU=,tag:ZX+3hW6Ew/L3Nily5tDGZQ==,type:str]
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1esjyg2qfy49awv0ptkzvpk425adczjr38m37w2mmcahzc4p8n54sll2nzh
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBOMHFuTHZTb1VlZGFGM3Zt
            VC8vUzhoWFovOWhYK0NnS1NzWnc5VXJhWXpvCmJ0Z0ZwdUVqUzloNFlRQldHZ3pW
            U1RkVE13NGhKM0NUYkg2Z0c1YTgzbTgKLS0tIG02Y1hsU25qeU00ZUo3cmhrNWdh
            elZ4S2hVZFBaRTgvc3c5ZXlkalJPYkEKKVAsseEunSwpqDzHhYpmXmku/bOjG6lq
            HLq6AsCWuPevxg2nvBhUKGYt3TyikVXsLhLrUqrqmA89fqUhO6NpSg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-09-26T16:48:06Z"
    mac: ENC[AES256_GCM,data:ix543arJRyqGXrrfFcH4ODV3LOF1RcU94Rwu5hcSITVpyhKO7y+IAwu1M4N0itIYRWyjmUVGPhKDmCblVEtiSpds7nM3s3JencUC/asKDngXtemEndsAUrvLNYPGnq+BINY53gYKlPcBW4MFZbsaMb6gc8ZMy7TKEvaRm0F9nj4=,iv:57OzuxrIWxFtdB2ABpzVLp4PWKmhxL2tyF7/L/1WgJo=,tag:+YEBnNDOzv3VuTVmD6gTHw==,type:str]
    pgp: []
    encrypted_regex: ^(admin_password|extraCommands|key|clickhouseDatabaseURL|databaseURL|client_id|client_secret|secret_key_base|otp_secret|private_key|public_key|primaryKey|deterministicKey|keyDerivationSalt|token|clientId|secretKey|installationId|installationKey|uriOverride|adminToken.value|password.value|sql_password|erlangCookie|AUTHENTICATION_PASSWORD|ROOM_API_SECRET_KEY|adminPassword|configPassword|adminUser|configUser|APP_KEY|api_key|api_secret|keys|livekit_key|livekit_secret|secret_key|admin_pass|admin_email|mariadbPassword|mariadbRootPassword|privateKey|data|stringData|PASSWD|password|pass|postgresPassword|postgresqlPassword|redminePassword|smtpPassword|registration_shared_secret|shared_secret|secret|admin_token)$
    version: 3.8.1
