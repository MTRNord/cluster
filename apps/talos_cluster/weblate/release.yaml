apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: weblate
  namespace: weblate
spec:
  releaseName: weblate
  interval: 60m
  chart:
    spec:
      chart: weblate
      sourceRef:
        kind: HelmRepository
        name: weblate
  values:
    image:
      repository: weblate/weblate
      tag: 5.15.2.5@sha256:49d29b97d05391433b8c7e8a12852afce82e123d356d71354d71542354eeb039
      pullPolicy: IfNotPresent
    adminEmail: ENC[AES256_GCM,data:mfMJlVWPjihqtfm9D2CM9rjdpP9P3eNt,iv:htDuxeNVXkVKaPJRFgtvWStSri3d3LOsnuEMc5+xfRQ=,tag:vRnHqFv9HM/Jbk/54RdbFw==,type:str]
    adminUser: ENC[AES256_GCM,data:r7Y0S4v/2Q==,iv:Rr0XLte1TiiywzrCbapV0xtlxdUFnPP3fxh5X1ErU4A=,tag:B5bAqjYali4sYPX27mGCmw==,type:str]
    adminPassword: ENC[AES256_GCM,data:/sC5QrWb4svo,iv:CRd65lDCw2pew3e2D1MXnY88Ivbj8dNO1u69yJUhy5I=,tag:G7I2/v4og91zdmUaiN7lug==,type:str]
    siteDomain: weblate.mtrnord.blog
    emailHost: mail.midnightthoughts.space
    emailPort: 587
    emailTLS: true
    emailSSL: false
    emailUser: support@midnightthoughts.space
    emailPassword: ENC[AES256_GCM,data:OS7yumZWe+RyASQJ3ZD++xvJ/rcyVED6z8h5WvfWcp6ZoUpYmOwF0nggr3Z+2dj/NDKhOOi0BAptECAySccPtg==,iv:SnxTavt8NtLdWcH+PTf1NpsoySnHK+hWkmA3XsrOF4k=,tag:TlbrM6a8QOZN2MDBiMT53A==,type:str]
    serverEmail: support@midnightthoughts.space
    defaultFromEmail: support@midnightthoughts.space
    extraConfig:
      WEBLATE_IP_PROXY_HEADER: HTTP_X_FORWARDED_FOR
      WEBLATE_SECURE_PROXY_SSL_HEADER: HTTP_X_FORWARDED_PROTO,https
      WEBLATE_ENABLE_HTTPS: "1"
    persistence:
      enabled: true
      storageClass: longhorn
      accessMode: ReadWriteMany
      size: 5Gi
      filestore_dir: /app/data
    postgresql:
      enabled: false
      postgresqlHost: pg-cluster-v2-rw.postgres-cluster.svc.cluster.local
      auth:
        userName: weblate
        postgresPassword: ENC[AES256_GCM,data:Iu/6ImbpFeoxiQ+1VOuN7bd//ynNU60ISsHFgmO3tORScQCfhYDFQwrlxftUGb0jJXqeBCc2IIBBIA278Glu+A==,iv:eEjm+iRyYMgdUK6ohYvy7dnDops/uVrx8hd5iCAFZg4=,tag:tSETavDwx9ThdNWl8tmfIg==,type:str]
    redis:
      enabled: true
      auth:
        enabled: true
        password: ENC[AES256_GCM,data:SHnPzs97u9EcykMKuEHllUf1E0gdKdNa+/BUOm8mqjoMI2zLidEJIlRHkNNHy40RVWeb9hXJztxETodlbFLgjA==,iv:tW4A4WQ6nmd9Zsi3dwiQHOzJGIZYGXsFSb0/4yzgpYw=,tag:PeSmR/vA2AbWR/T0a89egw==,type:str]
      master:
        persistence:
          enabled: true
          storageClass: longhorn
          size: 1Gi
      replica:
        persistence:
          enabled: true
          storageClass: longhorn
          size: 1Gi
sops:
  kms: []
  gcp_kms: []
  azure_kv: []
  hc_vault: []
  age:
    - recipient: age1esjyg2qfy49awv0ptkzvpk425adczjr38m37w2mmcahzc4p8n54sll2nzh
      enc: |
        -----BEGIN AGE ENCRYPTED FILE-----
        YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBYc2NTYmtQMUZ3ZVBpYjRS
        UzJrQzhNL3E3bHd3aG4zL0RzaU80ZU02OGcwCkpJQnBianVHVklrKzZFNVlwUFB2
        Und6SnNNNWxtTGVvcWhtd0g3Slh6dG8KLS0tIGNXb2JzcVQwN2hFZFVsUERCaXM5
        a1hWVFZEVGlDeXFraXpPNXVXQnFrL1UKP9c6+zwepJQQU4LUwC1E+JHGH9P7ROK2
        FHBjO/pJUZzISBEZmrJWH2kALGnmL41ZtvPnhAo8AoN+TVb0ADUaLw==
        -----END AGE ENCRYPTED FILE-----
  lastmodified: "2025-12-05T14:42:35Z"
  mac: ENC[AES256_GCM,data:3lMfKPfnK4gB8JMJQSz1Nuo7QfCas8GzoBxkdOsVFJjueEul8O2RIx7EhiLIBLGeAOka/w2Jq+16/2FF7ESm2Ue1urq6XZQLkshPTTRPDs9aQlww9GMp5qDAIb9g18yPiSDHjTRGRuO+LPrqQF2YdIEqg4s3typh8LR2yGAg+3U=,iv:f3mL6uAw/LBQAqcGrDeoPClJTSWECK0aeSoh4n3q48I=,tag:1PcEjhacn9LgH5+3SsmG7g==,type:str]
  pgp: []
  encrypted_regex: ^(harborAdminPassword|totpVaultKey|kimaiAppSecret|kimaiAdminPassword|GITHUB_CLIENT_ID|GITHUB_CLIENT_SECRET|GITHUB_PRIVATE_KEY|woosh|root_password|rspamd_password|pgdb_password|matrix_access_token|pgdb_remote_url|hmac_secret_key|adminPassword|adminEmail|jenkinsAdminEmail|securityRealm|gerrit.config|routing_key|DATABASE_URL|SMTP_PASSWORD|SECRET_KEY_BASE|admin_password|extraCommands|key|clickhouseDatabaseURL|databaseURL|client_id|client_secret|secret_key_base|otp_secret|private_key|public_key|primaryKey|deterministicKey|keyDerivationSalt|token|clientId|secretKey|installationId|installationKey|uriOverride|adminToken.value|password.value|sql_password|erlangCookie|AUTHENTICATION_PASSWORD|ROOM_API_SECRET_KEY|adminPassword|configPassword|adminUser|configUser|MAIL_PASSWORD|APP_KEY|api_key|api_secret|keys|livekit_key|livekit_secret|secret_key|admin_pass|admin_email|mariadbPassword|mariadbRootPassword|privateKey|data|stringData|PASSWD|password|pass|postgresPassword|postgresqlPassword|redminePassword|smtpPassword|registration_shared_secret|shared_secret|secret|admin_token|integrationKey|rootPassword|adminPassword|adminUser|adminEmail|emailPassword)$
  version: 3.9.1
