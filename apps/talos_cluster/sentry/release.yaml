apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: sentry
  namespace: sentry
spec:
  releaseName: sentry
  chart:
    spec:
      chart: sentry
      version: 27.8.x
      sourceRef:
        kind: HelmRepository
        name: sentry
  interval: 60m
  timeout: 20m0s
  values:
    ipv6: true
    user:
      create: true
      email: mtrnord@nordgedanken.dev
      password: ENC[AES256_GCM,data:mNDz45gVBS7R,iv:4vcaWIEgh+K7RoTDkYQBRYYDKZHr08omGubMhUdnwFI=,tag:jtdVxYNVNxB/9AO/qoxPhQ==,type:str]
    # this is required on the first installation, as sentry has to be initialized first
    # recommended to set false for updating the helm chart afterwards,
    # as you will have some downtime on each update if it's a hook
    # deploys relay & snuba consumers as post hooks
    asHook: false
    hooks:
      dbCheck:
        image:
          repository: toolbelt/netcat
          tag: latest
          pullPolicy: Always
    vroom:
      persistence:
        enabled: true
        size: 5Gi
        accessMode: ReadWriteMany
        storageClass: longhorn
    geodata:
      persistence:
        storageClass: longhorn
    sentry:
      singleOrganization: true
      web:
        enabled: true
      features:
        orgSubdomains: false
        enableProfiling: false
        enableSessionReplay: true
        enableFeedback: true
        enableSpan: true
        enableUptime: false
      ingestFeedback:
        enabled: true
    system:
      url: https://sentry.mtrnord.blog
      adminEmail: ENC[AES256_GCM,data:Lww9N8mdhCinJoRBlhq76+eX7ywbHHaohjPsDBPz,iv:UkCd6irkZkAZevBZG3Lbad8QEDlq094JlfYjXorDUfQ=,tag:qHw4FXM1QX+OgbHbmCkogA==,type:str]
      public: false
      secretKey: ENC[AES256_GCM,data:92XTynmIs5fXojtViczZZYUJmKWFdz/uAh/TKwFUJRvDOrlbZ5966gDrPl8ea1X6wF1MtLlzOy7IYF/USQfIgA==,iv:11IwERjWYNlp6eVIzoUvq4kSPfCM5JrtPgH+Q+M+QvM=,tag:qXS2CfD7CV6xO3LJGwd6Vw==,type:str]
    mail:
      backend: smtp
      host: mail.midnightthoughts.space
      useTls: "true"
      useSsl: "false"
      port: "587"
      username: support@midnightthoughts.space
      password: ENC[AES256_GCM,data:REydnY0t4PQ4R+EkiJjrb3zg7yrw6qgZJV6Rce1ceNoeOjAzDIDV6I16asiMimckx7m0CHNX2S+dAfuETN1v6g==,iv:IvD3HAOayJcpblGQot7Jb3FYeDwEehIQlDdQzAlqMIY=,tag:3qbkQ+yUlyx/bGI4bAoIOQ==,type:str]
      from: support@midnightthoughts.space
    github:
      appId: ENC[AES256_GCM,data:COjl0J1WYw==,iv:9tDEtw1mxcicmC2aKVFqc7UTml9haeCIMb8W1HYef5E=,tag:vIXKluV21sefU0NGE8T3NQ==,type:str]
      appName: Sentry Midnightthoughts
      clientId: ENC[AES256_GCM,data:RnVZrZYI+Qse+4hUUSJg/Y3TtfU=,iv:w/o/bc38PlaT06qfMYRx5VC6JyDg+ICqUt0bzdzovw4=,tag:xXvlasnZmD9yYhhOZPFdvQ==,type:str]
      clientSecret: ENC[AES256_GCM,data:9gw+Rbfzb1ZaapnP4VnwPK/9FyvyvbmKjwMBoNTwm35lTDtZnG69lA==,iv:BVQx+/vL0jqMTgqaoWjXGWt0RbAF2e8LNhJxtLM6CYs=,tag:MpgKClT4sZwnZtLTujPIAQ==,type:str]
      privateKey: ENC[AES256_GCM,data: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,iv:SYkjdVcFKFvfZKeAHVscY2NfPccjLh89AVZ21Bt+XbA=,tag:ZtU8VeSi7Iylu9uTpuGQVA==,type:str]
      webhookSecret: ENC[AES256_GCM,data:7Lm065Aq3LKc8bihfUWR44Mbn8xk1hs/+alFR458p1NQN1ySFUTccG7JBonyiJCts8retSxP6vMvgRzVp2Dw4w==,iv:7iZvblVLuwghTu+9YMykh0vp8ABJ/Umo+OK1rYq6Mpc=,tag:ub+f0Ps3m/XUsw389fDnHw==,type:str]
    auth:
      register: false
    ingress:
      enabled: false
    filestore:
      persistence:
        enabled: true
        size: 5Gi
        accessMode: ReadWriteMany
        storageClass: longhorn
        persistentWorkers: true
    clickhouse:
      persistentVolumeClaim:
        enabled: true
        dataPersistentVolume:
          storage: 20Gi
          storageClass: longhorn
          accessModes:
            - ReadWriteOnce
            - ReadWriteMany
    zookeeper:
      persistence:
        enabled: true
        size: 8Gi
        accessModes:
          - ReadWriteOnce
          - ReadWriteMany
        storageClass: longhorn
    redis:
      master:
        persistence:
          enabled: true
          size: 5Gi
          accessModes:
            - ReadWriteOnce
            - ReadWriteMany
          storageClass: longhorn
    postgresql:
      enabled: false
    externalPostgresql:
      port: 5432
      username: sentry
      password: ENC[AES256_GCM,data:q3p2+C5Fwjx2NV/E0kFOABuUcvkmX7nJ3dH/WQjKYZxTTflBuI5rZ+wb1lxD2Jz/2kD++3x7TJQ/4bcaForedg==,iv:iSFVgoZTg5u84dRND6zKxO2XpW1+UkNpI09zZbPE9Tk=,tag:GsBFaFh3vdGOtlX1L8hN3g==,type:str]
      database: sentry
      connMaxAge: 600
      host: pg-cluster-v2-rw.postgres-cluster.svc.cluster.local
      sslMode: require
    rabbitmq:
      enabled: false
sops:
  kms: []
  gcp_kms: []
  azure_kv: []
  hc_vault: []
  age:
    - recipient: age1esjyg2qfy49awv0ptkzvpk425adczjr38m37w2mmcahzc4p8n54sll2nzh
      enc: |
        -----BEGIN AGE ENCRYPTED FILE-----
        YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBPa3F5ZFNjZlg2UnFUTmRk
        VWN4UCs2YzZVZk9GN3lrRHk2cGx0YW0vTWk4CnptMjYyVHZFT3V4QWI4cHpOMjR4
        NEJUOUROWC9HalVCckh6N2tBS1dqY2cKLS0tIEl0Ky9sTjRBZ25yMHVja1dJd3ls
        dWJqTTh0S1AxTXNyRS9nekFPQll4L3MKSDWjjOOV2kuaUAy80Z1UnLX0jumz9Krv
        35jiFfRutw8CAI6SzzPM1rORXKtHNyn7iZ8xDopEn4emBNnZCvusOw==
        -----END AGE ENCRYPTED FILE-----
  lastmodified: "2025-12-13T21:05:31Z"
  mac: ENC[AES256_GCM,data:wQb/7cg/gtsGu78Lp2+3m4x6PUSPtbTuPgSxfnhNYhEpuUdtuIUkQgTVJaDw7ET8wn6ujWMlys6OoY4hurYIg70cfHnQ5+rYaGdRDPIuNIP6vzSHpiv018M395c5JFLH6/sCb6NKRD+F0z3PJmagyZ4FVFh3/HpjJZBu8FcZ4CI=,iv:TcIBhpn5/8EB7xWnhvjq/RFS3gOIn8vygP+DFod6Ed4=,tag:joqXlg0RZZbF6gSq0KFEhA==,type:str]
  pgp: []
  encrypted_regex: ^(harborAdminPassword|totpVaultKey|kimaiAppSecret|kimaiAdminPassword|GITHUB_CLIENT_ID|GITHUB_CLIENT_SECRET|GITHUB_PRIVATE_KEY|woosh|root_password|rspamd_password|pgdb_password|matrix_access_token|pgdb_remote_url|hmac_secret_key|adminPassword|adminEmail|jenkinsAdminEmail|securityRealm|gerrit.config|routing_key|DATABASE_URL|SMTP_PASSWORD|SECRET_KEY_BASE|admin_password|extraCommands|key|clickhouseDatabaseURL|databaseURL|client_id|client_secret|secret_key_base|otp_secret|private_key|public_key|primaryKey|deterministicKey|keyDerivationSalt|token|clientId|secretKey|installationId|installationKey|uriOverride|adminToken.value|password.value|sql_password|erlangCookie|AUTHENTICATION_PASSWORD|ROOM_API_SECRET_KEY|adminPassword|configPassword|adminUser|configUser|MAIL_PASSWORD|APP_KEY|api_key|api_secret|keys|livekit_key|livekit_secret|secret_key|admin_pass|admin_email|mariadbPassword|mariadbRootPassword|privateKey|data|stringData|PASSWD|password|pass|postgresPassword|postgresqlPassword|redminePassword|smtpPassword|registration_shared_secret|shared_secret|secret|admin_token|integrationKey|rootPassword|adminPassword|adminUser|adminEmail|emailPassword|secretKey|appId|clientSecret|webhookSecret)$
  version: 3.9.1
