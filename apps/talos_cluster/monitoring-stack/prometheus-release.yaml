apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
    name: prometheus-stack
    namespace: monitoring
spec:
    interval: 5m
    chart:
        spec:
            version: 82.x
            chart: kube-prometheus-stack
            sourceRef:
                kind: HelmRepository
                name: prometheus-community
            interval: 60m
    install:
        crds: CreateReplace
    upgrade:
        crds: CreateReplace
    # https://github.com/prometheus-community/helm-charts/blob/main/charts/kube-prometheus-stack/values.yaml
    values:
        kubeProxy:
            enabled: false
        prometheus:
            prometheusSpec:
                retention: 4h
                externalLabels:
                    k8s_cluster: midnightthoughts
                # Pick up all ServiceMonitors/PodMonitors/etc. regardless of labels
                serviceMonitorSelectorNilUsesHelmValues: false
                serviceMonitorSelector: {}
                serviceMonitorNamespaceSelector: {}
                podMonitorSelectorNilUsesHelmValues: false
                podMonitorSelector: {}
                podMonitorNamespaceSelector: {}
                probeSelectorNilUsesHelmValues: false
                probeSelector: {}
                probeNamespaceSelector: {}
                ruleSelectorNilUsesHelmValues: false
                ruleSelector: {}
                ruleNamespaceSelector: {}
                scrapeConfigSelectorNilUsesHelmValues: false
                scrapeConfigSelector: {}
                scrapeConfigNamespaceSelector: {}
                # Thanos sidecar uploads 2h TSDB blocks to Hetzner S3
                thanos:
                    objectStorageConfig:
                        existingSecret:
                            name: thanos-objstore-secret
                            key: ENC[AES256_GCM,data:T49oRizh,iv:6tR1BGuMxvt0bQFn6qyX3NS7HY8+oOf74J8OuZjyU0Y=,tag:vw9EwCyKNG6+HtgZsk8nvQ==,type:str]
                storageSpec:
                    volumeClaimTemplate:
                        spec:
                            storageClassName: longhorn-2replicas
                            accessModes:
                                - ReadWriteOnce
                            resources:
                                requests:
                                    storage: 10Gi
        grafana:
            adminPassword: ENC[AES256_GCM,data:52pcVLa0hUgBAKoou4LC7WW2nSOd0D2Am/1IzBcPfk+oxhKmM4NbSccSMlYnnOrfV6C98yC3H2XrVDqj6WUvig==,iv:0jnFR59fzzvh5vDiIMkhiS+BPcgUQN8RBE2aCL4DhFY=,tag:r+NWiZBf0CKu0scRHQrI/Q==,type:str]
            sidecar:
                datasources:
                    # Disable the auto-generated default Prometheus datasource so it
                    # doesn't conflict with our custom datasources.yaml (which points to Thanos)
                    defaultDatasourceEnabled: false
                dashboards:
                    folderAnnotation: grafana_folder
                    provider:
                        foldersFromFilesStructure: true
                    logLevel: WARN
                    watchServerTimeout: 3600
                    enabled: true
            plugins:
                - grafana-piechart-panel
                - grafana-worldmap-panel
                - isovalent-hubble-datasource
                - isovalent-hubbleprocessancestry-panel
                - chaosmeshorg-datasource
            smtp:
                existingSecret: smtp-auth-secret
            extraSecretMounts:
                - name: auth-generic-oauth-secret-mount
                  secretName: auth-generic-oauth-secret
                  defaultMode: 288
                  mountPath: /etc/secrets/auth_generic_oauth
                  readOnly: true
            defaultDashboardsTimezone: Europe/Berlin
            datasources:
                datasources.yaml:
                    apiVersion: 1
                    datasources:
                        - name: Prometheus
                          type: prometheus
                          uid: prometheus
                          url: http://thanos-query-frontend.monitoring.svc.cluster.local:10902
                          access: proxy
                        - name: ChaosMesh
                          type: chaosmeshorg-datasource
                          url: http://chaos-dashboard.chaosmesh.svc.cluster.local:2333
                          access: proxy
                          isDefault: false
                        - name: Hubble
                          type: isovalent-hubble-datasource
                          uid: hubble
                          access: proxy
                          url: http://hubble-relay.kube-system.svc.cluster.local:80
                          isDefault: false
                          jsonData:
                            serviceMap:
                                datasourceUid: prometheus
                            prometheusDatasourceUid: prometheus
                        - name: Postgres-d4all
                          type: postgres
                          uid: postgres-d4all
                          access: proxy
                          url: pg-cluster-v2-ro.postgres-cluster.svc.cluster.local:5432
                          database: draupnir_synapse
                          user: grafana-ro
                          secureJsonData:
                            password: ENC[AES256_GCM,data:HjRutllnmg/29u6W/HHU4M8vUreRNaEFSesRa1e6HV6y7ARZGTWKZa6DXB1nk6xEr/Sp9G+2qH4k8KV2IuadOA==,iv:uutGE6qozcsi0iKKAqgd7XDhooTGmVZKYh5RnwnDT18=,tag:EA1F8FqMwF0eS59lzodXRg==,type:str]
                          isDefault: false
                          jsonData:
                            sslmode: disable
                            maxIdleConnsAuto: true
                            timescaledb: false
                            maxOpenConns: 10
                            maxIdleConns: 10
                        - name: Postgres-connectivity-tester
                          type: postgres
                          uid: postgres-connectivity-tester
                          access: proxy
                          url: pg-cluster-v2-ro.postgres-cluster.svc.cluster.local:5432
                          database: connectivity-tester
                          user: connectivity-tester
                          secureJsonData:
                            password: ENC[AES256_GCM,data:OVF4JTeX2LLcFH57uihggoEjwVRBe5NutwITfrwtUq+88jxmduAFLc6FOFDusTcYJ59K2vZannEfoFl5TrNmyA==,iv:mhC8W9X0JkcGLKpyOH85a1eaWCN7w4kqummJpzlHlZ4=,tag:Hl8kKGOypXUgjg8Q961DsQ==,type:str]
                          isDefault: false
                          jsonData:
                            sslmode: disable
                            maxIdleConnsAuto: true
                            timescaledb: false
                            maxOpenConns: 10
                            maxIdleConns: 10
            ingress:
                enabled: false
            grafana.ini:
                server:
                    root_url: https://grafana.midnightthoughts.space
                smtp:
                    enabled: true
                    host: smtp.fastmail.com:465
                    from_address: ops@nordgedanken.dev
                paths:
                    data: ENC[AES256_GCM,data:Lez9Ayr+XHwDaMftEUoW9p8=,iv:oMaIP8ykMUTpbIz7lptzMnvLsEun7RxZCMHwR4aUMTE=,tag:XxXqWPtRjatbyEwNuJuocQ==,type:str]
                    logs: /var/log/grafana
                    plugins: /var/lib/grafana/plugins
                    provisioning: /etc/grafana/provisioning
                analytics:
                    check_for_updates: true
                log:
                    mode: console
                grafana_net:
                    url: https://grafana.net
                auth:
                    signout_redirect_url: https://auth.midnightthoughts.space/application/o/grafana/end-session/
                    oauth_auto_login: true
                auth.generic_oauth:
                    name: authentik
                    enabled: true
                    client_id: ENC[AES256_GCM,data:qQDeP6ccGC8o4gocJ1cPHC4yZWCUPfJy9b8mTPo+AGSPyspFo3MiYkAs9HHpXSj+l9E=,iv:SJJzZdOraywZ0gSOI2gBJej9Fy/Wys4AmhK0pHt+VhM=,tag:zfDneAVq3iM2R2w/dOaHmA==,type:str]
                    client_secret: ENC[AES256_GCM,data:wak+KiX8Nn24Osv+72/AHHNevVOF0xB6KZPPLatJ7LDN2rhvug5mePj1cpyU/sYLOxADD742,iv:+LizCJPNRQ3OVxcBSe1aKAnb6Jdjd2/suL7Jsy6WWY8=,tag:Ie4eIQQKKMQGcncA2fTVhA==,type:str]
                    scopes: openid email profile
                    auth_url: https://auth.midnightthoughts.space/application/o/authorize/
                    token_url: https://auth.midnightthoughts.space/application/o/token/
                    api_url: https://auth.midnightthoughts.space/application/o/userinfo/
                    role_attribute_path: contains(groups, 'Grafana Admins') && 'Admin' || contains(groups, 'Grafana Editors') && 'Editor' || 'Viewer'
            imageRenderer:
                enabled: true
            alerting:
                rules.yaml:
                    apiVersion: 1
                    groups:
                        - orgId: 1
                          name: CertManager
                          folder: Cluster
                          interval: 5m
                          rules:
                            - uid: ddz3zj028wb28b
                              title: CertManagerHittingRateLimits
                              condition: B
                              data:
                                - refId: ENC[AES256_GCM,data:sw==,iv:wNx0zHx6HWzKdQx013bcqcwCTjkRSA5XllZS6umJn0c=,tag:W3nrHnlq9JjdwApYEv23xQ==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:mXNb,iv:BPyzkxji7B1PwXZ/bhCEliLDbQrdOHKWoMg0hW8gg5w=,tag:bJ/uklPeEqA7sy36Bufhhg==,type:int]
                                    to: ENC[AES256_GCM,data:rw==,iv:jpCXnM0uaSU43XWEehKdm2ZXzl+q2MiKrP0shOm3wJs=,tag:1aHtJ2VANgxRxLzIsQUC6w==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:XcWgxqkt2dvt7w==,iv:ioafH4qmc4pQ+JuX9gCUwKF/BRz7KHvlJgeSrMUkZpc=,tag:Gb3NoLBDI8zwxtOBT1ZV6Q==,type:str]
                                  model:
                                    editorMode: ENC[AES256_GCM,data:4SoK5w==,iv:Nz+tLXBctoBnUhyWeVzl7SjWt2ZQf9qlhzPXUPxuFdE=,tag:uT1bgLz03dC9tNzKndC8Zw==,type:str]
                                    expr: ENC[AES256_GCM,data:bUkBkPribbJeFwYyfmgRGJvEP/4vEgvzHEC2Q1o5P40uB2xy29s5gQr+zaPEK9tcY9k7i0F+9cjHqdkWqPDNYh+gH+cjLiEvSeAfeZCkv8dv45vbzRjJL50NQauST7MsA2jIdkTj6ZEEEmx1Va0do4us,iv:EaeO879Ftn6piBWulaFj9humVY64Bk99MuMZ2FLsOag=,tag:l3VcSxxusUiePWDrAjT23A==,type:str]
                                    instant: ENC[AES256_GCM,data:c8uZgw==,iv:YEl+lXoeS/aBhvWrGJ/+ICCEtjIfzLH7C3zkOPmNaw0=,tag:iHzAfOKa1v2gFN4nte3c5g==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:2Ut/Eg==,iv:fNRgnDi6HAKrLsC7RP+xpIr0KO2WHW6QOqiUhAXGN/Y=,tag:0M38IU4ZrQ9JnpptrO0hRw==,type:int]
                                    legendFormat: ENC[AES256_GCM,data:9jrc2qN6,iv:4GjOXCx/3nqeh+c6K11Nl2bsGlBOBqwY/j3S8QN7n7M=,tag:Bxm9Z0oxeKPAcedmWO8/Fw==,type:str]
                                    maxDataPoints: ENC[AES256_GCM,data:NXXfiIU=,iv:P+QygMd2MGf9SxNYXAq+Ss9+EZVyYqdc11upRxLRUjQ=,tag:92QtuoYXQZN++q0EY5Uwhw==,type:int]
                                    range: ENC[AES256_GCM,data:oRZigRc=,iv:RljhuTrM0gsX5LMAXXCYTHleXrHXejX9n1zodwVhl1w=,tag:Pyb9jz0NwTAerWc/9tNl1Q==,type:bool]
                                    refId: ENC[AES256_GCM,data:DA==,iv:+ynn+36ovz8xa+uVZTQjGd58PSlcFj9YbViS+K3Pjjc=,tag:0kj2e+rFksbWadO1/Oc0GA==,type:str]
                                - refId: ENC[AES256_GCM,data:Tg==,iv:eSaoGXZyBkJJ0wc5R9WazN57MLbRZn80it3bcCuqUbc=,tag:jwQ4nF2g3oBNwoFAoB0VOg==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:BH0t,iv:5FxB6AzbYAsIQZkO3IYmMgS5WtelbWmHxawncjCaxFo=,tag:sfrqZrgStC94i9J9w5GBnw==,type:int]
                                    to: ENC[AES256_GCM,data:9A==,iv:+yBu2WWQ+E45Ux/uqllxdDf5GlIVB33tK00T/eHZbQY=,tag:nbUmrlqgsuCGhaJXb67t5A==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:Vm0FLoPBbeM=,iv:qNOTJY6OrjQd6PQ4Dv09BJrdDPcwRw1lwRLwjJkMJhQ=,tag:UWy6H32E5/1ijGnPPVSzdA==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params: []
                                            type: ENC[AES256_GCM,data:rDY=,iv:GBf8+b4J/oyw9MRe/b+RG7XUTlv9vUhg8eSAQQQoiw0=,tag:szo7WGuWZjcWaHrn0sJT6w==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:nHs0,iv:a3o7Eq2Zq/7Ivs5lJlnSO88/A3KGDkFg6ENGx3SPXU4=,tag:NVFT6k4XFKaOO0yTftNctw==,type:str]
                                          query:
                                            params:
                                                - ENC[AES256_GCM,data:aw==,iv:1LU3G26KaqIr0RJTDXiBBXC3ftKi3U0rPjjhURkG+yM=,tag:grsA9KJ1gnMC+2LEeKniQQ==,type:str]
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:HI+v4w==,iv:70ie59cxWqPIw0tptTeA+NeCVENIpmyYZWZMotSSc9U=,tag:iqQ+OuZt760zL7HxL/urcA==,type:str]
                                          type: ENC[AES256_GCM,data:euyowF0=,iv:ixE/VTTJt6uKhOlpxoJhIkLn5MfWpeTs8PfLlOMkBkE=,tag:xiXPUpbeiKwpro9Yztz9mA==,type:str]
                                    datasource:
                                        type: ENC[AES256_GCM,data:KJ4jXsB8lS4=,iv:uDQU0g8usmtUvdJZi4oqxsG4/RBbS5q58H5v7IZkRv8=,tag:khk7CC0e0cqSQdhvxp4sLQ==,type:str]
                                        uid: ENC[AES256_GCM,data:aFb6lfJzyWQ=,iv:OEE3jN8aLkRkjI3TiSK+UeXb1SHz8nxKY2l1y8QszGg=,tag:9mCGwibYLejBoa46W+bowQ==,type:str]
                                    expression: ENC[AES256_GCM,data:qg==,iv:D1RdZNrgoJwNhJdsYCziciPjQYan9nVPccisWJRKzEw=,tag:ziJBjpi2CtzmcEKroxyx/g==,type:str]
                                    intervalMs: ENC[AES256_GCM,data:eoFX/w==,iv:YioL87heeHSeb1dDX3SsD+pHepplcYaWRMTxdacPQ0Q=,tag:AMoc/1injSH0kLIT1XZjKA==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:BwfRI/o=,iv:KW2DROdUCOhh3zKufO8QBLmP4ElGTaxOn8Hu+IMSM3A=,tag:prhJcfB6ul13SWKv+THjzg==,type:int]
                                    reducer: ENC[AES256_GCM,data:GXaL2g==,iv:TWmoLNHIsP2FfK4YL0ytX7nkPAGlErJ5dr75Nq2HRWg=,tag:T12feRbeElGpxepGCAHjsg==,type:str]
                                    refId: ENC[AES256_GCM,data:lQ==,iv:98xVKHKYJYNY2plmEhI1R/e2nfe3VygCKWtmKDlDFjo=,tag:pzJihzIOvBxI6AcrFW/JBA==,type:str]
                                    type: ENC[AES256_GCM,data:Blp+zflv,iv:a8YeCKGGhMTTcucQHAP0KLpbVOYb9cH/zNCjacTi83c=,tag:vQycldaguOiWvGP+NLX+gg==,type:str]
                              noDataState: OK
                              execErrState: Error
                              for: 5m
                              annotations:
                                description: Depending on the rate limit, cert-manager may be unable to generate certificates for up to a week.
                                summary: Cert manager hitting LetsEncrypt rate limits.
                              labels: {}
                              isPaused: false
                              notification_settings:
                                receiver: PagerDuty Warning
                        - orgId: 1
                          name: Resources
                          folder: Cluster
                          interval: 15m
                          rules:
                            - uid: bdz3y4mow1o1se
                              title: KubePersistentVolumeFillingUp
                              condition: B
                              data:
                                - refId: ENC[AES256_GCM,data:mg==,iv:KYWIb8eXavQuP2sohLVe1dumGhAWSt8h+2/grnh89kI=,tag:DaL5wExVIUSMt0/fKmx1xg==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:WoGv,iv:Ad3Sn1dj0kF6DfB8ymypW/7cIm+3TCmkpDHG7rIpK+A=,tag:GI5EytgVyeUzavoU8xBWGg==,type:int]
                                    to: ENC[AES256_GCM,data:Iw==,iv:5AZNJE4lP7QvPSWkpvXhfBE+zXxyF0ebAprhjPk3pEU=,tag:OfjHSRRJIaYLQlr4rvUAQw==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:58KQJOiL/ZIR4Q==,iv:vyjLvJ10Hh0P4cQS5ZUKciXoHt8BP4/PP2L9mg3s13k=,tag:Qan1nFOPIrgrVXBR0Xx9eA==,type:str]
                                  model:
                                    datasource:
                                        type: ENC[AES256_GCM,data:JFN9UenO06/NVw==,iv:jR9ydi1FkiYwjl3sklSp+HQgwXCA84aDiAMEiiBZp6c=,tag:by4UqJ1mhm1qO6Tui6KTig==,type:str]
                                        uid: ENC[AES256_GCM,data:1ig6cOV/BvXQcQ==,iv:0CO7wDZ1QAURONmA5g/lKLGobvkOOEullTXAlGTGZKg=,tag:CxLR0j3f4SmFE9KaBrmE4w==,type:str]
                                    editorMode: ENC[AES256_GCM,data:awKy5g==,iv:Go/W6R2nbqaAaW6zTRUzs5clcLshTgBYpCoyDt2dDrI=,tag:oGD/pIucbuzExdYGcKBNig==,type:str]
                                    expr: ENC[AES256_GCM,data:H8wNRWpyabTqpT9QGQ1SvWC7cGZLv3XEpGYgK1UrzF1evtet9cXedZXpZs+EmNzlIRP+wA1CCoVpxZgm/vmCtnDh24Y1EER93EIHTC1oRfVproR9777U/qv0tAxPx0a+fXEWk87u6qqZVFBfIz+BQYRUKhcj95Bi38QgFxRxpkAENwvf6Oa7tftzDz2AiLAQCMDAWoYpxFHN/DYEY/2QW2BQaYYcs6QzDny5BY4IskEYSKdncF885e6tfgdpg3/b6ygWgYCydHWL6SCPSVkQq4EaCRbza39i/ym3WrYaM1AJzrtNhrm+lU4PVW7NhS1fnG9DEEKKoTz8eeAzlsuG0dZ8nT8pXANUZo/jKXD3fUNHzhGmCUmrDgSXdNyY9Gait5gog9O07fSAEdUrWc/slCsJZ+ze1P7C+SjACKUJk/oOZaIFljbPgiM62H6ALwn/IQA1kSJsVvOtJXKYuskvRxAW5z8dMs2qXPCzZuz4/6pScX0w3jR1koD4X1befsRhkX2V310pneIdGUrKhEWBPEjkkAKGYCHEHLUuMU4XDVwTyQ80VFdhoMXIXNLN3ztLqHhHyoP4vKuxqYn/+cqu0EC5X/7EucL/tRu7+vO/1i3PNqeBBQBcGnlfuR58PTmqxiPi8XO3bvwTipPMPOQjhPZtW1/sFBV+hM4J4r4HBDoPVF10s/v0T5J/+qgcHw4wNqU8goZOEreWkw9N59WJ5SVLbhv/Qauyk2JN/tI=,iv:MiCIu2gbbWKBamHDcK95Lby4PRDWi/W3XW626wfCFdI=,tag:7Mcx5/Va5ouwxt9/GFZ3ow==,type:str]
                                    instant: ENC[AES256_GCM,data:9C0aKA==,iv:yfhqAmzb4FFuoWiXVdR2v65i8TNJNm8OIMVx18izHTM=,tag:2RSEXR8AzG8cIrrBceK46g==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:5wp2Kw==,iv:Ot9TDRMGNZ4OzSv2Rz26FUy9xDsxsLxRWUvyGnzNlh0=,tag:yYeZ1jBW/lGNwsc8oOfWoA==,type:int]
                                    legendFormat: ENC[AES256_GCM,data:W3UJI1ep,iv:JDUJWzH7HrMfXFWvl5qHCXx8be5Ccp8PZ7Y2uGNz1M4=,tag:kFS3swplX9Cr7/AWis0gwQ==,type:str]
                                    maxDataPoints: ENC[AES256_GCM,data:XecRnJU=,iv:v84ddiJjRM//0Pt8Jw3Y7s0zaoo5O9XCUdvk4sGGR6Q=,tag:jEKgEogc8SCW5Jot1OECZA==,type:int]
                                    range: ENC[AES256_GCM,data:WxNL/Sw=,iv:ZZBxf89Y6Qa4qi+YuAerWJ7YbMW9b2VNarQFtyVgPB0=,tag:rn/AsiA7NA4BH+hlSUejBQ==,type:bool]
                                    refId: ENC[AES256_GCM,data:gQ==,iv:2Z8fbHc0HBCGgnepnTxtFV9JIPcXXupNMr+nt6llyZE=,tag:Sgi4rNk6dA1Di1CiSLpmCA==,type:str]
                                - refId: ENC[AES256_GCM,data:XA==,iv:7MLmVTCr3pxQitsRPqE9ren99GbfLNk2R5rtah6kpj0=,tag:dvvPTDW7+IfAOppeJrkdpg==,type:str]
                                  datasourceUid: ENC[AES256_GCM,data:/s+88ueq+f0=,iv:YcifiXhVgHsjHR1WrxIfjXm9fPgEH+BZTKfli0ZgQXU=,tag:saqL3QzH2ZvaQqtDo4yhUA==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:Uw==,iv:QuH9USpDoCT3l9RkQXKiR6oxv2FL90C9KUY+ZU0Oefs=,tag:/Gevl44aihxmOSmZ2L9s/A==,type:int]
                                                - ENC[AES256_GCM,data:3Q==,iv:dBaulyWyThkpycBVUatPNx2KrwPK+vAe+SUDis/1Kkc=,tag:pz962gt2e4Uac1BdHIk4Nw==,type:int]
                                            type: ENC[AES256_GCM,data:dTs=,iv:TiTR0D/SpOUHAFtzuIqFIwRceTpdjEqW54iHnUEJrHM=,tag:HlRzrja5natqNj6WbCqlPg==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:veuL,iv:r9aIi/QwzVg86Yuncy5ZAzxQKeUHA7kdrDbjEg2YQuU=,tag:8BXBo+aNw3ZotrqFl0bPcA==,type:str]
                                          query:
                                            params: []
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:b2F2,iv:CXZ0UKfM+sGqUI+z6o4RZYCUkTjOLx6W4l2pFzLU8RU=,tag:mmkXJANW1wdFTTRAQ0gWvg==,type:str]
                                          type: ENC[AES256_GCM,data:sOxYUsQ=,iv:/1C0rRNn9FdrODIdjVP2OYPnKwBOzaX4J5BqG//+qhw=,tag:c8VA1J+B4BuR8eqs2quMhQ==,type:str]
                                    datasource:
                                        name: ENC[AES256_GCM,data:bwi6cjguLV37EA==,iv:hMyQzHV9AQm50BYz2n5GtDCdFEk3paPE+eK8tA1ZQms=,tag:Iuo+/ekMV3LVFlS4ASBPKw==,type:str]
                                        type: ENC[AES256_GCM,data:Ur33ZxAlpgw=,iv:83zDKS5663b6o8UaTBbiqH2euoagKDo8jQNxFXqszuA=,tag:eLWsqthqVNmavCcCUe1rgg==,type:str]
                                        uid: ENC[AES256_GCM,data:RvQ8piLYaJQ=,iv:Y1lv/bCo+iM/dhNrv5cvE/J+/OOzgOLOrTXvStGPuHY=,tag:3OtEQW8ZpU5kB/wg6N8EiA==,type:str]
                                    expression: ENC[AES256_GCM,data:fg==,iv:0wbbF9vnCVE7q0ROxyj9FE8CW6GQ5leUypPmEFsKzyI=,tag:2nFYrU4s+F1UESo66jHEcA==,type:str]
                                    intervalMs: ENC[AES256_GCM,data:eSDuhw==,iv:AYlHsZRPqrII+fPAiFyLdb0hWtg3ibbL2SXLYpXdqZU=,tag:HENUFX8MCcSDLLeVjS5p5Q==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:IRXRe0o=,iv:eutX3nK3oggvGMhwxRLfg8zXGSWlk5Scnn4+ePt4Tt0=,tag:FbLv4CZT2WbkGw9sBeu+Ng==,type:int]
                                    reducer: ENC[AES256_GCM,data:wpGfwA==,iv:WqInQpGRChuw8UKonz/mN4seiG8xKP07eeSS5NH9bsY=,tag:EgRz3Qo5RgVALQI80lpBVg==,type:str]
                                    refId: ENC[AES256_GCM,data:IQ==,iv:MlI4H4GYQkps7XCeWl1tkUiLkXbbgWxIeVvCDDpb2OA=,tag:uolUmkvbb4GQI5K516ggpA==,type:str]
                                    type: ENC[AES256_GCM,data:2wSg6wP2,iv:gXbstsKDZ4/OCOgVP4Klo5tbcobZhWL70VHcOFT8T40=,tag:3lLkUQ4UhjcKcRk1Ij1GNA==,type:str]
                              noDataState: OK
                              execErrState: Error
                              for: 20m
                              annotations:
                                runbook_url: https://runbooks.prometheus-operator.dev/runbooks/kubernetes/kubepersistentvolumefillingup
                                summary: |-
                                    {{`The PersistentVolume claimed by {{ $labels.persistentvolumeclaim }}
                                    in Namespace {{ $labels.namespace }}
                                    {{ with $labels.cluster - }}
                                    on Cluster {{ . }}
                                    {{ - end }}
                                    is only {{ $value | humanizePercentage }}
                                    free.`}}
                              labels: {}
                              isPaused: false
                              notification_settings:
                                receiver: PagerDuty Warning
                            - uid: cdz3yt59a0miob
                              title: KubePersistentVolumeErrors
                              condition: B
                              data:
                                - refId: ENC[AES256_GCM,data:Ag==,iv:vX/0z5iq4EUge63rbJ0ucutCjlxLNq+sNANVoLy8sBY=,tag:er2yx7GG1zFd3sXnD6bzoQ==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:AtML,iv:itcbLhsqs5p2dMVpNnlLFmIKxria7ju40UDx/5hr+D0=,tag:Wtmi7JuMNwBikwZwOhmz9g==,type:int]
                                    to: ENC[AES256_GCM,data:Fw==,iv:cG1dGEJ0R4Rnnch8nDGdu//ufcV+n0PHA6FpBwVBYCU=,tag:fBbdyx5IEKLZVLoh8e8B5A==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:GwFxBN21JEjc8Q==,iv:fnUSVXChTQtJ33aQS6XTXIfI2ECV+HDOVkIvpfPe5fs=,tag:8744egI9TlmvU9bLVeY+VQ==,type:str]
                                  model:
                                    editorMode: ENC[AES256_GCM,data:l/75GQ==,iv:kKUl1dFfkm+y41ex05VHKVClf0uf6J2F1xG18hmILCk=,tag:IY+Aw1Ijunzj7R8GJjeseQ==,type:str]
                                    expr: ENC[AES256_GCM,data:Y0o7eDdqUk00dUUWvYNOp1BLh9qp53+avaLbrW1fuliVOLTSMsit7MU+UhFvnz/k69GpzMMB+F/XLoNrPEER08dDYtU38/YGawPtDrPGBW+Q6chbRmOY2Q8P,iv:EEl+9zpUN8gnfa/uidyzuFLBb7gRaoT0QapFb6BfuSg=,tag:KIZEpzhgy/m5HLiHeIZ8tQ==,type:str]
                                    instant: ENC[AES256_GCM,data:FdxElA==,iv:iPe9lZoZgwMxFEFnR+vwQeHshnICL6pyDKjf6m4WqWc=,tag:j3STiz/jO+JWxI0pSKCx2w==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:1ibISA==,iv:aff6EtuhdL+7iql8Kj/GYSeRARlp0OiNC6aqY7mMxHQ=,tag:5Hb7HHCmCJykwCPTbfFzhw==,type:int]
                                    legendFormat: ENC[AES256_GCM,data:3Qz1YEgm,iv:mvuRoA/tzAsA9oKrbIWDHK4n8hxBTDkLV7zt5fle2WI=,tag:YSlgQvMUpB+M+n8Mvds+zw==,type:str]
                                    maxDataPoints: ENC[AES256_GCM,data:LkTToD8=,iv:CXwTQlpPNuh090ZOLLNAmxgDFLwV8FzM4G4TguaJktU=,tag:sBFx/fb+VBv3VC+IU1gUCA==,type:int]
                                    range: ENC[AES256_GCM,data:vKYiHEU=,iv:nU3kXT1kXs1x1VDVvXoD9aoaLY+HuP7ZYlMABRsIWnc=,tag:u70Pc9ssh3h01LsRJ5s18A==,type:bool]
                                    refId: ENC[AES256_GCM,data:zg==,iv:d1LWGU4Kbk8wiGwRMIzMFNzdIJXwlM32E12az3O5nUQ=,tag:/qI5C/FBz9oVVIonlaSnnA==,type:str]
                                - refId: ENC[AES256_GCM,data:nw==,iv:fHE1i+/fgGxuEtSzMsLXitMJAoP5Jmu5alMzkjKbjV8=,tag:K37aDNnPCo4c23AKr0jV7g==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:KwMs,iv:EbfVrUgd/pLf8I/7NmzeDGiz7jXA4aHwnrZSSIo9brY=,tag:o3OQD+IPcA1TygpM7dnfzg==,type:int]
                                    to: ENC[AES256_GCM,data:HQ==,iv:NVqCSS5BGXG7OZtqFhziBbp9V+2RMRK3ZuhZcy16M/E=,tag:UJZof1e+om+TRpIAMkoLbg==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:7R0SroVJs3k=,iv:e+pNwJXe/pEmrl2UJWMrBm3vS0Na8+SCkCAU/7xpAb8=,tag:inQwhiceQVgrUgYkQjgO/w==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params: []
                                            type: ENC[AES256_GCM,data:nX8=,iv:TQ8Q9ISTAEeBxKuR94+/my/d8NaaXSEgidTQe7jLrgo=,tag:WUok9aa+p8brKIZaebB8LQ==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:KL4Y,iv:hOKAO3jML76BKfw63OI0qdtSjiLqgynAZxyoxsWLgPE=,tag:C2XrXPfG/h+6yLrv1Y0Vgg==,type:str]
                                          query:
                                            params:
                                                - ENC[AES256_GCM,data:lg==,iv:fJl465qfKVGB9zKS9hK5ULMeEeLVq+4RC6sf7ijeeJ0=,tag:qDSwCIRzHObVSULBaUKgyA==,type:str]
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:vvcvcQ==,iv:IuLXQgQ5EEgFFzBXPwruvJNfDSOsZxmKpGqIG8pdINk=,tag:WCaDhbjyNjzleNe5LwiaNg==,type:str]
                                          type: ENC[AES256_GCM,data:MCxZcQA=,iv:4ep7afIRau2re0vHZD6pbCCq1boSmw1o1lVtoawebZo=,tag:NEPBwatTgVdcUcA+W8u9lg==,type:str]
                                    datasource:
                                        type: ENC[AES256_GCM,data:z8R+X8F3YVA=,iv:AZEcuLk01VaNfdjWcfyBMW/cQFeVbjCSxAcrT3niGZk=,tag:pUQLpJj1aG+/cH/WLWKhGw==,type:str]
                                        uid: ENC[AES256_GCM,data:cYVdgVxp7MU=,iv:OxIX2Ba9zvTr1ED+0xV8v1C71vNrGatr6V4RUsVTIEQ=,tag:YpOaboxHGYa9sKviFZ6OJg==,type:str]
                                    expression: ENC[AES256_GCM,data:KA==,iv:zmau8MhAYKwC759z5NvOS+AQvD9lbej+lvYYg6mkICQ=,tag:MgW807YJtdrCYQ1cmgfp7Q==,type:str]
                                    intervalMs: ENC[AES256_GCM,data:AoWZug==,iv:GubPZKqYmGNaP/YqCLa+qS10595BvbVZITiiXGUnEU8=,tag:AQCm/R9qMcV8VC5f3aeb1Q==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:eYb8xms=,iv:wXxEKDWcHS66VouraBiLTL6DXIubVwv0P0YzUciN0as=,tag:UQBBn1wzvwWAPTcgh2n1Fw==,type:int]
                                    reducer: ENC[AES256_GCM,data:JkQKPQ==,iv:s1i4o6CP4mUHhmhJ8Lb/+AnNM23H75Y/QSXewvHfUUQ=,tag:8E50zDmfmpqBJT2p2RjmbQ==,type:str]
                                    refId: ENC[AES256_GCM,data:+w==,iv:nQO1tKzyuw5t71NUkpHcqe0QjHkRJE1it4QjmvQyqTc=,tag:/cBT2iQyMNBSTo8FuehCXA==,type:str]
                                    type: ENC[AES256_GCM,data:DGOOnY/P,iv:5YFF9bnuUDBSfBy7vo2RVyn4g27FhG4k+cvhtyT0cVc=,tag:NFTLp3mBYH21IeNj4LhNFg==,type:str]
                              noDataState: OK
                              execErrState: Error
                              for: 20m
                              annotations:
                                runbook_url: https://runbooks.prometheus-operator.dev/runbooks/kubernetes/kubepersistentvolumeerrors
                                summary: |-
                                    {{`The persistent volume {{ $labels.persistentvolume }}
                                    {{ with $labels.cluster - }}
                                    on Cluster {{ . }}
                                    {{ - end }}
                                    has status {{ $labels.phase }}`}}
                                    .
                              isPaused: false
                            - uid: cdz3ywkoiwgzka
                              title: KubePersistentVolumeInodesFillingUp
                              condition: B
                              data:
                                - refId: ENC[AES256_GCM,data:UQ==,iv:eCtSSpj/LuOTRNNB2Uy2fxU+x0fTR+WiSpXk2T0AUwM=,tag:WeUWem/isqIAQouQsgmmNg==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:hE2Q,iv:LlBnn84JQCed+OqbMCrhaQfYi40/KrhaoksUy0DpIck=,tag:gp4zitFaoo255xdKAkqRTA==,type:int]
                                    to: ENC[AES256_GCM,data:AA==,iv:ZjEmzyQmGNQEI70bL9EBpyCDL9rgXnOqI+yVojR57/M=,tag:ryJVHBqyVf740ZitkA49hg==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:S6AJanAZYps6Gw==,iv:UZYL9AYEx2pRgfKSZw5VfzK7K9KYMSJsjNDxpauBL+8=,tag:IcBXHVcDFiIRHwR8bN1alA==,type:str]
                                  model:
                                    editorMode: ENC[AES256_GCM,data:DvQb8g==,iv:BarlCfsd/VSBs3raXnoXhYWKhmlUPDQcFsRZmvZdeRc=,tag:EQAm45LnSp9Yn/07Yrm7fg==,type:str]
                                    expr: ENC[AES256_GCM,data:SjoyAhGzC+TgJnRwXo5bEOHPEerCrMb4wR7MgCIX2y2Mq2H7XWoKYm5WvjBX9op+1j9Pfd3SnWZ6h3HkDxANNSl2ZElIKTfniqHdC7690TKvnX8aq4/nA6ViHgCcDAPv0KPnR11ytKr8mEpjpBf1QR9UV7EOB+ripIxv/m0etfz10zqS1fFwQsnaxp8bnrDemQFU90Ky9nu5c1WN1Y2l3lFfWO5QYBEiwXPEb6tvg+rIhIDTzKv7hIVo2ZST9WPUtHlEY8MjtlzH/MnGckSTdkRYj0CGjJHUYhNnZBjrPcm5zNcFxW/S8UukBKWO0vluUxml5txKSqaF/kd92ipuiXiqd4Ogcir7qiCEHrWQWWxzKcUUT7PbL+WXhktKwXwUyA6GKX8LD2/Dz3bI1H+YkTi6WaiQNYYelQX3QxYb1O437I8ugSl3rP7XY+ZSJtNdr9HpAM2CR63wQsmJAbEalKkTSjfJQ2jRkMTmPANYuJ8XzM0dgUar4j+DijfEZaKyesdQfG4Zvn8aF/Phhov89OM7XY5WgFkRQD3FFMBko0zCTUHFfxCHrkJSz/z6QRiXuGpOqgFk+dzoTpVUvPrsx1cYoli3WhBiFmOp+R5EdjzMrDZ2oqW+Zck8ARx4GSDWKmFmoF/3IwnAetO61aHAChwjJ+mmQqOYfkHEuGg9ZxilLGqVlZ4HjZ/9jOwucW/mxtLIgS4GwEjF8Osf/NhcUyKBv6OOSVnF6GQm6wgPI+iJckLa18SrwvAKHP9d97uBTg22oyrdFpKkzmiPsaCDoL+ct0ZMHPl2RYBiNukVMFwANVeNYtYyauXGNjFI8rj4AXE2LoggAJHXXPTsi6VZ7BYoaG0t5kN5gzEQtSLbJBEh24Ogdjc/PLj95Cz/DQmTVtHltuHCTw==,iv:LDy4tXIlL9zw0w4Jb3k6D8WcyWplKiYbQUcnr/W1qPk=,tag:iegjzY0u4ZtGn/rVIV1KhA==,type:str]
                                    instant: ENC[AES256_GCM,data:Oth/iQ==,iv:4l3nEnq3bgW4dBM6MQ/oy0onXb8BL9wzhlzBNKuc0a0=,tag:A9302Mv5ZNEZIR1Fya8jag==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:Wrq8sw==,iv:tfCs4bilzzu6nN0ceryhRw0PML7h982W9QlsaaPMqdA=,tag:my95r9eooz0USUj+OQ16hw==,type:int]
                                    legendFormat: ENC[AES256_GCM,data:ftIiqrK7,iv:z9xlNsh7ATHtkrCcwRqanmpvq3nPePBIrlXjzylCrDo=,tag:VN7XTYFT0leNvvNiO6ugEw==,type:str]
                                    maxDataPoints: ENC[AES256_GCM,data:cNfryJ0=,iv:V7snnoJ0ogZW5AixqXK2bM58ud1v26RRDlcjN/Oj4qQ=,tag:tgmh2v6H7qr/X+3366IG9A==,type:int]
                                    range: ENC[AES256_GCM,data:F5gG1cs=,iv:UPLfbOmYXqGHDQbOjdJOvbTsPlL9ozFDM6udf+yGrBk=,tag:UX62oFs2QyLb0p3/j0odjA==,type:bool]
                                    refId: ENC[AES256_GCM,data:AQ==,iv:XmPp/up2NDgHGFHfNNr8B4w1HBalwRnHxYxOExorcPY=,tag:Rv1HEcZdyvFeoPqRxcqWIg==,type:str]
                                - refId: ENC[AES256_GCM,data:Xg==,iv:0qzrBBvt4KSJRdeS+8E5WYjX4QlRVuu8kta2x415iE8=,tag:SkVaiti0cPYtOei381CJDA==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:shIX,iv:IIiWdAUhZUZ9GN3AaMROZHK9Bl6SFSnbNMHuPSNXvOI=,tag:zq/AXoLHUKvRZ7ljuLZtfg==,type:int]
                                    to: ENC[AES256_GCM,data:Tg==,iv:DHS+nH+n6jZPiBpJjCmA0k7MRlBuzJI7O+SYrJCJR2w=,tag:9+OM+T9d2L5R9tE+E85A1Q==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:cYNhqg7bQJ8=,iv:SHGOaXQwV1J7FwCXFnyENgOEMehVcvZBkWTgTCeU1fQ=,tag:yczZqRnX1onTVoDpKVR7Jg==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params: []
                                            type: ENC[AES256_GCM,data:O1M=,iv:GwGM/KIOOkhc013kUlrbC+EOJVYpfalYLzfGrMh0R5I=,tag:A9lzQMtN4RrMA7WpAYmRIQ==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:Nq/k,iv:B1J+XT/VaYmX1MINBR/Oh/b3oz9YX/BFiKyafzqNy78=,tag:zjw2dBWE0NStaO5wXmZCGQ==,type:str]
                                          query:
                                            params:
                                                - ENC[AES256_GCM,data:Iw==,iv:zAOs8h2kWgWWcVIPpFJdJR9fE0SHhIccJFMdZ8i/iXE=,tag:+AUgrmVPDYZFUFAS2a9Bpg==,type:str]
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:8G4cTA==,iv:4ZbipJZihENCIzDCVofy8VJRNzJhCv7D7xqovlN5HFM=,tag:pnXStjiDewzav/ORB5imRw==,type:str]
                                          type: ENC[AES256_GCM,data:iJ+byxk=,iv:RqNydSOEKk2mQ+aicq4ggwJwsCA+t0g6L6Hm04puwJg=,tag:i3iMt1RBP7s43X+9NrFRKQ==,type:str]
                                    datasource:
                                        type: ENC[AES256_GCM,data:AWvQqCDnyV4=,iv:/aAKOwo6iRyBBqP25PpwolMOIW7w6mqB26JRW+D8ORU=,tag:AxLCVyoMH1bqcLffbp2/Aw==,type:str]
                                        uid: ENC[AES256_GCM,data:j2QjjIYsq9I=,iv:UeXBOZRwsWtxBoC9OGp+SFN7TNaxATfgL+7Y73Cvegw=,tag:O3ZFJyABOOoWrk8ehlN3qQ==,type:str]
                                    expression: ENC[AES256_GCM,data:kw==,iv:5M0sM+8a2vqIPsigY+jfj+yBB8DaNciPVPTWqP/+R7c=,tag:sHgpsD94D6bwPwGzrSMaRw==,type:str]
                                    intervalMs: ENC[AES256_GCM,data:ahctWQ==,iv:J6QiF91rU2ns/WuV7q9c8I61uISX/sBl69Fhp/bfKUQ=,tag:gqtzDaME9f51TyP5hW69rg==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:J34eyH8=,iv:3nUizOJlRda0Epqjg871cPpGBK50BrNu2Zfjsmdpy+U=,tag:PwAZke3AAdX4gk8ibp2KJw==,type:int]
                                    reducer: ENC[AES256_GCM,data:y7twgQ==,iv:o/mwo/UtYWBE2r2kWs0osTzQ9J0WE2a7F3CMx51jwfY=,tag:NurEAQWOb16OyLCB9gnngA==,type:str]
                                    refId: ENC[AES256_GCM,data:2Q==,iv:oXwpOcd8FEBjyr2js93OyrFMmTDvhdsMZkuyl6CUkAo=,tag:2oUUGNaD2hXDEhVV1iUm1A==,type:str]
                                    type: ENC[AES256_GCM,data:kkt2Po5a,iv:Jyrdb2VrWwCu2hjxLpHvAFOmHtrXkXKzXFpL3h1XBuw=,tag:ZwCdOa2wLKVm4d5Y9FPNsA==,type:str]
                              noDataState: OK
                              execErrState: Error
                              for: 20m
                              annotations:
                                runbook_url: https://runbooks.prometheus-operator.dev/runbooks/kubernetes/kubepersistentvolumeinodesfillingup
                                summary: |-
                                    {{`Based on recent sampling, the PersistentVolume claimed by {{ $labels.persistentvolumeclaim }}
                                    in Namespace {{ $labels.namespace }}
                                    {{ with $labels.cluster - }}
                                    on Cluster {{ . }}
                                    {{ - end }}
                                    is expected to run out of inodes within four days. Currently {{ $value | humanizePercentage }}
                                    of its inodes are free.`}}
                              isPaused: false
                              notification_settings:
                                receiver: PagerDuty Warning
                        - orgId: 1
                          name: Kube-system
                          folder: Cluster
                          interval: 1m
                          rules:
                            - uid: d2b94d3a-2483-4be4-bf2a-2fd9f9fac406
                              title: Coredns Failure
                              condition: Thresh
                              isPaused: false
                              data:
                                - refId: ENC[AES256_GCM,data:RPa/ESw=,iv:HcNaLuyUq0/nqI8RWstC1NQkXySb6ameW8ZO6ovdXig=,tag:b4W9zK9F1sMn8xEigvQ64A==,type:str]
                                  queryType: ENC[AES256_GCM,data:nhNdd9o=,iv:qrMO98CnKMk85vKCkmOdV/wDkIvIcw1Vli4f615s2Jo=,tag:gt3Zi3fVRs8TPtAzqWv98Q==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:JVCx,iv:MN7tsCXXfpZS1/ikrEmMiIgs59gGGO7CnAwNk2EFzSQ=,tag:4V2Gij/s0ipD88QlIR/arw==,type:int]
                                    to: ENC[AES256_GCM,data:4Q==,iv:zmU3TGVNxqxGGhwp6TnENGZLC097SLNrH81FFcdbqsk=,tag:rCVKla8KfGHA1TFQwJ7M4A==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:P1hmpw==,iv:l068pkbNcJMUuXeyn7svWxlqd1hW4RWAAPbfzaPEe2I=,tag:9U8IMQWUfMlhBkGQGVPniQ==,type:str]
                                  model:
                                    datasource:
                                        type: ENC[AES256_GCM,data:otY4nA==,iv:0u6XXanJieqLsGBeJedoAHNyQy7ABsJXNHwXoW+T7bo=,tag:/rBRuL25L2RyvR2IXxlm9A==,type:str]
                                        uid: ENC[AES256_GCM,data:nYu4ag==,iv:s9J4T9k/FlNF+NIcgF2gjjvjAwnZTyfDTRu9LCIE8QE=,tag:MKaIz6+iGVECF9jQtj6AjA==,type:str]
                                    editorMode: ENC[AES256_GCM,data:4RQaC9WdRQ==,iv:3ibKYLrq3u+VOryqX4ZY3DGAs0qGO2iPy1ft/Mc/gXE=,tag:Q5NdcaKGlM+laRTINx781w==,type:str]
                                    expr: ENC[AES256_GCM,data:5hrZAELWTmhmfzA59XfWy7bMp0vlfWng+gQAv6mMNxun3JUWGdWDR/les7N2LNIZKF6F89NFvtgnQMLabkZ0E9yL180Q,iv:ss7fUbeL3fb3Gu7OF+fQPJi1JKJc3MzKH9rVHlP9LBQ=,tag:n27ugyB1J//gpTGnJHM9eg==,type:str]
                                    hide: ENC[AES256_GCM,data:rMbz9XM=,iv:Rh5zOhvrkpHL/fkE85+I1Jwv5NcEeOA4BDp5OMT35fU=,tag:G5DdHhoOtOfCg5ze+RkCkw==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:Jg+RGA==,iv:pFiVJ7fqZo05Yp4Rdkcsl4MwoM58yq7ONYLt/wbSltU=,tag:0rTwei9k2h92f83VFgrx0A==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:ZdLepeM=,iv:j10VwQGop0io0oxEQiwT6Zd4c1cJnk5pS+Cd4QF08S0=,tag:+CpR9ZwiLk7TFTY+NUGWzw==,type:int]
                                    queryType: ENC[AES256_GCM,data:XldAKSo=,iv:yuT1o9kLzJ+dMFs2H2dM/egtIm1pd2/EmC6BX2cHlJM=,tag:m+FfMpny37e2qP2ZWcgnWA==,type:str]
                                    range: ENC[AES256_GCM,data:27o0tQ==,iv:QAeFQ87uDfOW17k8CnwJYT6acVTpVoEVo91Mm0cqEx4=,tag:oEYlsbDGzm7d1jX7S1orSw==,type:bool]
                                    refId: ENC[AES256_GCM,data:apfu+Ew=,iv:Qc5oshH8u7KNQv+SlcmQRQ26Dfh+5GNYt5s5AXInh70=,tag:z9BTfOrlxbwjCwl/vPt8aw==,type:str]
                                - refId: ENC[AES256_GCM,data:8P+wn1+P,iv:5bhLmQ3CgcHHWpP4hcvlJRoUwJ9u2ilmX+mStfokjwo=,tag:P+E9EO8Gf7aFzPZZxkngGw==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:zS/x,iv:d+FWXKBOzIQqhWyL8H34GCVaLkvLpaLpmMPGNjO1ytY=,tag:HvvNW7fYsSflrJXsg/hO+A==,type:int]
                                    to: ENC[AES256_GCM,data:fw==,iv:+qUBK0zlrbPR5YdCLJeTJBzCHlNaqmiLTosfP/4FyNU=,tag:y0CWGywKQp41prC9AtdtCA==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:dpzMlVnhxdQ=,iv:eW3d6rUEi1F7wpe63ILpB5LaP7maczNlqf7uhqU21/o=,tag:b4JidblbPj7YseU0/cwaoA==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:WA==,iv:lcrbPFNDcKBebVqO6hyr8NOwjMLFvIzLnwFHUgA83NI=,tag:c54n6h0QUHcQPZlB1JtoAg==,type:int]
                                            type: ENC[AES256_GCM,data:g90=,iv:JYwuz7HFMOk+2sFi3zpwaRw/RubKUvYisCP6Kqdd+rQ=,tag:ITpSfPUCU19oMMw9WiXAwA==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:Z7sN,iv:mXAVmtQD+d/AdfCvYoJnURYiVojgNpJE6p7/zuUaw2Q=,tag:QfZTc7OtavzXcQ/b53yCMA==,type:str]
                                          query:
                                            params:
                                                - ENC[AES256_GCM,data:LQ==,iv:IEUooSkMStUM+b8tImuAa2zBLnyo9tduZtmZD5mX7IY=,tag:u1GyupgWOgTnMxeX3Syaqw==,type:str]
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:TtxJ0Q==,iv:2Qf7WGTD3M1R/G0Pi9kFUdQQVveJGcHKAApbRRUqBqE=,tag:aepNbzgaDhU3EnE8GLafpQ==,type:str]
                                          type: ENC[AES256_GCM,data:0W0Utqk=,iv:VY3/x65TZ660cO6+KgridxquSWwDAvi5yM5W7pzQPuY=,tag:N0nKldiaStwA+z/gLwyb3Q==,type:str]
                                    datasource:
                                        type: ENC[AES256_GCM,data:inEdRfQQh+k=,iv:Pc0vyrO5rPfpSAmuYku1+AyD3CLWshKt5mwkRWxyqow=,tag:tEs4yJxP1Gd7LlQdsOIdWQ==,type:str]
                                        uid: ENC[AES256_GCM,data:vF6TCVzcGT8=,iv:o7ywDJF6s4ncwj2g/KoWDsjdwh78/YTDSW33ozs25+k=,tag:3pg6XzLNEEmO4S0p5ywueA==,type:str]
                                    expression: ENC[AES256_GCM,data:YA==,iv:ysHdM+fWySuZcRIpYjn6T8sWeUs90VuRtYsgRO8u5Io=,tag:f3seZdvYR2CTf5fqMt8YeA==,type:str]
                                    hide: ENC[AES256_GCM,data:QabqFg8=,iv:i95Bc4RgJl7nupuF0t/oBcy3ezSVXIbJ11GfvsiY/44=,tag:P43RguKXN62S29fJe9U7Mg==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:t1X35w==,iv:aV9CqRnQ+VdAan9C7YxKmGT4tkNFzxCRBKZ4RJHeMuA=,tag:wFwy1jwYkmFAtwxOewRQNg==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:v4pyvHA=,iv:/KfHe01LGNFV1Y/ShBsiXHF33L3yQLAp494JpV4ac7s=,tag:Eo9mY5XZhyUii1sV/tGCTw==,type:int]
                                    refId: ENC[AES256_GCM,data:BCkbO0Qd,iv:7XT3AQKBBvn4Uyt22KIkjbLeIfQCf6ZM3BixLYpAOTs=,tag:JuzaYQ30Rwx2vt9uAoyTWQ==,type:str]
                                    type: ENC[AES256_GCM,data:pI3FrgbPQBvT,iv:pXo1rbtpQzVfaRD6KRJ0tM9FBcAlrPRtNBpleM2Iirs=,tag:xSD7d6TZ97lipG6zf35x+w==,type:str]
                                - refId: ENC[AES256_GCM,data:WA==,iv:YJ0bJNUUDg6EH2JdJYbn7uFhKfJPlGIooz0ndiXScT8=,tag:Pd+uRSSzanRxtT0sJxfvSw==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:NSHF,iv:LG6dFauPfeiJNVsxZagdAxoRv1cN2y9N8jEjW0pAYH4=,tag:QJBXG3yGHEL5W9xCoCFcxQ==,type:int]
                                    to: ENC[AES256_GCM,data:6Q==,iv:tvhBrMEtesAab0xdmxpMVgmCAjhIfwj12Y1f+xwnato=,tag:DcOm9CQ14pB3A9KIB14ZRQ==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:Chsfa+VmQ8Q=,iv:fzaPI5WWtrSIaP2Q95eosQnewe41RjXEGnhEf4tGWeQ=,tag:3RbhbqWFR5tHAeGBj0p3Jg==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:ag==,iv:UXAWfmiFnOzkApuG05yX31lJqWR2d/Nb1xAZDxVtZCg=,tag:0PPYdPT+xAlch16nuB2xJA==,type:int]
                                                - ENC[AES256_GCM,data:tA==,iv:PEI3ThH2MBHx24DJWcbMLy5QKTL/cgmpoh3kk2UbMTc=,tag:NoXSZoEDjVjUhKzQnCdf3g==,type:int]
                                            type: ENC[AES256_GCM,data:IFo=,iv:VH7/bx7yfHSLBBSAiLr3gl98RRNH5VUt3QjZIxkhobA=,tag:0WZG5N92e5z5MuMkLlj2Rw==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:QNuL,iv:q6TuLwtRJTLVXpoxqz5qWVoPZnNeD5Gu5IxKry+lcwk=,tag:rUAUtylZR+WMDvIfl6vA1w==,type:str]
                                          query:
                                            params: []
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:vnwQ,iv:9bL8hLQv1YdzTiqgvExHCXZoQWq6sAzQ0Tac/I1Lspc=,tag:2v3JMpeg3o/FGs1pSxm5CA==,type:str]
                                          type: ENC[AES256_GCM,data:yu8J77U=,iv:NgMSaFIGsKX5XkY+2TdHDrC48bXvrYCJlctG/znbJ3k=,tag:0i7I3h+90mG77qPZPv9vvw==,type:str]
                                    datasource:
                                        name: ENC[AES256_GCM,data:tq6Ez0qA5zOdjA==,iv:boUwDIvldHV764yqi7XOJXXN9zlxunE9X84ytA13ovs=,tag:Qjm+tCDQxuFecGpaE6r3oQ==,type:str]
                                        type: ENC[AES256_GCM,data:p6gL+fQfi3A=,iv:zPxnCYcC9PIpkMR4XlwdPA0/ygRFJowNE8ynUmxufzA=,tag:wq+L1WvzE4gBvpf52C28qQ==,type:str]
                                        uid: ENC[AES256_GCM,data:IEC6+U7y3lQ=,iv:PdmniftFRkZxyu4teJgt/Kcqp0hYVHP5Lv0MVNc5sFo=,tag:YpI/o8nW1Bx5IbrgTUsJ1w==,type:str]
                                    expression: ENC[AES256_GCM,data:7zO20Pw=,iv:RRAxZPUj0rD+L8pFXab3nhESI+C9toY6+FCwPgKRtRE=,tag:uCJlcFncEGq/ud99W0PQ7w==,type:str]
                                    intervalMs: ENC[AES256_GCM,data:/mJZmg==,iv:+BNjrPfoM69dd8z+NhojqDvFMQW1HNhgYoThvLPHrAk=,tag:kzzqI/GWHLF3WDHpoDlMAw==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:dCYkbPk=,iv:4RAW+qA+w/qC5hzGnlT6sGXjcqyOGU6o3cb0HLsD1rM=,tag:8QoiR9/cOJJx73kXl07WpA==,type:int]
                                    reducer: ENC[AES256_GCM,data:vnJ26g==,iv:SFJGsA0eW3ho8Rqhm98qKBawHcoejUuQelKNpIoB8ak=,tag:4ci371ZenscFjeQuzUieJA==,type:str]
                                    refId: ENC[AES256_GCM,data:Zw==,iv:FHFkk7e6RbXZthg3VMSpmTgg/bRHVQNPjXTOYx1Oapk=,tag:5kjgU35Dqz/OVsgcztcZDg==,type:str]
                                    settings:
                                        mode: ENC[AES256_GCM,data:Tyquj6LJhKpP,iv:vgw3JY0+z6Bmjc9nY+tSnuXO32Mz3dOnxv66JLqtAFY=,tag:Jn/6957eTndLqRvt/xhJEg==,type:str]
                                        replaceWithValue: ENC[AES256_GCM,data:yQ==,iv:iTnBoR3de90BSEpaYXrf01y4VRRGkrxIFa6kspl7PR4=,tag:cYJBfwzzBy9ca1DBB/aPmQ==,type:int]
                                    type: ENC[AES256_GCM,data:+skcHpKr,iv:ES+MvCFz3EBts+BfFJ9tC5ev0H/Av25xZAjv/UeoAm0=,tag:NiNXJ8OaR9Toa01+gqljwQ==,type:str]
                              noDataState: OK
                              execErrState: Error
                              for: 2m
                              annotations:
                                summary: High amount of i/o timeouts in coredns
                contactpoints.yaml:
                    apiVersion: 1
                    contactPoints:
                        - orgId: 1
                          name: MidnightThoughts Ops
                          receivers:
                            - uid: "1"
                              name: MidnightThoughts Ops
                              type: email
                              sendReminder: true
                              frequency: 1m
                              settings:
                                addresses: ops@nordgedanken.dev;mtrnord@nordgedanken.dev;mtrnord1@gmail.com
                        - orgId: 1
                          name: PagerDuty
                          receivers:
                            - uid: adz30e8814wshd
                              type: pagerduty
                              settings:
                                integrationKey: ENC[AES256_GCM,data:zthdBYr0fdelsUIAI9wTHEh2zax+hqAIWkDtFMXxNNw=,iv:55ci0U8TmXLhWX5JrpEMcI1aJ4HsO1ObcqsIHnXcC2M=,tag:zVPaPj9FYbOotGyQhxJYwg==,type:str]
                                url: https://events.eu.pagerduty.com/v2/enqueue
                              disableResolveMessage: false
                        - orgId: 1
                          name: PagerDuty Warning
                          receivers:
                            - uid: pg_warning
                              type: pagerduty
                              settings:
                                integrationKey: ENC[AES256_GCM,data:1QFP80o73J48Oo0gWwu4uiX6+gesi2N68lCuvWu2Psw=,iv:leFtWP/C8NJpIDYgQydSl0/4s+ca1hD0ct9UW+s9NDE=,tag:zgFN8i1dCQIfNJQvo++Q3Q==,type:str]
                                severity: warning
                                url: https://events.eu.pagerduty.com/v2/enqueue
                              disableResolveMessage: false
                        - orgId: 1
                          name: PagerDuty Draupnir4All
                          receivers:
                            - uid: "3"
                              type: pagerduty
                              settings:
                                integrationKey: ENC[AES256_GCM,data:rYJ56+joXf2jLXJ2gcr3rwz3t6umCTtcGEfDAQDBB5M=,iv:baCM6FldzIWsOOBaNtKs3Gmammlun70F4s2h0atx0Yg=,tag:Vf+BGkZZTra27Mole9IAAA==,type:str]
                                url: https://events.eu.pagerduty.com/v2/enqueue
                              disableResolveMessage: false
                        - orgId: 1
                          name: PagerDuty Draupnir4All Warning
                          receivers:
                            - uid: de02at943dxxcf
                              type: pagerduty
                              settings:
                                integrationKey: ENC[AES256_GCM,data:yqlt2lGyTITDPF5RXexOdxRg3eZ8t3C98KhYkZW93dk=,iv:bReLzk+VPcWjSQoAG4T2CMvWPAyiddTj9L+uDcgsmbs=,tag:0Cwzu1TB8ReN45YS/sUrOA==,type:str]
                                severity: warning
                                url: https://events.eu.pagerduty.com/v2/enqueue
                              disableResolveMessage: false
                policies.yaml:
                    apiVersion: 1
                    policies:
                        - orgId: 1
                          receiver: PagerDuty
                          group_by:
                            - grafana_folder
                            - alertname
                          routes:
                            - receiver: PagerDuty
                              object_matchers:
                                - - service_id
                                  - '!='
                                  - draupnir4all
                            - receiver: PagerDuty Draupnir4All
                              object_matchers:
                                - - service_id
                                  - =
                                  - draupnir4all
                            - receiver: MidnightThoughts Ops
    postRenderers:
        - kustomize:
            patches:
                - target:
                    # Ignore these objects from Flux diff as they are mutated from chart hooks
                    kind: (ValidatingWebhookConfiguration|MutatingWebhookConfiguration)
                    name: kube-prometheus-stack-admission
                  patch: |
                    - op: add
                      path: /metadata/annotations/helm.toolkit.fluxcd.io~1driftDetection
                      value: disabled
                - target:
                    # Ignore these objects from Flux diff as they are mutated at apply time but not at dry-run time
                    kind: PrometheusRule
                  patch: |
                    - op: add
                      path: /metadata/annotations/helm.toolkit.fluxcd.io~1driftDetection
                      value: disabled
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1esjyg2qfy49awv0ptkzvpk425adczjr38m37w2mmcahzc4p8n54sll2nzh
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBPUTlmMk1MU1JwV0t4QURy
            TE10MmFZK3NzNE0zL3Ewc0ZBQzZUK0FHZkZjCk50L1YzQmtYTjR5UTdTdXFneGNo
            UUNtbUV2Y1RLclJjTHRaZzM4U1RyTzgKLS0tIHo1THRueVdqckp4cVpBeHA5SjFz
            bFU3YVA1WjdPeVY5anZiTGJ3Slk0enMKCrltoGyYAbdAkckiD+QWWbE4VP2h5bsU
            Z2yk6srw54khNomZ+ojyyYQ0OAdAFoyyMoL1OvnZ2luAhGocrjqguQ==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-28T19:32:31Z"
    mac: ENC[AES256_GCM,data:CpXIfgnZUjBheHuCpNdeZQnP90gMYbxDRZyIWqtUPPG0p6CoWI1eJMXVBYF+zeWC73vfbqU+F66nftNho8tbALO7uSSWPhLHoH/7FnXqNEYDkYFQ1WOO/qusUOjjwwSBhSycu72YJiV3P1tJjCUWRV2PyGsytmPoqnB3lIwmRK8=,iv:VJqkGpE0UQnuJRh8lLiewVd/78amXPKzr6nQsKMedr0=,tag:C926T5gcQ24qdk5GC4umrA==,type:str]
    pgp: []
    encrypted_regex: ^(apiKey|appUserPassword|otelUserPassword|harborAdminPassword|totpVaultKey|kimaiAppSecret|kimaiAdminPassword|GITHUB_CLIENT_ID|GITHUB_CLIENT_SECRET|GITHUB_PRIVATE_KEY|woosh|root_password|rspamd_password|pgdb_password|matrix_access_token|pgdb_remote_url|hmac_secret_key|adminPassword|adminEmail|jenkinsAdminEmail|securityRealm|gerrit.config|routing_key|DATABASE_URL|SMTP_PASSWORD|SECRET_KEY_BASE|admin_password|extraCommands|key|clickhouseDatabaseURL|databaseURL|client_id|client_secret|secret_key_base|otp_secret|private_key|public_key|primaryKey|deterministicKey|keyDerivationSalt|token|clientId|secretKey|installationId|installationKey|uriOverride|adminToken.value|password.value|sql_password|erlangCookie|AUTHENTICATION_PASSWORD|ROOM_API_SECRET_KEY|adminPassword|configPassword|adminUser|configUser|MAIL_PASSWORD|APP_KEY|api_key|api_secret|keys|livekit_key|livekit_secret|secret_key|admin_pass|admin_email|mariadbPassword|mariadbRootPassword|privateKey|data|stringData|PASSWD|password|pass|postgresPassword|postgresqlPassword|redminePassword|smtpPassword|registration_shared_secret|shared_secret|secret|admin_token|integrationKey|rootPassword|adminPassword|adminUser|adminEmail|emailPassword|secretKey|appId|clientSecret|webhookSecret)$
    version: 3.9.1
---
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
    name: grafana
    namespace: monitoring
spec:
    parentRefs:
        - name: envoy-gateway
          namespace: envoy-gateway
    hostnames:
        - grafana.midnightthoughts.space
    rules:
        - backendRefs:
            - name: prometheus-stack-grafana
              port: 80
          timeouts:
            request: 240s
            backendRequest: 0s
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1esjyg2qfy49awv0ptkzvpk425adczjr38m37w2mmcahzc4p8n54sll2nzh
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBPUTlmMk1MU1JwV0t4QURy
            TE10MmFZK3NzNE0zL3Ewc0ZBQzZUK0FHZkZjCk50L1YzQmtYTjR5UTdTdXFneGNo
            UUNtbUV2Y1RLclJjTHRaZzM4U1RyTzgKLS0tIHo1THRueVdqckp4cVpBeHA5SjFz
            bFU3YVA1WjdPeVY5anZiTGJ3Slk0enMKCrltoGyYAbdAkckiD+QWWbE4VP2h5bsU
            Z2yk6srw54khNomZ+ojyyYQ0OAdAFoyyMoL1OvnZ2luAhGocrjqguQ==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-28T19:32:31Z"
    mac: ENC[AES256_GCM,data:CpXIfgnZUjBheHuCpNdeZQnP90gMYbxDRZyIWqtUPPG0p6CoWI1eJMXVBYF+zeWC73vfbqU+F66nftNho8tbALO7uSSWPhLHoH/7FnXqNEYDkYFQ1WOO/qusUOjjwwSBhSycu72YJiV3P1tJjCUWRV2PyGsytmPoqnB3lIwmRK8=,iv:VJqkGpE0UQnuJRh8lLiewVd/78amXPKzr6nQsKMedr0=,tag:C926T5gcQ24qdk5GC4umrA==,type:str]
    pgp: []
    encrypted_regex: ^(apiKey|appUserPassword|otelUserPassword|harborAdminPassword|totpVaultKey|kimaiAppSecret|kimaiAdminPassword|GITHUB_CLIENT_ID|GITHUB_CLIENT_SECRET|GITHUB_PRIVATE_KEY|woosh|root_password|rspamd_password|pgdb_password|matrix_access_token|pgdb_remote_url|hmac_secret_key|adminPassword|adminEmail|jenkinsAdminEmail|securityRealm|gerrit.config|routing_key|DATABASE_URL|SMTP_PASSWORD|SECRET_KEY_BASE|admin_password|extraCommands|key|clickhouseDatabaseURL|databaseURL|client_id|client_secret|secret_key_base|otp_secret|private_key|public_key|primaryKey|deterministicKey|keyDerivationSalt|token|clientId|secretKey|installationId|installationKey|uriOverride|adminToken.value|password.value|sql_password|erlangCookie|AUTHENTICATION_PASSWORD|ROOM_API_SECRET_KEY|adminPassword|configPassword|adminUser|configUser|MAIL_PASSWORD|APP_KEY|api_key|api_secret|keys|livekit_key|livekit_secret|secret_key|admin_pass|admin_email|mariadbPassword|mariadbRootPassword|privateKey|data|stringData|PASSWD|password|pass|postgresPassword|postgresqlPassword|redminePassword|smtpPassword|registration_shared_secret|shared_secret|secret|admin_token|integrationKey|rootPassword|adminPassword|adminUser|adminEmail|emailPassword|secretKey|appId|clientSecret|webhookSecret)$
    version: 3.9.1
