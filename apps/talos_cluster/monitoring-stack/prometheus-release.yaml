apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
    name: prometheus-stack
    namespace: monitoring
spec:
    interval: 5m
    chart:
        spec:
            version: 82.x
            chart: kube-prometheus-stack
            sourceRef:
                kind: HelmRepository
                name: prometheus-community
            interval: 60m
    install:
        crds: CreateReplace
    upgrade:
        crds: CreateReplace
    # https://github.com/prometheus-community/helm-charts/blob/main/charts/kube-prometheus-stack/values.yaml
    values:
        kubeProxy:
            enabled: false
        prometheus:
            prometheusSpec:
                retention: 4h
                externalLabels:
                    cluster: midnightthoughts
                # Pick up all ServiceMonitors/PodMonitors/etc. regardless of labels
                serviceMonitorSelectorNilUsesHelmValues: false
                serviceMonitorSelector: {}
                serviceMonitorNamespaceSelector: {}
                podMonitorSelectorNilUsesHelmValues: false
                podMonitorSelector: {}
                podMonitorNamespaceSelector: {}
                probeSelectorNilUsesHelmValues: false
                probeSelector: {}
                probeNamespaceSelector: {}
                ruleSelectorNilUsesHelmValues: false
                ruleSelector: {}
                ruleNamespaceSelector: {}
                scrapeConfigSelectorNilUsesHelmValues: false
                scrapeConfigSelector: {}
                scrapeConfigNamespaceSelector: {}
                # Thanos sidecar uploads 2h TSDB blocks to Hetzner S3
                thanos:
                    objectStorageConfig:
                        existingSecret:
                            name: thanos-objstore-secret
                            key: ENC[AES256_GCM,data:N3tSc4LA,iv:XxZnYY99Eq4cDz6BGMbNFIoa9ArYmPOEPBFJ8h6pMDo=,tag:lxJdAKw5x7XH2xyjnqt4vg==,type:str]
                storageSpec:
                    volumeClaimTemplate:
                        spec:
                            storageClassName: longhorn-2replicas
                            accessModes:
                                - ReadWriteOnce
                            resources:
                                requests:
                                    storage: 10Gi
        grafana:
            adminPassword: ENC[AES256_GCM,data:ipUgR/m8DxxdpUOVXPwo1k0pcBubMrTV2ZmXqtzvZ0jkhmfDc/YVGuyPyG558c4Afkx51t5CUycVQVMueNMMqQ==,iv:0jZuf3v4DrBJTQHHOk7QAqVXllMUzrIcOOg5KTFUINQ=,tag:P29X7rGijLZ0nkjT9cSx1w==,type:str]
            sidecar:
                datasources:
                    # Disable the auto-generated default Prometheus datasource so it
                    # doesn't conflict with our custom datasources.yaml (which points to Thanos)
                    defaultDatasourceEnabled: false
                dashboards:
                    folderAnnotation: grafana_folder
                    provider:
                        foldersFromFilesStructure: true
                    logLevel: WARN
                    watchServerTimeout: 3600
                    enabled: true
            plugins:
                - grafana-piechart-panel
                - grafana-worldmap-panel
                - isovalent-hubble-datasource
                - isovalent-hubbleprocessancestry-panel
                - chaosmeshorg-datasource
            smtp:
                existingSecret: smtp-auth-secret
            extraSecretMounts:
                - name: auth-generic-oauth-secret-mount
                  secretName: auth-generic-oauth-secret
                  defaultMode: 288
                  mountPath: /etc/secrets/auth_generic_oauth
                  readOnly: true
            defaultDashboardsTimezone: Europe/Berlin
            datasources:
                datasources.yaml:
                    apiVersion: 1
                    datasources:
                        - name: Prometheus
                          type: prometheus
                          uid: prometheus
                          url: http://thanos-query-frontend.monitoring.svc.cluster.local:10902
                          access: proxy
                        - name: ChaosMesh
                          type: chaosmeshorg-datasource
                          url: http://chaos-dashboard.chaosmesh.svc.cluster.local:2333
                          access: proxy
                          isDefault: false
                        - name: Hubble
                          type: isovalent-hubble-datasource
                          uid: hubble
                          access: proxy
                          url: http://hubble-relay.kube-system.svc.cluster.local:80
                          isDefault: false
                          jsonData:
                            serviceMap:
                                datasourceUid: prometheus
                            prometheusDatasourceUid: prometheus
                        - name: Postgres-d4all
                          type: postgres
                          uid: postgres-d4all
                          access: proxy
                          url: pg-cluster-v2-ro.postgres-cluster.svc.cluster.local:5432
                          database: draupnir_synapse
                          user: grafana-ro
                          secureJsonData:
                            password: ENC[AES256_GCM,data:H2BoCAEwD96ZJinIW4jeXzBecwXA1QE6phK9vIY0K+X/75j0b1fsmPgzC+sI6lP0qPj+/UkddCFcNFa3qWu24g==,iv:NcHEs+dvJB2QKW1RGo/w7z7kQcvSiNnyxqOw9cttlj4=,tag:Ytz5HzLQPRpJ+ijBSGF8YA==,type:str]
                          isDefault: false
                          jsonData:
                            sslmode: disable
                            maxIdleConnsAuto: true
                            timescaledb: false
                            maxOpenConns: 10
                            maxIdleConns: 10
                        - name: Postgres-connectivity-tester
                          type: postgres
                          uid: postgres-connectivity-tester
                          access: proxy
                          url: pg-cluster-v2-ro.postgres-cluster.svc.cluster.local:5432
                          database: connectivity-tester
                          user: connectivity-tester
                          secureJsonData:
                            password: ENC[AES256_GCM,data:VE6YoftqeYHDNU2Ii0oPK3FDJe8rFOOiHt5byiIyz74lwFZrfwuvU2PoaL/ZRkEDEyFEmZZn+MDXcaC4n9nczw==,iv:2ss2lg6nJ6DdCPj1pIKHJnAFkYVZ4PY+uX6zmAns8Yk=,tag:65JrcL1r2P4/Pb9mUwzL8Q==,type:str]
                          isDefault: false
                          jsonData:
                            sslmode: disable
                            maxIdleConnsAuto: true
                            timescaledb: false
                            maxOpenConns: 10
                            maxIdleConns: 10
            ingress:
                enabled: false
            grafana.ini:
                server:
                    root_url: https://grafana.midnightthoughts.space
                smtp:
                    enabled: true
                    host: smtp.fastmail.com:465
                    from_address: ops@nordgedanken.dev
                paths:
                    data: ENC[AES256_GCM,data:baX/g1iy7ci8N71khsNAnEw=,iv:Lgwko/+c6edt+9pe/dPOrfbhdQHptF/zn4/sMJHBdKM=,tag:CYFIrAJ46MEQ8+vgIVtfXw==,type:str]
                    logs: /var/log/grafana
                    plugins: /var/lib/grafana/plugins
                    provisioning: /etc/grafana/provisioning
                analytics:
                    check_for_updates: true
                log:
                    mode: console
                grafana_net:
                    url: https://grafana.net
                auth:
                    signout_redirect_url: https://auth.midnightthoughts.space/application/o/grafana/end-session/
                    oauth_auto_login: true
                auth.generic_oauth:
                    name: authentik
                    enabled: true
                    client_id: ENC[AES256_GCM,data:NDje5LruAKh43Mk+xMhVS2ZpL9CceqZ+jB10xdLi+I5Tf+ka3yzy65BeZtd57fSI8F8=,iv:1IC7D6y9is+9jUhRiRVKvVnB0TW3CkcC4l+Cln4iPLM=,tag:uLrOooSYKJEdrQ88pBdr2w==,type:str]
                    client_secret: ENC[AES256_GCM,data:NrP1rdEFwB+VE/HCy1pi92+c2vVrTmtS3hstAh6cNNEUc/Gfsw9bbm2Dz5aGJuSObRzfct8/,iv:IceMSuA/f71EtJvVAQqtPqpsmZG+83aW0mIho6l+N8A=,tag:1JUd5J9TzEnh6VKpNeipDw==,type:str]
                    scopes: openid email profile
                    auth_url: https://auth.midnightthoughts.space/application/o/authorize/
                    token_url: https://auth.midnightthoughts.space/application/o/token/
                    api_url: https://auth.midnightthoughts.space/application/o/userinfo/
                    role_attribute_path: contains(groups, 'Grafana Admins') && 'Admin' || contains(groups, 'Grafana Editors') && 'Editor' || 'Viewer'
            imageRenderer:
                enabled: true
            alerting:
                rules.yaml:
                    apiVersion: 1
                    groups:
                        - orgId: 1
                          name: CertManager
                          folder: Cluster
                          interval: 5m
                          rules:
                            - uid: ddz3zj028wb28b
                              title: CertManagerHittingRateLimits
                              condition: B
                              data:
                                - refId: ENC[AES256_GCM,data:Rw==,iv:ShpUr+O9l16v69qXzWRtTSgdPAsLgV1trGqsDKKR0/k=,tag:e3Rz0iuZXce/AfqvmHHCDQ==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:BZkb,iv:QLsOHfmgKj1ssmgHcpy/UUHhtgxsXU1frOi/FY9EKJQ=,tag:LxycWmJys7f6uOBOV1ucaA==,type:int]
                                    to: ENC[AES256_GCM,data:Pg==,iv:EvyI2qBm5S0Rd6qNtSaNvsgEugHTwAgsOmZUUwEzdi8=,tag:Heex/y4Kc4MrM1wXAInFhg==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:Wy0MJdMQdL5aEA==,iv:enqwdOrgF1ZVXqzRBKcfv6IRdHS4rMR78lkM9Hgj4h0=,tag:89nPCIasjbae6Zhuhen0xw==,type:str]
                                  model:
                                    editorMode: ENC[AES256_GCM,data:NUT+tg==,iv:V3UDhdLPGqAwaeLW/YAXp8to23Rs5WeL4VJy57orJFg=,tag:RVfekvCA6TLy5sOMrSe/tA==,type:str]
                                    expr: ENC[AES256_GCM,data:O6mj5+GuvPaP7mIdZaVPU/MxHcsQt0DRCcB5Gldi96Xq61AGo+nncPUzjAXXH+Z6Ujn0bp+7VQFtrjvWQhhel6MF37yVmZjj/OazN8GoIW3ybREiT9qmG1Sz6Vacjgns7R361HaCDZ9TWdC3kM+vRJ1L,iv:hU/ZhZtb3kIW+7puEGUL2AmWj7h6zzupuEZKKJxecw0=,tag:Lc5Q0+68C/O+0fpzPwk3kg==,type:str]
                                    instant: ENC[AES256_GCM,data:mBP8ng==,iv:M+YXo+TYgucKaHT8Gne+3u0A9gpXYF3JqYE9+A48lG4=,tag:J6Y9JH/Y09o672Bp3OAgyg==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:tFv2TA==,iv:8gSmp103LIBgl3xmp2Gmc7+S82RL4BL2DA70A+xUe34=,tag:xyf9ta1XVwbFPkc2m26pTQ==,type:int]
                                    legendFormat: ENC[AES256_GCM,data:vA9haVr6,iv:8DZiGve3NciY/fqFFkY2MCg5jLT9kqIG1rxKyTldyyk=,tag:4BI8KpYUZoV7+sIUoPanlw==,type:str]
                                    maxDataPoints: ENC[AES256_GCM,data:Jlq89sc=,iv:Ps1LdxS89y4NpgEjycMnPAndgi9qHbijokKSi22rw9U=,tag:5qu5HWUna+HlhtY70tE85g==,type:int]
                                    range: ENC[AES256_GCM,data:thTxst4=,iv:vHE8KD36h8gaMQq7y7CzJxYcn53SZmTR8cMZhDcRGYo=,tag:AlFuK8UmAtI7UTNmvIRGrQ==,type:bool]
                                    refId: ENC[AES256_GCM,data:2w==,iv:uT9ncSDLqFrLMeGzrdOzPPQeyFPUqKDuOIqHXIC3IDM=,tag:sPthkk81ayiVFMUISmaO6g==,type:str]
                                - refId: ENC[AES256_GCM,data:XQ==,iv:MR8htHeiwCwmpU6Sz6S4lp7iZs1BlAXCB9HwJV2CxnA=,tag:C34dXtr3Jpx/sT20en71hA==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:v8w3,iv:SjxWvV0CZaGe9kS5lm7EthNJ6ktAI8IzZlKhRMLrnOo=,tag:4pTEQVBkghObkP2mIj7pVQ==,type:int]
                                    to: ENC[AES256_GCM,data:yw==,iv:AHoLGLqvgkXAnyJYI/aFXCOT04BlHdiEBCqqZlKOWeM=,tag:j5/WaLY63aTLoYR3UrQXZg==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:thzMvV+WUHs=,iv:Cigiu7O9B9AE0FRyE+tKXHof5T1VZ9/SWfaTlKt80jY=,tag:w8tEn2fg/FVw1cMI5g2WcA==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params: []
                                            type: ENC[AES256_GCM,data:KzQ=,iv:D8GEGT/ZGfiXzIhn8jzZX1RrLbiPwE25UhoIy3FS6jk=,tag:wCBZ0O52UQnw/gZ/x+PFXg==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:FRJb,iv:PnqiesyqNvG0YpQjTCsfQMMmUyM675HAkwWKTIIWvAU=,tag:s5IlgWPMfpxqGlUa/h8hSQ==,type:str]
                                          query:
                                            params:
                                                - ENC[AES256_GCM,data:ug==,iv:4CEiBynuJKw4/SD4P6ESDQFVd4Uj7XE2wj0mu3sCrcc=,tag:cJnUt9qbVCIYi6gh1c6lGg==,type:str]
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:A7MszQ==,iv:viT1JllaR7e7ysJtN+wKVPiPRPYAN44Fvgy1Z7rsBYs=,tag:IbWEGFw6RTYnyOFCrsS7Qg==,type:str]
                                          type: ENC[AES256_GCM,data:rBniKPc=,iv:gLT+ZqZO/A+b31xnf4wy6/KJ7Rkqr6MeqC2e1aNI6r0=,tag:JMGUvRLtymHw2eLD16wq0g==,type:str]
                                    datasource:
                                        type: ENC[AES256_GCM,data:q7amiDcq1Qk=,iv:6Sdbr1d+TKvt0lTQvayxfFWL/MKw/dUvoRIwKZJokuE=,tag:qcM7ZETm1HTWUfSQRZQg5g==,type:str]
                                        uid: ENC[AES256_GCM,data:TjvyPqgILZE=,iv:f17r/taBAG3XqncvT3vqRDyu4W6qLkEZyzf6fOOsH18=,tag:rgAjNuhVUSxX4YKaYmdvow==,type:str]
                                    expression: ENC[AES256_GCM,data:hQ==,iv:9ljoaK8ASWPTN8kyYDxaqFH1+9naILfAfdTNUKyP86g=,tag:3JjH6Pq0sbVaPGJ876mFog==,type:str]
                                    intervalMs: ENC[AES256_GCM,data:+clErA==,iv:yuP4Gg1ICGQ0drG9Wr2/VkiMgSAiCBfosMXoS9oZyhc=,tag:wEYm1LU77QY2vkyTghiRMA==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:HIG+/ik=,iv:qu9beA9IPIJ6STLCQYwrTtue2cwuTFWeTe0qz324YEo=,tag:/kc7lFOGqAFL1oVGwj11sg==,type:int]
                                    reducer: ENC[AES256_GCM,data:/dFNsQ==,iv:wf9VIEgmIy51APcBeGR37vjerV8lpq7yQhae63jt2+8=,tag:U15+xKRyYXqB3giwa3Dn9w==,type:str]
                                    refId: ENC[AES256_GCM,data:uA==,iv:PKOky62dy8K+QFOBUSlWyWFLDrhlkkTRbVOBEFUMurk=,tag:ype9pCNnOMh62UZbc70QSQ==,type:str]
                                    type: ENC[AES256_GCM,data:8NpCRiIp,iv:7aOMH/ZahkmPlah4rc5d5MXrxawrYp6zCV1v9tOiqS8=,tag:QruR/wA7Y2JsKK4sWun4cA==,type:str]
                              noDataState: OK
                              execErrState: Error
                              for: 5m
                              annotations:
                                description: Depending on the rate limit, cert-manager may be unable to generate certificates for up to a week.
                                summary: Cert manager hitting LetsEncrypt rate limits.
                              labels: {}
                              isPaused: false
                              notification_settings:
                                receiver: PagerDuty Warning
                        - orgId: 1
                          name: Resources
                          folder: Cluster
                          interval: 15m
                          rules:
                            - uid: bdz3y4mow1o1se
                              title: KubePersistentVolumeFillingUp
                              condition: B
                              data:
                                - refId: ENC[AES256_GCM,data:rQ==,iv:+VVPDZJAOjQCeLZ8IS702cub3Bv1jyVNPDs0QqYwX+w=,tag:Lr9iFWvnn3HHGHK5LEQiSg==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:V673,iv:ONxjJWzDcyLBo5+JClebnpgbX7SVDYchTZqDVf36hTQ=,tag:0J+/ldH+P+g3tL2yQKEyEA==,type:int]
                                    to: ENC[AES256_GCM,data:2w==,iv:V7foAnBSVjSNypt5JyI4dL5EtqLGekEJkS6mwTKBq8Q=,tag:69e5u8kED8lLiWyoKnmpIQ==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:PYWI1zoK3V+X9Q==,iv:FGHQuK4ZTT5Z16HJGT0pQft5qqJ4auaHrxQ9kfrTHiY=,tag:2AASmGTLpdfltPLCdXF1sQ==,type:str]
                                  model:
                                    datasource:
                                        type: ENC[AES256_GCM,data:ztTkdcQy1SAoOg==,iv:6+lpIhgehcLuT7D6XZV0cja5mR68lh1hMJu5yLd2i1o=,tag:sNEbqaKurXgFuSws/GMyNA==,type:str]
                                        uid: ENC[AES256_GCM,data:F7LWiZLpeMjNIw==,iv:2unfzv9EtQWMo4mVeht1czQSNEZ3/d0X9LQBlkkjHmQ=,tag:TA9F4vf6+geyfWz/DLTbWw==,type:str]
                                    editorMode: ENC[AES256_GCM,data:FPuhRQ==,iv:nNRqxyt116iCfJF2Y7Jr2/DdYcS3wrdGZSjN8QxezlI=,tag:JshJMegJtVPHfiq1jqa8dg==,type:str]
                                    expr: ENC[AES256_GCM,data:adFK529uVwkKRJ/nUHE2V2Gpx2E2FmuWlvsaIinBIQ90hmqnSy+bwZtZBSTm5TevoeWCB7pS0eYO4ZZaE8YQ4xeixgGbUW+0p0hxVgddSmEY76m5xo4cFQleL/Ot9dYDGEMTxVD4DI68uED2bxOFGp4YH+Pa/ARazKP20oZ6tfNwiXuOWOGilmqE618GCADbnLy8Ew6vx2m8TC9Jpr/7cDrHboU/ODRLZJlOelFOuSi5nSN65pBlm2+L6MPjJfh4EGTCr3ycCyqoUayxxjwTjjx0Z5/yXHQxV/lsjrOSYvE4rEW/7MZmVLFfwq3ZvH/Shz2DsLOH30lGcz6kpxTkAPtqPKN0Ie6mQczCjyekT5g+d/Q7MnIDZzNHHzFnruX0OsuM6YnTaiHF4ELrVBcwHT/tbrx31HYcWY1xLRmNHfLUYUR03inU+icr/b19qYH5CJhsEroXCi8aOrVLgfHXmQGOqobAU6W4L4PCz00M1v8LPQEljstzgsliA6KGyW0dvrPKHtyMd2gb7U4FjxgJef16ZZXj8pDFgKwQU2SZxZHHe0S4owpZNaPhqJ0XOKc/bwr2mXJ/1vAoGswiwJ7PRs00/wHUMCr8C/8symSAVW7TE8lAmSnrLzM3lVJyh9LL8djtcw9oDVdoadU0mQfFs2Bw4q+mUkvUca4I2C3vtT+aWL/l3GsCVawT95dCKFEfmy7dN594lD9JwCJN2CK9enu0yNdxe3Tvk2a+owQ=,iv:wV9h0IAkwnyDROCE7G3kebOkoNELqnvSe5hOM/cYrPU=,tag:YCwcKquGgEwS57Kfi9wTqw==,type:str]
                                    instant: ENC[AES256_GCM,data:bPG7CQ==,iv:0eX2+9S5Ig2V1TgoftzVETMWF7peqCs9ndVSrRY8vSc=,tag:k5DWcHY6a/1M8nPKzngsUg==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:FOBPSQ==,iv:3qfggsdK7zwjzyBwpHxsa5PCXmMP9zUJZYFr6jojeio=,tag:XAvoxjXOSyMGCeDwuJxuVA==,type:int]
                                    legendFormat: ENC[AES256_GCM,data:V4ogAvUt,iv:2kZ17u6gZ9BCSVKskypqvaROGKbxvxj6tIwbijuNRbU=,tag:mJ2ADkAvlZpgpWhH+eymVw==,type:str]
                                    maxDataPoints: ENC[AES256_GCM,data:YjgPvcE=,iv:qb5Q2bIsTu0m0zbiWFSJdllEkv38f9LnFT+BX+cf85I=,tag:dNL4heGzpkjLAWo85doKaw==,type:int]
                                    range: ENC[AES256_GCM,data:9t/tzfw=,iv:ccp8hCGCrhRmb60En+Fm4fUyCd+9ajjwJdV8EQzFH5M=,tag:ksvEklg2Ll7gJV2jaJW8Ow==,type:bool]
                                    refId: ENC[AES256_GCM,data:5A==,iv:ZV+cXcm1ArY1/PJHXrBdIF32DiIP1bwj0cxA9RIzJtw=,tag:nB+qGHi6GN3GJlBKKD5BDg==,type:str]
                                - refId: ENC[AES256_GCM,data:aw==,iv:KTxkWfplSC02SmYRmUlach6vuKS+VSDHjnM3yD9hsgc=,tag:82XJ9uguwpe9phaGqK0Haw==,type:str]
                                  datasourceUid: ENC[AES256_GCM,data:M8SPmr07GL0=,iv:MKcRyr0Oyyi6RgJK7yxZz0xy0qCdK3QhCq3EzHozeZ8=,tag:Rqy41xBsYWsNtIYnDHGZkQ==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:EA==,iv:cbRProJzu8ydcuucJd6deBpJzQJxJ1KRV5I9JcnCeME=,tag:sGqYx0/x4WW23YWMBd8I6A==,type:int]
                                                - ENC[AES256_GCM,data:/g==,iv:zbAUpwRwcQsAM7ukt4pD53wB3REq0FYAIC7soiCVYYc=,tag:pPvk06OTj5GTMbrC3IEoLg==,type:int]
                                            type: ENC[AES256_GCM,data:GAM=,iv:y8Zgm55QA4nfmiBvQZ0Xizi7WnnilnYYme47uEFK2So=,tag:IUJPqcaSSjMYYPrwcRR3sA==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:sqPV,iv:27APn0lvMkBnSCACKcA6rkvm7M6bNkWEqGHaR2SzLGM=,tag:1Tt1UikSon9H2iNE9S1kQQ==,type:str]
                                          query:
                                            params: []
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:/jnP,iv:63Ujt2SDh9B0L1NzxqjbKNveg9Y4MvJuPAW49HIcstE=,tag:vXs2FKll8j0OailD6wZY2g==,type:str]
                                          type: ENC[AES256_GCM,data:Rpdd1ZY=,iv:c7rzswEb99WCuVYfd+jy5INGrUGfduwGVJPpb5Q9qHk=,tag:LtC/qAE2GFw6AcDWIhL90g==,type:str]
                                    datasource:
                                        name: ENC[AES256_GCM,data:2kTjCklYiQ17+g==,iv:MkHsQtoNdEF5lQHWVGpRaoxmdf+Ll+fUscvYRadu3zs=,tag:6vfJT/hklVbgU3+6spMDUw==,type:str]
                                        type: ENC[AES256_GCM,data:OEclQPZAN9U=,iv:WEBs/mEJV8Wx7d5tONFJVIefOz9wj5Vst6xcMhkBShM=,tag:uKTQn0b0JDAJM4SfTa+E8Q==,type:str]
                                        uid: ENC[AES256_GCM,data:IAZH+nif83A=,iv:Ih4KT0xKV0vaJCPRYfU+olSV2t/PkqoV8QWsSqMG2+U=,tag:z6BFU+xYWzB5O4cyE4ezRw==,type:str]
                                    expression: ENC[AES256_GCM,data:ag==,iv:EXEq3iKIYAMtPCvDU/Yy9laUBbNRhX9jRE2nxSXKwVA=,tag:DqCA6/lGnwQkPmFLxL23EQ==,type:str]
                                    intervalMs: ENC[AES256_GCM,data:YImpRw==,iv:EWZ7w2vTOZlK17+L51NB5WTsCn6aSqEyl9+tDsgsdkU=,tag:bITypOLcER9ECmCppQsaGA==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:jjMtif4=,iv:W2jx5w9APDPtcrdGha7q8uWJ7ONWRSxpwt3cijuJaXs=,tag:aC/JNSdO9tbJF4wsCPfQww==,type:int]
                                    reducer: ENC[AES256_GCM,data:CEti/A==,iv:QYAuNDwmOa5QWSogco8Y3YuQbcVN0eghrBlQjIw1sgg=,tag:gL6uspjd5fGwi0yy2bA2KQ==,type:str]
                                    refId: ENC[AES256_GCM,data:uw==,iv:Ww0sx3v8CTf6/rdpz2AJNYjlzUVcRd5zcgaQiXTC3AM=,tag:av69VA4hKZgfheSu/TkW8w==,type:str]
                                    type: ENC[AES256_GCM,data:WbC7kSLp,iv:BvLARD92onyb6joBeOObLZTNrGbfNiOo7ezhS6vxwLU=,tag:gdr6QkBxtii0+6VOzAGNRw==,type:str]
                              noDataState: OK
                              execErrState: Error
                              for: 20m
                              annotations:
                                runbook_url: https://runbooks.prometheus-operator.dev/runbooks/kubernetes/kubepersistentvolumefillingup
                                summary: |-
                                    {{`The PersistentVolume claimed by {{ $labels.persistentvolumeclaim }}
                                    in Namespace {{ $labels.namespace }}
                                    {{ with $labels.cluster - }}
                                    on Cluster {{ . }}
                                    {{ - end }}
                                    is only {{ $value | humanizePercentage }}
                                    free.`}}
                              labels: {}
                              isPaused: false
                              notification_settings:
                                receiver: PagerDuty Warning
                            - uid: cdz3yt59a0miob
                              title: KubePersistentVolumeErrors
                              condition: B
                              data:
                                - refId: ENC[AES256_GCM,data:Ug==,iv:rkXGB69tFk6/KlwyYulxHjPktFZDv91U3kbGsytX9Ko=,tag:YXokXzjUIDXQLiKAzjI+Rw==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:Rf6t,iv:C0cW6Ts7fIugazVGp7kSGpvqSE+1TDS+lYbhGQBAj1I=,tag:2BnjFbRfgawEjdvZAIDrbg==,type:int]
                                    to: ENC[AES256_GCM,data:FA==,iv:z0xS2QSTYzq9q+pJSFsAz+i3J0S8OBZ9tZyAZME7v/I=,tag:8+hY5k6Tpxa11EPRmvSNWw==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:RiT5ILZrwcnqWw==,iv:oqDt61gjfyThZpwp7Ae2/+l7Syi/lWymBWLT2jsQVZQ=,tag:IGmCTEmB1agGBH21K25qSw==,type:str]
                                  model:
                                    editorMode: ENC[AES256_GCM,data:wosF4Q==,iv:B5MWwP4n81uAZ4Qvv5Skx05Q9T4fd3uxHy5GsNvvMsQ=,tag:C8JCJA/gv5HRrvIHMBUG2A==,type:str]
                                    expr: ENC[AES256_GCM,data:fsCs3qBgxKjcd1TlMRxKUoz1oxzEuwLO7yB7hgBR2UO7mtwfE4B2JFnuz1gOo2nWgSSCGuOK/gr5FHPvQUUQdUY6er91rZJhjwg6tQ419IfMrBlGaFFpKUGB,iv:ze5yv27/bs6mFI83f7Uxk7s+KNOX2ooU9y24rWFJ9Q8=,tag:wrrNVoOquV2JQo9U16g4uw==,type:str]
                                    instant: ENC[AES256_GCM,data:zpQJCw==,iv:h0cPNIt9pc2VFuIJf9SoKy+HAmIlkHFmfR81YdNv5is=,tag:Va3eSf0rbnFxNBOWhiFfjw==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:Uwp+4A==,iv:4tJCxztar4L3CnnoaD/KClgSpb4sgC2w+QVN62ktCO4=,tag:d1Rm3jgHBOf83PwTQYKfhA==,type:int]
                                    legendFormat: ENC[AES256_GCM,data:syAyQR2s,iv:EcmpxzkKnSa+U/e3Jw37EfIie8Uy5fe1U/Cj3OEQgqg=,tag:ay16p1g9dzg01WNiF9/oMg==,type:str]
                                    maxDataPoints: ENC[AES256_GCM,data:eM6ooLc=,iv:N8rr+CHekdxSMhMCzjas4b7tuBmLhjAWpBh6wWchnR0=,tag:1LVWTUVPSitHvrkejA5Yug==,type:int]
                                    range: ENC[AES256_GCM,data:aUlucn4=,iv:gOcblEtRj+CWs/lgATKD2cSE0n2BNumv682ImIsQcnQ=,tag:enmmCEOlszvoinEJryRH2w==,type:bool]
                                    refId: ENC[AES256_GCM,data:Xg==,iv:I4uHzQ7LpPmY1ekOtC62l3pH2NxjLdXtTcnJw4zh3AM=,tag:svnJaJKBHPnlCVI0JHCm/A==,type:str]
                                - refId: ENC[AES256_GCM,data:FQ==,iv:11fjQuk61PbGIdHIuace6+TTYyPtUjpVdHKroRYP7Bg=,tag:NdXV44LydRoss2fbwiSvIw==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:16kj,iv:bOzwrFBur+ZvKvM6Fx+ZyU78hb5cIAfkjdwuoazhMy4=,tag:uQc7pZnmFawCtTldLIErxw==,type:int]
                                    to: ENC[AES256_GCM,data:Vw==,iv:a/l5aCBtD3d034zI51Qqtw7okUX4Q3tziAJ+c0leKpc=,tag:5B0zCo2j9kZmqFJgVEN5ww==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:N7k2cPFvl34=,iv:hMigf2/BAu8TsHR/iVE8cCl2KhfG2gWEvLwrIvmsHxs=,tag:pyMamvEWLSuYEsEcnU7ihw==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params: []
                                            type: ENC[AES256_GCM,data:ACA=,iv:B3ad+kKlVHMQ6w9G2Aw7r8o26iLrn8kg4IT2VDerrxY=,tag:eEdDICovKG0yUavZAKYjFg==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:1V8x,iv:dq9trUC0PMModw06JfIxMh4308Cz8SBP+wGzbkPS1ko=,tag:kzDQvg6Zjvkj3uihpfdRuQ==,type:str]
                                          query:
                                            params:
                                                - ENC[AES256_GCM,data:PA==,iv:9mNdb7tQ9Y8N+eZR5pisbHSNfb69UCg0o2BXwy9ja+o=,tag:cc5X+cMevw4l+KEBk86ZKw==,type:str]
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:sn1DVw==,iv:34eoMxSKb2eTAPXJGcDmMQcGph8EshScZnVq3Vu9p20=,tag:b2U4hGcG+1z8LLfqx+0Bqw==,type:str]
                                          type: ENC[AES256_GCM,data:V17/s8A=,iv:UFgtJfgVYoH8gjaLDLIbXshTOSVxqGQthjr3+CgtqX8=,tag:E1QEJKpBL9wJXrPq0Udl4Q==,type:str]
                                    datasource:
                                        type: ENC[AES256_GCM,data:StPeto/NmYY=,iv:VkCxwLB4KGXWEZ3qylC9USz180LRjaj31o68Fw2C26k=,tag:qU1LLdWEic4AtGJQdRFcNw==,type:str]
                                        uid: ENC[AES256_GCM,data:HVsPMh+lois=,iv:atx4XaIwsb25xiDst8dOot3nXZF1ubX85Zrv1DaPYBQ=,tag:UqU7jLIfwewPzINeDSf/Dw==,type:str]
                                    expression: ENC[AES256_GCM,data:Qw==,iv:C2/L3NbW17KRPE4zXIBH7uZTiuea1oRI29Wcs+YxozQ=,tag:DMdcihYuU+8EAVKPTctARA==,type:str]
                                    intervalMs: ENC[AES256_GCM,data:m1KE2w==,iv:rF3pSsR5+4GhyPTajorPc+Wd+/ks05wwcBBjnP1SQ84=,tag:lhg3WEIX1B7EvnWsMZETZA==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:EB6oCWU=,iv:39O8Q23lcIOnwbCoE+9JVbdrscJl+1JQEzIvQ2igmnA=,tag:HPkKJwXj0gAR3Dsu/ltr+Q==,type:int]
                                    reducer: ENC[AES256_GCM,data:Zw1mCw==,iv:Z+GELTyOY2JMbttYLzGom1Q0DFzbSR1GZq+2tq6Xedo=,tag:lTUSkADKKdHRo2gvhMPdyg==,type:str]
                                    refId: ENC[AES256_GCM,data:Bw==,iv:gmeIaf6rF50wJmHHwQDuZwMJGtDOtdxYa3vLhtR864w=,tag:c5hudcKOuEFGmqpWPnuJ1g==,type:str]
                                    type: ENC[AES256_GCM,data:wIG5D60S,iv:ZeFddhFQyrLmC6hhmJO0LrreBhmJjUVL6qKWysMF368=,tag:jssZ7E/MwbfDnxUgm3tgvg==,type:str]
                              noDataState: OK
                              execErrState: Error
                              for: 20m
                              annotations:
                                runbook_url: https://runbooks.prometheus-operator.dev/runbooks/kubernetes/kubepersistentvolumeerrors
                                summary: |-
                                    {{`The persistent volume {{ $labels.persistentvolume }}
                                    {{ with $labels.cluster - }}
                                    on Cluster {{ . }}
                                    {{ - end }}
                                    has status {{ $labels.phase }}`}}
                                    .
                              isPaused: false
                            - uid: cdz3ywkoiwgzka
                              title: KubePersistentVolumeInodesFillingUp
                              condition: B
                              data:
                                - refId: ENC[AES256_GCM,data:PQ==,iv:fSm8W6p9fhhMFRTQMcX31yEX0NiKJAn+kkSuGqxO4ik=,tag:7KyZjIHtVeoE39OpaVzbWQ==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:NwtZ,iv:XaXdQLAOikA0vNE4rnXyLmXDy3AaSRSuIpvokRzro3U=,tag:9FenBs/QaGxOwCwJ6B+K0w==,type:int]
                                    to: ENC[AES256_GCM,data:OA==,iv:iu4kis07tvDzF49jQ4OrGY/FoO8Y+64bvj8p1k6wtaw=,tag:dbVRvueo+IUfi5POGYhbtA==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:AB1VFi3KL6u4HA==,iv:Sj8AFN6uMpN1bKnubD3beyRG1XP3gR+A0tThbo5ggtQ=,tag:XT3Zshl2QRNIvGF1H/2oKA==,type:str]
                                  model:
                                    editorMode: ENC[AES256_GCM,data:njsHUw==,iv:0B4aKQ+GgbhQlofiWa4SrpYJdIoIi4pcxlOrowaJbZI=,tag:3qRZTY/MXwcSosNvntZu5g==,type:str]
                                    expr: ENC[AES256_GCM,data:DRIC/3Wun1tsWTO/NOw0QJdobDL1l8xY1FcOW/MN3XTEylhpXINBmssMabNVi61viE22HadGaPfzlL7FKlNgJJ7+vIOHOLaE/W0Cu2KPCWASfKZ667wlzkLHjvor5i6DSqjGaqmAmHPmyCgBb4yVfruEacrDKqgxQxsrCaWa2iqXYJfWt50dptiSaFLT3bwY9+YpLYCT6ASIN/NQgsV3W46YGAKp8HP1DlK3B57+jcIK4ifIrypLZQ1M4WsikXKly2zI77W2SE00t+TYhzk86t3JLQNbCBEGD5xzODvxb3ftXx39Vfjb1f3/oRaGjHSfNYVhizmHd2ymjWEoNI2G5axs/mul0ZxBI+sjSghKOiXX6lzK2pivXTzgM3YAS4lHL8wS2RFKmC53EiHkW70YefUos8Pxf47Tpdrs7W+F7DLtUPyyR0/NW8ZoAMcvYLX2oUYqmm/MqWanDmlVOHzbTI1rPr3umHm1LfZcvU3KdB8yQ5UuDyg7MHJ56l0t2S+kbdSTKLC+73LZ3nzZjf8WDBlWBUSM71OQveLQDDqxR4yGrq0UAY/USHBfSfMasY1x+13mdd+k0j4gKXHMPCkIySs0Gh88pJghTNiYE0HZ7KViQBN+BemuKTve3UPjtbMeHRvt/5/cMhGgvQTOv3u/+zyw5a496JxoRx/zgKZv2YSTfrq5PkGjOS8EZndzberRTAudnzrqRrnh+mv+gjN4cbTzOvyDILl51XcMWM7mOqBUfnJ+2SoFCfV6IoJrSOXQq0OAeB9Xy5vueoZRAQ56DtB1KdXwCZEwoo4rHi6GCxo9nKopYD3Jbjj5gTbLZOZkEmomvsMvIvw+61qVyo8myCUoMDZiHd/pn51AxJnpyaATBFN/tvHqCsgGBxNPlQIHkbQ9BR91Rg==,iv:FB9AzAQqLGBA32mAdgjGnPQI+L05mMSGUNGrJTGWp2k=,tag:jo0+KIdMXp02k4SCvkg5Lw==,type:str]
                                    instant: ENC[AES256_GCM,data:mL52VQ==,iv:xqQHexVlNCulP9mtxnS1gnJXN56WlnsY+mWXuzwQwoc=,tag:LgvlCJIUnJi/MIeYmyDeOw==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:L8MV8Q==,iv:LAlmh4sskY6xjLsKt3aoA7okZrxgzxiroo7x0DsnNzs=,tag:Ax2pb88hEDuwsBdefTwWqQ==,type:int]
                                    legendFormat: ENC[AES256_GCM,data:grtClXYQ,iv:ue1ucAgaMAj0KTEFE4zaKPeSQ4KmCO1QrW2SPzGyghM=,tag:1K0Sl7roYvUIV4I57Kb5uw==,type:str]
                                    maxDataPoints: ENC[AES256_GCM,data:41foCqM=,iv:wX5a34oMa5EnuHJXTCxlnSeF2G2GduS6nUTMX7cFcH8=,tag:bLLlcQ+Si9LavtXw/jIo7w==,type:int]
                                    range: ENC[AES256_GCM,data:nNCCA30=,iv:UFNyq6+flJ6+jTKQofvYNCfdsDbyBp/x2i7w1zRXzoE=,tag:EoJYD57YHq6jPrhXsBn08Q==,type:bool]
                                    refId: ENC[AES256_GCM,data:oA==,iv:ENSIu4oZAca0qjIcrCzm8TMvq504bMQdvZPl2TC1hyc=,tag:Fe+Q5mPO8N48JBkFWwo63w==,type:str]
                                - refId: ENC[AES256_GCM,data:zw==,iv:xf2YoIrLINhcq+JykDKAnpgB15QkOM9XkqRvMRtPaCk=,tag:b+dCAyjq9rG8dMJlPCEtJQ==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:cglt,iv:Syuti41FBW4NyI72BdvN14QlY0b5OX/Ra/29sVkMJ8A=,tag:vAuQkyT/uESiMa8ygQ5e4A==,type:int]
                                    to: ENC[AES256_GCM,data:Tw==,iv:VRgO45yb5QVTxhFWTSR43omsz1s2MjVt6wIf+r2fQfg=,tag:mFUKWB3k40v+cQTVaNfstQ==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:B9RcLf6IsaI=,iv:cWgLtu3O+GCu5MftCW62IVzxrwi41Q0gcoPwhgLDUf8=,tag:FaMWeKH7sxJFktR9XZ+twQ==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params: []
                                            type: ENC[AES256_GCM,data:lCs=,iv:jyJXz99gZ3pSQHTFIOHQt2+5TitKK6VQwwiSDa63P+M=,tag:vNGEZWjYdBsFRMl/7FbZEg==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:lznv,iv:+j1P4GhK2jh3rZ1AWvbm2AP5VkGGhE0zjH/5mOxcCTU=,tag:3wnwD2CJ55HvQKyh3b6GiQ==,type:str]
                                          query:
                                            params:
                                                - ENC[AES256_GCM,data:ew==,iv:CQBwjJAn42bnU9SDeNeqOSg07sLk0cs7OUiViEh1Rss=,tag:fu4IO7FriS8cd3iz5Xgt8g==,type:str]
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:VKJeOA==,iv:o/HtKY8uYkxSirQ3IAvgSXlww5IUCZlZVlE68fGVH1c=,tag:IY/SGlrzmovJkUp30Hg8GA==,type:str]
                                          type: ENC[AES256_GCM,data:e1E/gS8=,iv:yfDcZZ4sFhoYPI93UhbJaYXZbtBaCH8XPJe+YLAexxw=,tag:WULtG7l8n3Ye0+d/a8oRRw==,type:str]
                                    datasource:
                                        type: ENC[AES256_GCM,data:StIOfxlb8Ts=,iv:DGgz5y9+Q+m48Y7PXYrxENUqRbVtp+chO5kDAaQ97zg=,tag:Ql6EU++26nkzfzZkERakSw==,type:str]
                                        uid: ENC[AES256_GCM,data:30inM/8MX90=,iv:wICMtUKD8B5IHMRlpMZRoM7Cuj0Y6s5hQptRAsLkQdM=,tag:rsQ5NLKAriri/IYMrpk3qA==,type:str]
                                    expression: ENC[AES256_GCM,data:Sw==,iv:0fFmMvmArz23RSyODdn7Li4609GSzBGOrAccOwcRctg=,tag:IfuzJQX+Ux5OEInmRAv2RQ==,type:str]
                                    intervalMs: ENC[AES256_GCM,data:z7PLnA==,iv:aidu4HfcMAIgSVbv/9376leSDCNs0HfzKfaasE47JUs=,tag:ji0qaZB0ioi8JwQddMFi0A==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:K4JqsBA=,iv:GkrAjdwWJECjT2SzLIsWo5wKtoLtxVFLTqx4eNSu+3E=,tag:vgi/rXKbUr/v3ms6JvGOmw==,type:int]
                                    reducer: ENC[AES256_GCM,data:O/bUmg==,iv:JgT/PoDwackybi8rPg/XyFd7BLvEh0LSy0h0RdbVRmI=,tag:NrtyVIsAnM+ANYklLYi0EQ==,type:str]
                                    refId: ENC[AES256_GCM,data:ig==,iv:/xvTX4/VOWGLckDcg7uorEyhUClDJKgu5kmeZE8AhCM=,tag:PvTCYYrlepeS1X8o4iZqrw==,type:str]
                                    type: ENC[AES256_GCM,data:s9ybQKvh,iv:9byVpZYUrNWJTYTWowyZJaWd3iGOl4jpdTPEBn45QcE=,tag:dNCbqtJYYQXB4o8HrFxR+g==,type:str]
                              noDataState: OK
                              execErrState: Error
                              for: 20m
                              annotations:
                                runbook_url: https://runbooks.prometheus-operator.dev/runbooks/kubernetes/kubepersistentvolumeinodesfillingup
                                summary: |-
                                    {{`Based on recent sampling, the PersistentVolume claimed by {{ $labels.persistentvolumeclaim }}
                                    in Namespace {{ $labels.namespace }}
                                    {{ with $labels.cluster - }}
                                    on Cluster {{ . }}
                                    {{ - end }}
                                    is expected to run out of inodes within four days. Currently {{ $value | humanizePercentage }}
                                    of its inodes are free.`}}
                              isPaused: false
                              notification_settings:
                                receiver: PagerDuty Warning
                        - orgId: 1
                          name: Kube-system
                          folder: Cluster
                          interval: 1m
                          rules:
                            - uid: d2b94d3a-2483-4be4-bf2a-2fd9f9fac406
                              title: Coredns Failure
                              condition: Thresh
                              isPaused: false
                              data:
                                - refId: ENC[AES256_GCM,data:YR+TCfs=,iv:j8aXGEdLrmYxk4B9W/CfRUG1sG2EGSI8xAyp8eclaiw=,tag:HkIg66CHdGsA61bighBiPw==,type:str]
                                  queryType: ENC[AES256_GCM,data:zMPGF7Q=,iv:GXw/VYhpubU+2ZXoMJdeqgsOQxEvwIqMqFmHjWJXxmo=,tag:jqFvUUPwOmQjisys73OZkw==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:q2AR,iv:4JUvXh0LEDK0yc9QGb2dytfydIpQWxo59hBTFDDBddQ=,tag:gU8Vio+Uiphqg2TX4HpILg==,type:int]
                                    to: ENC[AES256_GCM,data:zA==,iv:YeXbMMEr9nu8zhOMlo4ZyVSYXgJIgjvzqvupPjnPoD4=,tag:cSVtKvRgB9XvUkA8eVLYpw==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:9HM8Iw==,iv:C6W1OtPwLmvbPTjGuJ6mnBiJ9XXX9B9g1YioKxlqHPY=,tag:+B93HtQhEQWuMhRS5beMAA==,type:str]
                                  model:
                                    datasource:
                                        type: ENC[AES256_GCM,data:hK+LCw==,iv:GGeYbEDKf9eAkUhVhh1w7Y0YUIMQwnqBBSd7bw2H64U=,tag:pnd8e4cnR4OHmnuRyH+iAQ==,type:str]
                                        uid: ENC[AES256_GCM,data:ddALPA==,iv:PL1yip4p0yOuQdp/l28A6ThuyNRzJfXkKcR5Te8Q4w8=,tag:5bvKQEX0jbQ06dyF4gcrng==,type:str]
                                    editorMode: ENC[AES256_GCM,data:ueNkzYGEmg==,iv:qAlNbRhapeZa8gepAM3uaN+iZjKSy1etKIGAf1+cmCg=,tag:CcgWM0kHv2ks9x0V+O7B+w==,type:str]
                                    expr: ENC[AES256_GCM,data:MRNJ61H/aydfz+AgbDnkPyKEzjC1OT4X0SBnZqnGTjSCz/unY7uFkFjoLWC4iFQsOPM/JsM8Qv23uC+63/tw3nDc93Gu,iv:P5+OuKfc4zyPMjwzMz+9m7oNju/L/3GKPivhzB1kf2s=,tag:AnfVJVS2vc0z5NB8iVGBxw==,type:str]
                                    hide: ENC[AES256_GCM,data:pBlF6jI=,iv:qXugFlwrA3QW8FeH6t3VH3uO+4F/QxNDHZA2ymgLbxI=,tag:auVe6llkk/YyQpu46SrD0A==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:NSNJEQ==,iv:s3K3dFX7Q8jqZInd6W8mqOiGJUbvV+nlRmYx8ELTD4Q=,tag:aVK5y8CyNQU/M+FWdRwkyQ==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:XY/Lxjc=,iv:+0yt+AJbqvA01GCeVEzqOBkBypv98lHCh5kn0dqMyrI=,tag:aLsOStBAiBzkjmdQ6jRbgQ==,type:int]
                                    queryType: ENC[AES256_GCM,data:PO2P+/c=,iv:kqrInJG6DzS4hCj/Q2MQ1Wy3Becu7xBzVHygfP5eIIo=,tag:k9zlOH/Sn2L+gFNsOyDmWQ==,type:str]
                                    range: ENC[AES256_GCM,data:ef8jTQ==,iv:uFUM46J/l7c5rLqXvzOQaVf8Xr4nyMuej3q1U8BgMWc=,tag:1OfFSpL1tQGY/CCCFFKP0A==,type:bool]
                                    refId: ENC[AES256_GCM,data:+JbwWoY=,iv:yXm+lif16gWQ85KYes+4/6WoUbiRCrAhrDR9tc3GRCo=,tag:8Z+RxoRvMQRSm8TL7GmqEw==,type:str]
                                - refId: ENC[AES256_GCM,data:jPYcd5RD,iv:WzDnoz6dmu0D9lfsUIUzbpxHo770EjqDN+S/Xy2+qqc=,tag:Dzy7Q9204KGwJEERFvnBcw==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:TY7v,iv:HWYYRNPfeX80Ppyx4ybOT8ozgVLoJDUSOtRtDB5+CcU=,tag:SV/NCfgKNI1bD/aXuahrfA==,type:int]
                                    to: ENC[AES256_GCM,data:qQ==,iv:Pb1RiMHMd57UElp97BDXzAU9G3i2pp49Ozj8jLZKZ1o=,tag:xC08UqIW10EeX36srRajkQ==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:ssLnhNLUTwE=,iv:YjqtICAa52GrS9AIutGpGhlVk07KajY/0o6tfb1wQAs=,tag:FriEGTbMcQ+yta2r5fJKqg==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:KQ==,iv:B1TNaFRvlQp81cf/0uUoxKmj20EnRauC4febZdX0V3A=,tag:yT8L1R0QDKGLX3kg9s78Nw==,type:int]
                                            type: ENC[AES256_GCM,data:Elc=,iv:U1tLXKDLw7cSfQp3kFNijHtImFXP3GYBuNDXaeRcGa8=,tag:PzdfkzTL/eAjC2aPK0lVMQ==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:lyl2,iv:+Esn+Z5vhtMVPKPiIjY+k5HibdN1ecquTem5RqSMLxA=,tag:nGzYT2zT/KZs4t6HPxb6MA==,type:str]
                                          query:
                                            params:
                                                - ENC[AES256_GCM,data:CQ==,iv:yjby88yqPED0KdbMYgiNY2OvxirxaxA0VNZKNZQvKrA=,tag:5Jr9QwgZf9yjflv8JIZBYA==,type:str]
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:vB6TsQ==,iv:AL1cGco95aGrsKa3zbFLOo0cXyHMYvKmkIHL9oUpoXo=,tag:eQViM3+Qukd2sWsoK6RNLQ==,type:str]
                                          type: ENC[AES256_GCM,data:2ZJ0Fq8=,iv:dYCvVVwX8PEMdGfQpZmv8AR2Y/E7J9hAe45pdMlDmCw=,tag:UMo31jyOBUCp3fACDuj/2w==,type:str]
                                    datasource:
                                        type: ENC[AES256_GCM,data:Yz6fCth2ZsQ=,iv:I1rnhhVP46JKaFIOm6qi9NJytvyzZ6+roe+Exuw5+IU=,tag:h0Aj3lcjWgCr7LG23WtdHA==,type:str]
                                        uid: ENC[AES256_GCM,data:eMZAMDfEJ7c=,iv:oQIz/QgSzBM3LdGkJmQEMeMRkhRqe9Yr9cn8liw3kOA=,tag:DM7rw6O0z0Zy7TfwwyauRg==,type:str]
                                    expression: ENC[AES256_GCM,data:zA==,iv:kjSGFPgBVztzHgpfx7C0q4rkz2du9xdQ9iCyt0bw1/c=,tag:EqWUjrpATjZU29IAgk4Wgw==,type:str]
                                    hide: ENC[AES256_GCM,data:bH3gAaQ=,iv:vJLB74Km34/CTnSBUkU5wS+EAhZZJ96dS6yojGH1GK8=,tag:UAxtytELn1jYBcdSJug1/A==,type:bool]
                                    intervalMs: ENC[AES256_GCM,data:hlhMiQ==,iv:yL2f2vsf2oeACKajVFdDxvtXSJc6OGM8Kry9cH/Ows4=,tag:1u/a/7OWBkJSpMOypY3s3w==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:M0arloo=,iv:UzpJj64QBW0h32KLkgpjskSIWkLTKhyUhwzWV3Ntm54=,tag:OJ0hrRd2ufLw2UMjgPXGKA==,type:int]
                                    refId: ENC[AES256_GCM,data:1KFt6KeB,iv:22rf/P5IzNr6SqcBulZFUVB7oqfGwAub4oNQ1eRF/nA=,tag:KdBNnleiziWUYbGkEPs/3A==,type:str]
                                    type: ENC[AES256_GCM,data:IGZux2YCH19K,iv:0vrvr4uQ4EDUQKuu3jvblc7YRX5BGA1zJ4nObzG1vT8=,tag:0+/1BZSaVAiP+0IXg9hU4Q==,type:str]
                                - refId: ENC[AES256_GCM,data:Iw==,iv:ljpECYGRFnPBvlTPvIP1iLWO9zXpVSzg3R/CzzRydJ8=,tag:xcihANt0Wg7PyU16ILaT1g==,type:str]
                                  relativeTimeRange:
                                    from: ENC[AES256_GCM,data:0vId,iv:7UHyMzLKeEGOr5a5OV0GWr8Ld8uwrX33bvnc9PXgP9E=,tag:9hpKYEAJqlLRsI8xbM/dzw==,type:int]
                                    to: ENC[AES256_GCM,data:aw==,iv:IHmlQPqf2N+cCejzLLGAwySF9GKCfwNEhrxHgcE67xU=,tag:K+XVb+oKeHblwSCrnJdNFA==,type:int]
                                  datasourceUid: ENC[AES256_GCM,data:iX31J1rz2o4=,iv:XYjHqZbOtKvgV+bWYweHGfgoKGtqJfis14qRbARHzT4=,tag:21dT7hsdlJvLCzRPOOeiVg==,type:str]
                                  model:
                                    conditions:
                                        - evaluator:
                                            params:
                                                - ENC[AES256_GCM,data:0Q==,iv:Mm7HL7Qlj8Rw1fBjvrTAPPQATNxHLH2MXbg165NE+Vw=,tag:uHYRwKxGb5y/bkOvqywLNw==,type:int]
                                                - ENC[AES256_GCM,data:Hg==,iv:DGxneQc+BEEwfJ17K2q9ZKUEV3IOgGkF1G2E6JEMg+U=,tag:RtfkiwDroP5f5SujjR7ofg==,type:int]
                                            type: ENC[AES256_GCM,data:kLU=,iv:vW5rjzWuHjf8OjQf24hYEvdQ4UEXk3ukCJ9TZc/8RaE=,tag:YiwGlMcvD7Z0Szh3uXLKkA==,type:str]
                                          operator:
                                            type: ENC[AES256_GCM,data:kO3y,iv:pC0DUFrVDLG0c1AEG9IUDTIPdxEQmxmIH3ik5KuQP1g=,tag:9aFceIFlDZE4Psn12IsD7g==,type:str]
                                          query:
                                            params: []
                                          reducer:
                                            params: []
                                            type: ENC[AES256_GCM,data:/uIq,iv:llDwQ/vZA6iPmE8dAH+SWQJLW7n4bTcvDLmQw1itOgU=,tag:NRIU8rAsKN2i6E52pB9bvA==,type:str]
                                          type: ENC[AES256_GCM,data:5O+0Jcw=,iv:anPuSMOUYQcC1l40kwHuZqD4t8o3CRn/TsTu1yYj4j4=,tag:xOtmbQhNu3v3v2cj7ESADw==,type:str]
                                    datasource:
                                        name: ENC[AES256_GCM,data:/IaBvEyBkAOKYA==,iv:SRBrNMfeMUOt6kScB0KPdHAaiNOnqm3xloDdmPcqk6Q=,tag:wwnEHhLbD76z+q/dmDAGLg==,type:str]
                                        type: ENC[AES256_GCM,data:bvXAu1+gGNk=,iv:2NsxOQ/gLHNf7YES1nhMz7gMviY6jcgIYRtmf1YfQdg=,tag:WBhvleTcbvBEKVXUCM8tqg==,type:str]
                                        uid: ENC[AES256_GCM,data:VtvV5ny3sYA=,iv:t4hmTHF++TgMfjh0anlOaAWoCnkkzGn9LF/PLq6hapM=,tag:4jgOZhhcgSUOQGt/DifmCQ==,type:str]
                                    expression: ENC[AES256_GCM,data:SMwsSFQ=,iv:J/0MaSXMqoUh0ZBgtApLgQv4aw2H1kSnKgc5Djd2RLQ=,tag:kGtC6jDdL/fo20AfZbGAeA==,type:str]
                                    intervalMs: ENC[AES256_GCM,data:2cLNCQ==,iv:OtOnFbiRKQDNMoz3TpqgGjINxDVp7xN939jUzgZu0H0=,tag:xi27pPWLoSY34L0kfULzog==,type:int]
                                    maxDataPoints: ENC[AES256_GCM,data:VHUaE4E=,iv:bOk/LbqHpFuPPRFVqY/46ptbTX76tecMLfhmdSnZxMI=,tag:tBMZp1dCj/lAu6XP+2PQFA==,type:int]
                                    reducer: ENC[AES256_GCM,data:/9oa9g==,iv:KRSG8X9a9D7yE04Bs0+/k9E1BIsDY3K2nyhOXkTMHCE=,tag:eMWtOszpcwZfCvvrgUISiA==,type:str]
                                    refId: ENC[AES256_GCM,data:Gg==,iv:/uKkEbAGFy47AEFDzpTlJP1dTEKI7amlqS6531B+plI=,tag:liH2e9kbttDCVXM595fijA==,type:str]
                                    settings:
                                        mode: ENC[AES256_GCM,data:wH6b5FulrRgY,iv:1xGZlJesXdk/0xvHE8tbXx2HOmffGym9ovMxBjTi6IQ=,tag:5uTWVSgYp1Jd/+6vLo4Dkg==,type:str]
                                        replaceWithValue: ENC[AES256_GCM,data:Eg==,iv:uUX/i2bXbjDvAxwHXv6k2hU0aCAgQ8+/qsNrMTxr9Ok=,tag:m0nqAJ5ZrQBI5tJ4VxCgww==,type:int]
                                    type: ENC[AES256_GCM,data:S88IpsFp,iv:1EMdnHGBVEM+RQqIueu2b4jyJv6Sgv0b2NW7y79Ojcw=,tag:kdpd4otumd25a/yP0dmXIA==,type:str]
                              noDataState: OK
                              execErrState: Error
                              for: 2m
                              annotations:
                                summary: High amount of i/o timeouts in coredns
                contactpoints.yaml:
                    apiVersion: 1
                    contactPoints:
                        - orgId: 1
                          name: MidnightThoughts Ops
                          receivers:
                            - uid: "1"
                              name: MidnightThoughts Ops
                              type: email
                              sendReminder: true
                              frequency: 1m
                              settings:
                                addresses: ops@nordgedanken.dev;mtrnord@nordgedanken.dev;mtrnord1@gmail.com
                        - orgId: 1
                          name: PagerDuty
                          receivers:
                            - uid: adz30e8814wshd
                              type: pagerduty
                              settings:
                                integrationKey: ENC[AES256_GCM,data:9XxU+5V+grOXIFknzAn84nzEyI5qrQ6Uru+zxpoB+LE=,iv:gQwE4wkAB5P0hMAvALa343iiSknhDkSAnSDv4wXUpG0=,tag:GZ7z3IUeCFJJtHU2MwYl5w==,type:str]
                                url: https://events.eu.pagerduty.com/v2/enqueue
                              disableResolveMessage: false
                        - orgId: 1
                          name: PagerDuty Warning
                          receivers:
                            - uid: pg_warning
                              type: pagerduty
                              settings:
                                integrationKey: ENC[AES256_GCM,data:lBVfkryKZouqX+2s0DCoVKdozY3IBYPIVHKfDtNBRrA=,iv:injp0U9EAAGmy6sjup4+GF7eUX80h92c/+X2r1tZHiw=,tag:YRHN4PmNiMGE4bbD15KLOQ==,type:str]
                                severity: warning
                                url: https://events.eu.pagerduty.com/v2/enqueue
                              disableResolveMessage: false
                        - orgId: 1
                          name: PagerDuty Draupnir4All
                          receivers:
                            - uid: "3"
                              type: pagerduty
                              settings:
                                integrationKey: ENC[AES256_GCM,data:P/x/WMW06imf6HNvT53c3mB6WDl6/nd3Ps2Fm5hPlTU=,iv:WfhRudMbS5v8G4UdIPIgEWsTQZ3UjZec6jn9ii688ko=,tag:6AxzStgVXIbZ3PZgF1VPGA==,type:str]
                                url: https://events.eu.pagerduty.com/v2/enqueue
                              disableResolveMessage: false
                        - orgId: 1
                          name: PagerDuty Draupnir4All Warning
                          receivers:
                            - uid: de02at943dxxcf
                              type: pagerduty
                              settings:
                                integrationKey: ENC[AES256_GCM,data:J6a6y9744fpO7m8V1orohQd3Eg0A3RKKtisyO2HK2Z0=,iv:tH8ag8QsD0cu//n/C50G+LmxXCFBgDXkRMgWKIyx860=,tag:h+GdC+/M78+3OycpKrJbSg==,type:str]
                                severity: warning
                                url: https://events.eu.pagerduty.com/v2/enqueue
                              disableResolveMessage: false
                policies.yaml:
                    apiVersion: 1
                    policies:
                        - orgId: 1
                          receiver: PagerDuty
                          group_by:
                            - grafana_folder
                            - alertname
                          routes:
                            - receiver: PagerDuty
                              object_matchers:
                                - - service_id
                                  - '!='
                                  - draupnir4all
                            - receiver: PagerDuty Draupnir4All
                              object_matchers:
                                - - service_id
                                  - =
                                  - draupnir4all
                            - receiver: MidnightThoughts Ops
    postRenderers:
        - kustomize:
            patches:
                - target:
                    # Ignore these objects from Flux diff as they are mutated from chart hooks
                    kind: (ValidatingWebhookConfiguration|MutatingWebhookConfiguration)
                    name: kube-prometheus-stack-admission
                  patch: |
                    - op: add
                      path: /metadata/annotations/helm.toolkit.fluxcd.io~1driftDetection
                      value: disabled
                - target:
                    # Ignore these objects from Flux diff as they are mutated at apply time but not at dry-run time
                    kind: PrometheusRule
                  patch: |
                    - op: add
                      path: /metadata/annotations/helm.toolkit.fluxcd.io~1driftDetection
                      value: disabled
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1esjyg2qfy49awv0ptkzvpk425adczjr38m37w2mmcahzc4p8n54sll2nzh
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBBc0xmN2ptdzd4YlhoaTZQ
            cHRHV2x6c3dLVFd5TTJ6VEd5cVlKS1h0a0gwCkNQbzhlU3grby9aaHVMUG8zUEhK
            dFhHeStSd1l6ZG1SM1hURklpQ3lFYXMKLS0tIC9jZFZveW11SjRIRHhHY3FaTFNY
            SldaZ0dwU2xBSVpGZkpMWmRXanl6c2sK4/YSa6NmfHJmS7i4FN8FVSHs5EAHgW8/
            FFNZ/hNzAt9lwsew9J9TwU/NEs9s3tcDVx/z9DoxPgQP59IYwO+2NQ==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-28T16:39:36Z"
    mac: ENC[AES256_GCM,data:qdGuDeICqOizXmscvB6/KMtj1FwG7IXcpmcELcevlxZRgcILJXFZwO9Z5jJbJu4LVtdfWo8qBSKUrLTz12Rz0N2MO8Py78bbbUD5djZZ0aNKLHA+is8jvDnDs7heAqhem/Ck/NPl049TQN8ftKbtgLILfhDKsoKrFKH3LXH8VJs=,iv:SR+TqS/13zgrBwA2ypt74yF2qtStfxROc5heTQeDpe8=,tag:60LuQ9BNZ0mcWLc2yo0XuA==,type:str]
    pgp: []
    encrypted_regex: ^(apiKey|appUserPassword|otelUserPassword|harborAdminPassword|totpVaultKey|kimaiAppSecret|kimaiAdminPassword|GITHUB_CLIENT_ID|GITHUB_CLIENT_SECRET|GITHUB_PRIVATE_KEY|woosh|root_password|rspamd_password|pgdb_password|matrix_access_token|pgdb_remote_url|hmac_secret_key|adminPassword|adminEmail|jenkinsAdminEmail|securityRealm|gerrit.config|routing_key|DATABASE_URL|SMTP_PASSWORD|SECRET_KEY_BASE|admin_password|extraCommands|key|clickhouseDatabaseURL|databaseURL|client_id|client_secret|secret_key_base|otp_secret|private_key|public_key|primaryKey|deterministicKey|keyDerivationSalt|token|clientId|secretKey|installationId|installationKey|uriOverride|adminToken.value|password.value|sql_password|erlangCookie|AUTHENTICATION_PASSWORD|ROOM_API_SECRET_KEY|adminPassword|configPassword|adminUser|configUser|MAIL_PASSWORD|APP_KEY|api_key|api_secret|keys|livekit_key|livekit_secret|secret_key|admin_pass|admin_email|mariadbPassword|mariadbRootPassword|privateKey|data|stringData|PASSWD|password|pass|postgresPassword|postgresqlPassword|redminePassword|smtpPassword|registration_shared_secret|shared_secret|secret|admin_token|integrationKey|rootPassword|adminPassword|adminUser|adminEmail|emailPassword|secretKey|appId|clientSecret|webhookSecret)$
    version: 3.9.1
---
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
    name: grafana
    namespace: monitoring
spec:
    parentRefs:
        - name: envoy-gateway
          namespace: envoy-gateway
    hostnames:
        - grafana.midnightthoughts.space
    rules:
        - backendRefs:
            - name: prometheus-stack-grafana
              port: 80
          timeouts:
            request: 240s
            backendRequest: 0s
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1esjyg2qfy49awv0ptkzvpk425adczjr38m37w2mmcahzc4p8n54sll2nzh
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBBc0xmN2ptdzd4YlhoaTZQ
            cHRHV2x6c3dLVFd5TTJ6VEd5cVlKS1h0a0gwCkNQbzhlU3grby9aaHVMUG8zUEhK
            dFhHeStSd1l6ZG1SM1hURklpQ3lFYXMKLS0tIC9jZFZveW11SjRIRHhHY3FaTFNY
            SldaZ0dwU2xBSVpGZkpMWmRXanl6c2sK4/YSa6NmfHJmS7i4FN8FVSHs5EAHgW8/
            FFNZ/hNzAt9lwsew9J9TwU/NEs9s3tcDVx/z9DoxPgQP59IYwO+2NQ==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-28T16:39:36Z"
    mac: ENC[AES256_GCM,data:qdGuDeICqOizXmscvB6/KMtj1FwG7IXcpmcELcevlxZRgcILJXFZwO9Z5jJbJu4LVtdfWo8qBSKUrLTz12Rz0N2MO8Py78bbbUD5djZZ0aNKLHA+is8jvDnDs7heAqhem/Ck/NPl049TQN8ftKbtgLILfhDKsoKrFKH3LXH8VJs=,iv:SR+TqS/13zgrBwA2ypt74yF2qtStfxROc5heTQeDpe8=,tag:60LuQ9BNZ0mcWLc2yo0XuA==,type:str]
    pgp: []
    encrypted_regex: ^(apiKey|appUserPassword|otelUserPassword|harborAdminPassword|totpVaultKey|kimaiAppSecret|kimaiAdminPassword|GITHUB_CLIENT_ID|GITHUB_CLIENT_SECRET|GITHUB_PRIVATE_KEY|woosh|root_password|rspamd_password|pgdb_password|matrix_access_token|pgdb_remote_url|hmac_secret_key|adminPassword|adminEmail|jenkinsAdminEmail|securityRealm|gerrit.config|routing_key|DATABASE_URL|SMTP_PASSWORD|SECRET_KEY_BASE|admin_password|extraCommands|key|clickhouseDatabaseURL|databaseURL|client_id|client_secret|secret_key_base|otp_secret|private_key|public_key|primaryKey|deterministicKey|keyDerivationSalt|token|clientId|secretKey|installationId|installationKey|uriOverride|adminToken.value|password.value|sql_password|erlangCookie|AUTHENTICATION_PASSWORD|ROOM_API_SECRET_KEY|adminPassword|configPassword|adminUser|configUser|MAIL_PASSWORD|APP_KEY|api_key|api_secret|keys|livekit_key|livekit_secret|secret_key|admin_pass|admin_email|mariadbPassword|mariadbRootPassword|privateKey|data|stringData|PASSWD|password|pass|postgresPassword|postgresqlPassword|redminePassword|smtpPassword|registration_shared_secret|shared_secret|secret|admin_token|integrationKey|rootPassword|adminPassword|adminUser|adminEmail|emailPassword|secretKey|appId|clientSecret|webhookSecret)$
    version: 3.9.1
