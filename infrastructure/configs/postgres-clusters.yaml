---
apiVersion: v1
kind: Namespace
metadata:
  name: matrix-postgres-cluster
---
apiVersion: acid.zalan.do/v1
kind: postgresql
metadata:
  labels:
    team: matrix
  name: matrix-postgres-cluster
  namespace: matrix-postgres-cluster
spec:
  allowedSourceRanges: []
  databases:
    synapse: synapse
    matrix_media_repo: matrix_media_repo
    syncv3: syncv3
    signal_bridge: signal_bridge
    instagram_bridge: instagram_bridge
  enableConnectionPooler: false
  enableReplicaConnectionPooler: false
  numberOfInstances: 3
  postgresql:
    version: "15"
    parameters:
      password_encryption: scram-sha-256
      max_connections: "200"
  teamId: matrix
  users:
    synapse: []
    matrix_media_repo: []
    syncv3: []
    signal_bridge: []
    instagram_bridge: []
  volume:
    size: 10Gi
